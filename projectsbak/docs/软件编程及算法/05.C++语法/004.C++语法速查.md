---
title: C++语法速查
date: 2023-05-31 22:37:24
permalink: /pages/c3e7e9/
tags:
  - 
---


## Hello world!

hello.cpp

```cpp
#include <iostream>

int main() {
    std::cout << "Hello world! \n";
    return 0;
}
```

编译和运行

```shell
$ g++ hello.cpp -o hello
$ ./hello
Hello world!
```



## 用户输入输出

```shell
int num;

std::cout << "Type a number: ";
std::cin >> num;

std::cout << "You entered " << num;
```



## 变量

```cpp
int number = 5;       // Integer
float f = 0.95;       // Floating number
double PI = 3.14159;  // Floating number
char yes = 'Y';       // Character
std::string s = "ME"; // String (text)
bool isRight = true;  // Boolean

// Constants
const float RATE = 0.8;
```

------

```cpp
int age {25};         // Since C++11
std::cout << age;     // Print 25
```



## 注释

```cpp
// A single one line comment in C++

/* This is a multiple line comment
   in C++ */
```



## for 循环

```cpp
for (int i = 0; i < 10; i++) {
    std::cout << i << "\n";
}
```

## C++ 条件

### if 语句

```cpp
if (a == 10) {
    // do something
}
```

------

```cpp
int number = 16;

if (number % 2 == 0)
{
    std::cout << "even";
}
else
{
    std::cout << "odd";
}

// Outputs: even
```

### Else if 语句

```cpp
int score = 99;
if (score == 100) {
    std::cout << "Superb";
}
else if (score >= 90) {
    std::cout << "Excellent";
}
else if (score >= 80) {
    std::cout << "Very Good";
}
else if (score >= 70) {
    std::cout << "Good";
}
else if (score >= 60)
    std::cout << "OK";
else
    std::cout << "What?";
```



## Switch 语句

```cpp
int num = 2;
switch (num) {
    case 0:
        std::cout << "Zero";
        break;
    case 1:
        std::cout << "One";
        break;
    case 2:
        std::cout << "Two";
        break;
    case 3:
        std::cout << "Three";
        break;
    default:
        std::cout << "What?";
        break;
}
```

## C++ 循环

### While

```cpp
int i = 0;
while (i < 6) {
    std::cout << i++;
}

// Outputs: 012345
```

### Do-while

```cpp
int i = 1;
do {
    std::cout << i++;
} while (i <= 5);

// Outputs: 12345
```

### Continue 语句

```cpp
for (int i = 0; i < 10; i++) {
    if (i % 2 == 0) {
        continue;
    }
    std::cout << i;
} // Outputs: 13579
```

### 无限循环

```cpp
while (true) { // true or 1
    std::cout << "infinite loop";
}
```

 

```cpp
for (;;) {
    std::cout << "infinite loop";
}
```



```cpp
for(int i = 1; i > 0; i++) {
    std::cout << "infinite loop";
}
```

## for_each (从 C++11 版本开始)

```cpp
#include <iostream>

void print(int num)
{
    std::cout << num << std::endl;
}

int main()
{
    int arr[4] = {1, 2, 3, 4 };
    std::for_each(arr, arr + 4, print);
    return 0;
}
```

## Range-based (从 C++11 版本开始)

```cpp
int num_array[] = {1, 2, 3, 4, 5};
for (int n : num_array) {
    std::cout << n << " ";
}
// Outputs: 1 2 3 4 5
```

------

```cpp
std::string hello = "QuickRef.ME";
for (char c: hello)
{
    std::cout << c << " ";
}
// Outputs: Q u i c k R e f . M E 
```

## Break 语句

```cpp
int password, times = 0;
while (password != 1234) {
    if (times++ >= 3) {
        std::cout << "Locked!\n";
        break;
    }
    std::cout << "Password: ";
    std::cin >> password; // input
}
```

## 几种变体

```cpp
for (int i = 0, j = 2; i < 3; i++, j--){
    std::cout << "i=" << i << ",";
    std::cout << "j=" << j << ";";
}
// Outputs: i=0,j=2;i=1,j=1;i=2,j=0;
```


## 数组

数组包含一维数组和多维数组，数组的操作是通过指针在开辟的连续内存空间移动实现的

### 声明

```cpp
int marks[3]; // Declaration
marks[0] = 92;
marks[1] = 97;
marks[2] = 98;

// Declare and initialize
int marks[3] = {92, 97, 98};
int marks[]  = {92, 97, 98};

// With empty members
int marks[3] = {92, 97};
std::cout << marks[2]; // Outputs: 0
```

### 操作

```
┌─────┬─────┬─────┬─────┬─────┬─────┐
| 92  | 97  | 98  | 99  | 98  | 94  |
└─────┴─────┴─────┴─────┴─────┴─────┘
   0     1     2     3     4     5
```

------

```cpp
int marks[6] = {92, 97, 98, 99, 98, 94};

// Print first element
std::cout << marks[0];

// Change 2th element to 99
marks[1] = 99;

// Take input from the user
std::cin >> marks[2];
```

### 显示

```cpp
char ref[5] = {'R', 'e', 'f'};

// Range based for loop
for (const int &n : ref) {
    std::cout << std::string(1, n);
}

// Traditional for loop
for (int i = 0; i < sizeof(ref); ++i) {
    std::cout << ref[i];
}
```

### 多维数组

```
     j0   j1   j2   j3   j4   j5
   ┌────┬────┬────┬────┬────┬────┐
i0 | 1  | 2  | 3  | 4  | 5  | 6  |
   ├────┼────┼────┼────┼────┼────┤
i1 | 6  | 5  | 4  | 3  | 2  | 1  |
   └────┴────┴────┴────┴────┴────┘
```

------

```cpp
int x[2][6] = {
    {1,2,3,4,5,6}, {6,5,4,3,2,1}
};
for (int i = 0; i < 2; ++i) {
    for (int j = 0; j < 6; ++j) {
        std::cout << x[i][j] << " ";
    }
}
// Outputs: 1 2 3 4 5 6 6 5 4 3 2 1 
```

## 函数

```cpp
#include <iostream>
 
int max(int num1, int num2);
 
int main() {  // main function
    int ret = max(a, b);
    cout << "Max value is : " << ret << endl;
}

int max(int num1, int num2){
    // 局部变量声明
    int result;
    if (num1 > num2)
        result = num1;
    else
        result = num2;
    return result; 
}
```



### Overloading 超载

```cpp
void fun(string a, string b) {
    std::cout << a + " " + b;
}
void fun(string a) {
    std::cout << a;
}
void fun(int a) {
    std::cout << a;
}
```

### 内置函数

```cpp
#include <iostream>
#include <cmath> // import library
 
int main() {
    // sqrt() is from cmath
    std::cout << sqrt(9);
}
```







## 数据类型

| 数据类型  | 尺寸          | 范围            |
| :-------- | :------------ | :-------------- |
| `int`     | 4字节         | -2 31 ~ 2 31 -1 |
| `float`   | 4字节         | *不适用*        |
| `double`  | 8 字节        | *不适用*        |
| `char`    | 1 字节        | -128 ~ 127      |
| `bool`    | 1 字节        | true / false    |
| `void`    | *不适用*      | *不适用*        |
| `wchar_t` | 2 或 4 个字节 | 1 个宽字符      |

## 常量

整数常量：

```
85         // 十进制
0213       // 八进制 
0x4b       // 十六进制 
30         // 整数 
30u        // 无符号整数 
30l        // 长整数 
30ul       // 无符号长整数
```

浮点常量：

```
3.14159       // 合法的 
314159E-5L    // 合法的 
510E          // 非法的：不完整的指数
210f          // 非法的：没有小数或指数
.e55          // 非法的：缺少整数或分数
```

布尔常量

```
true 值代表条件真
false 值代表条件假 
```



## 运算符

### 关系运算符

| `a == b` | a 等于 b       |
| -------- | -------------- |
| `a != b` | a 不等于 b     |
| `a < b`  | a 小于 b       |
| `a > b`  | a 更大 b       |
| `a <= b` | a 小于或等于 b |
| `a >= b` | a 大于或等于 b |

### 赋值运算符

| `a += b` | *又名* a = a + b |
| -------- | ---------------- |
| `a -= b` | *又名* a = a - b |
| `a *= b` | *又名* a = a * b |
| `a /= b` | *又名* a = a / b |
| `a %= b` | *又名* a = a % b |

### 逻辑运算符

| `exp1 && exp2` | 两者都是真的*（AND）* |
| -------------- | --------------------- |
| `exp1 || exp2` | 要么为真*（或）*      |
| `!exp`         | `exp`是假的*（不是）* |

### 位运算符

| `a & b`  | 二进制与   |
| -------- | ---------- |
| `a | b`  | 二进制或   |
| `a ^ b`  | 二进制异或 |
| `a ~ b`  | 二进制补码 |
| `a << b` | 二进制左移 |
| `a >> b` | 二进制右移 |

## 三元运算符

```
           ┌── True ──┐
Result = Condition ? Exp1 : Exp2;
           └───── False ─────┘
```

------

```cpp
int x = 3, y = 5, max;
max = (x > y) ? x : y;

// Outputs: 5
std::cout << max << std::endl;
```

------

```cpp
int x = 3, y = 5, max;
if (x > y) {
    max = x;
} else {
    max = y;
}
// Outputs: 5
std::cout << max << std::endl;
```

## 

## 命名空间

```cpp
#include <iostream>
namespace ns1 {int val(){return 5;}}
int main()
{
    std::cout << ns1::val();
}
```



```cpp
#include <iostream>
namespace ns1 {int val(){return 5;}}
using namespace ns1;
using namespace std;
int main()
{
    cout << val(); 
}
```

命名空间允许名称下的全局标识符



## 对象引用

```cpp
int i = 1;
int& ri = i; // ri is a reference to i

ri = 2; // i is now changed to 2
std::cout << "i=" << i;

i = 3;   // i is now changed to 3
std::cout << "ri=" << ri;
```

`ri`并`i`引用相同的内存位置。



## 变量作用域

全局变量和局部变量：

```cpp
#include <iostream>
using namespace std;
 
// 全局变量声明
int g;
 
int main ()
{
    // 局部变量声明
    int a, b;
 
    // 实际初始化
    a = 10;
    b = 20;
    g = a + b;
 
    cout << g;
    return 0;
 } 
```



##  预处理器

### 预处理器

- [if](https://en.cppreference.com/w/cpp/preprocessor/conditional) 、[elif](https://en.cppreference.com/w/cpp/preprocessor/conditional)、  [else](https://en.cppreference.com/w/cpp/preprocessor/conditional)、  [endif](https://en.cppreference.com/w/cpp/preprocessor/conditional)、  [ifdef](https://en.cppreference.com/w/cpp/preprocessor/conditional)、  [ifndef](https://en.cppreference.com/w/cpp/preprocessor/conditional)、  [define](https://en.cppreference.com/w/cpp/preprocessor/replace)、  [undef](https://en.cppreference.com/w/cpp/preprocessor/replace)、  [include](https://en.cppreference.com/w/cpp/preprocessor/include)、  [line](https://en.cppreference.com/w/cpp/preprocessor/line)、  [error](https://en.cppreference.com/w/cpp/preprocessor/error)、  [pragma](https://en.cppreference.com/w/cpp/preprocessor/impl)、  [defined](https://en.cppreference.com/w/cpp/preprocessor/conditional)、  [__has_include](https://en.cppreference.com/w/cpp/feature_test)、  [__has_cpp_attribute](https://en.cppreference.com/w/cpp/feature_test)、  [export](https://en.cppreference.com/w/cpp/keyword/export)、  [import](https://en.cppreference.com/mwiki/index.php?title=cpp/keyword/import&action=edit&redlink=1)、  [module](https://en.cppreference.com/mwiki/index.php?title=cpp/keyword/module&action=edit&redlink=1)

## Includes 包括

```cpp
#include "iostream"
#include <iostream>
```

## Defines 定义

```cpp
#define FOO
#define FOO "hello"

#undef FOO
```

## If 如果

```cpp
#ifdef DEBUG
  console.log('hi');
#elif defined VERBOSE
  ...
#else
  ...
#endif
```

## Error 错误

```scss
#if VERSION == 2.0
  #error Unsupported
  #warning Not really supported
#endif
```

## Macro 宏

```scss
#define DEG(x) ((x) * 57.29)
```

## Token concat 令牌连接

```scss
#define DST(name) name##_s name##_t
DST(object);   #=> object_s object_t;
```

## Stringification 字符串化

```scss
#define STR(name) #name
char * a = STR(object);   #=> char * a = "object";
```

## file and line 文件和行

```scss
#define LOG(msg) console.log(__FILE__, __LINE__, msg)
#=> console.log("file.txt", 3, "hey")
```

## 其他

## 转义序列

| `\b` | 退格     |
| ---- | -------- |
| `\f` | 换页     |
| `\n` | 换行     |
| `\r` | 返回     |
| `\t` | 水平标签 |
| `\v` | 垂直标签 |
| `\\` | 反斜杠   |
| `\'` | 单引号   |
| `\"` | 双引号   |
| `\?` | 问号     |
| `\0` | 空字符   |

## 关键词

 [alignas](https://en.cppreference.com/w/cpp/keyword/alignas)、  [alignof](https://en.cppreference.com/w/cpp/keyword/alignof)、  [and](https://en.cppreference.com/w/cpp/keyword/and)、  [and_eq](https://en.cppreference.com/w/cpp/keyword/and_eq)、  [asm](https://en.cppreference.com/w/cpp/keyword/asm)、  [atomic_cancel](https://en.cppreference.com/w/cpp/keyword/atomic_cancel) 、 [atomic_commit](https://en.cppreference.com/w/cpp/keyword/atomic_commit) 、 [atomic_noexcept](https://en.cppreference.com/w/cpp/keyword/atomic_noexcept) 、 [auto](https://en.cppreference.com/w/cpp/keyword/auto) 、 [bitand](https://en.cppreference.com/w/cpp/keyword/bitand) 、 [bitor](https://en.cppreference.com/w/cpp/keyword/bitor) 、 [bool](https://en.cppreference.com/w/cpp/keyword/bool) 、 [break](https://en.cppreference.com/w/cpp/keyword/break) 、 [case](https://en.cppreference.com/w/cpp/keyword/case) 、 [catch](https://en.cppreference.com/w/cpp/keyword/catch) 、 [char](https://en.cppreference.com/w/cpp/keyword/char) 、 [char8_t](https://en.cppreference.com/w/cpp/keyword/char8_t) 、 [char16_t](https://en.cppreference.com/w/cpp/keyword/char16_t) 、 [char32_t](https://en.cppreference.com/w/cpp/keyword/char32_t) 、 [class](https://en.cppreference.com/w/cpp/keyword/class) 、 [compl](https://en.cppreference.com/w/cpp/keyword/compl) 、 [concept](https://en.cppreference.com/w/cpp/keyword/concept) 、 [const](https://en.cppreference.com/w/cpp/keyword/const) 、 [consteval](https://en.cppreference.com/w/cpp/keyword/consteval) 、 [constexpr](https://en.cppreference.com/w/cpp/keyword/constexpr) 、 [constinit](https://en.cppreference.com/w/cpp/keyword/constinit) 、 [const_cast](https://en.cppreference.com/w/cpp/keyword/const_cast) 、 [continue](https://en.cppreference.com/w/cpp/keyword/continue) 、 [co_await](https://en.cppreference.com/w/cpp/keyword/co_await) 、 [co_return](https://en.cppreference.com/w/cpp/keyword/co_return) 、 [co_yield](https://en.cppreference.com/w/cpp/keyword/co_yield) 、 [decltype](https://en.cppreference.com/w/cpp/keyword/decltype) 、 [default](https://en.cppreference.com/w/cpp/keyword/default) 、 [delete](https://en.cppreference.com/w/cpp/keyword/delete) 、 [do](https://en.cppreference.com/w/cpp/keyword/do) 、 [double](https://en.cppreference.com/w/cpp/keyword/double) 、 [dynamic_cast](https://en.cppreference.com/w/cpp/keyword/dynamic_cast) 、 [else](https://en.cppreference.com/w/cpp/keyword/else) 、 [enum](https://en.cppreference.com/w/cpp/keyword/enum) 、 [explicit](https://en.cppreference.com/w/cpp/keyword/explicit) 、 [export](https://en.cppreference.com/w/cpp/keyword/export) 、 [extern](https://en.cppreference.com/w/cpp/keyword/extern) 、 [false](https://en.cppreference.com/w/cpp/keyword/false) 、 [float](https://en.cppreference.com/w/cpp/keyword/float) 、 [for](https://en.cppreference.com/w/cpp/keyword/for) 、 [friend](https://en.cppreference.com/w/cpp/keyword/friend) 、 [goto](https://en.cppreference.com/w/cpp/keyword/goto) 、 [if](https://en.cppreference.com/w/cpp/keyword/if) 、 [inline](https://en.cppreference.com/w/cpp/keyword/inline) 、 [int](https://en.cppreference.com/w/cpp/keyword/int) 、 [long](https://en.cppreference.com/w/cpp/keyword/long) 、 [mutable](https://en.cppreference.com/w/cpp/keyword/mutable) 、 [namespace](https://en.cppreference.com/w/cpp/keyword/namespace) 、 [new](https://en.cppreference.com/w/cpp/keyword/new) 、 [noexcept](https://en.cppreference.com/w/cpp/keyword/noexcept) 、 [not](https://en.cppreference.com/w/cpp/keyword/not) 、 [not_eq](https://en.cppreference.com/w/cpp/keyword/not_eq) 、 [nullptr](https://en.cppreference.com/w/cpp/keyword/nullptr) 、 [operator](https://en.cppreference.com/w/cpp/keyword/operator) 、 [or](https://en.cppreference.com/w/cpp/keyword/or) 、 [or_eq](https://en.cppreference.com/w/cpp/keyword/or_eq) 、 [private](https://en.cppreference.com/w/cpp/keyword/private) 、 [protected](https://en.cppreference.com/w/cpp/keyword/protected) 、 [public](https://en.cppreference.com/w/cpp/keyword/public) 、 [reflexpr](https://en.cppreference.com/w/cpp/keyword/reflexpr) 、 [register](https://en.cppreference.com/w/cpp/keyword/register) 、 [reinterpret_cast](https://en.cppreference.com/w/cpp/keyword/reinterpret_cast) 、 [requires](https://en.cppreference.com/w/cpp/keyword/requires) 、 [return](https://en.cppreference.com/w/cpp/language/return) 、 [short](https://en.cppreference.com/w/cpp/keyword/short) 、 [signed](https://en.cppreference.com/w/cpp/keyword/signed) 、 [sizeof](https://en.cppreference.com/w/cpp/keyword/sizeof) 、 [static](https://en.cppreference.com/w/cpp/keyword/static) 、 [static_assert](https://en.cppreference.com/w/cpp/keyword/static_assert) 、 [static_cast](https://en.cppreference.com/w/cpp/keyword/static_cast) 、 [struct](https://en.cppreference.com/w/cpp/keyword/struct) 、 [switch](https://en.cppreference.com/w/cpp/keyword/switch) 、 [synchronized](https://en.cppreference.com/w/cpp/keyword/synchronized) 、 [template](https://en.cppreference.com/w/cpp/keyword/template) 、 [this](https://en.cppreference.com/w/cpp/keyword/this) 、 [thread_local](https://en.cppreference.com/w/cpp/keyword/thread_local) 、 [throw](https://en.cppreference.com/w/cpp/keyword/throw) 、 [true](https://en.cppreference.com/w/cpp/keyword/true) 、 [try](https://en.cppreference.com/w/cpp/keyword/try) 、 [typedef](https://en.cppreference.com/w/cpp/keyword/typedef) 、 [typeid](https://en.cppreference.com/w/cpp/keyword/typeid) 、 [typename](https://en.cppreference.com/w/cpp/keyword/typename) 、 [union](https://en.cppreference.com/w/cpp/keyword/union) 、 [unsigned](https://en.cppreference.com/w/cpp/keyword/unsigned) 、 [using](https://en.cppreference.com/w/cpp/keyword/using) 、 [virtual](https://en.cppreference.com/w/cpp/keyword/virtual) 、 [void](https://en.cppreference.com/w/cpp/keyword/void) 、 [volatile](https://en.cppreference.com/w/cpp/keyword/volatile) 、 [wchar_t](https://en.cppreference.com/w/cpp/keyword/wchar_t) 、 [while](https://en.cppreference.com/w/cpp/keyword/while) 、 [xor](https://en.cppreference.com/w/cpp/keyword/xor) 、 [xor_eq](https://en.cppreference.com/w/cpp/keyword/xor_eq) 、 [final](https://en.cppreference.com/w/cpp/language/final) 、 [override](https://en.cppreference.com/w/cpp/language/override) 、 [transaction_safe](https://en.cppreference.com/w/cpp/language/transactional_memory) 、 [transaction_safe_dynamic](https://en.cppreference.com/w/cpp/language/transactional_memory)

