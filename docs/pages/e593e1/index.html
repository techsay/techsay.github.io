<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>intel-32基础语法(下) | 知识导图</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/images/hlogo.png">
    <meta name="description" content="复杂的知识体系需要一套精简的知识导图作参考和索引">
    
    <link rel="preload" href="/assets/css/0.styles.3623805a.css" as="style"><link rel="preload" href="/assets/js/app.956f6e98.js" as="script"><link rel="preload" href="/assets/js/2.d54d51d6.js" as="script"><link rel="preload" href="/assets/js/93.1d548ae4.js" as="script"><link rel="prefetch" href="/assets/js/10.7d5d06ea.js"><link rel="prefetch" href="/assets/js/100.c52b0ea4.js"><link rel="prefetch" href="/assets/js/101.97dc2f7b.js"><link rel="prefetch" href="/assets/js/102.b5b9abc6.js"><link rel="prefetch" href="/assets/js/103.de0678e3.js"><link rel="prefetch" href="/assets/js/104.162a790f.js"><link rel="prefetch" href="/assets/js/105.4b96688c.js"><link rel="prefetch" href="/assets/js/11.73300a98.js"><link rel="prefetch" href="/assets/js/12.1574de4b.js"><link rel="prefetch" href="/assets/js/13.9e1cff29.js"><link rel="prefetch" href="/assets/js/14.9dd4e9b0.js"><link rel="prefetch" href="/assets/js/15.fb4a4e30.js"><link rel="prefetch" href="/assets/js/16.a9978a2f.js"><link rel="prefetch" href="/assets/js/17.d161c4a3.js"><link rel="prefetch" href="/assets/js/18.0a3f80f9.js"><link rel="prefetch" href="/assets/js/19.27c43cea.js"><link rel="prefetch" href="/assets/js/20.76b66c8b.js"><link rel="prefetch" href="/assets/js/21.3d69b68c.js"><link rel="prefetch" href="/assets/js/22.b8fc92f0.js"><link rel="prefetch" href="/assets/js/23.dbf3b98b.js"><link rel="prefetch" href="/assets/js/24.cb857455.js"><link rel="prefetch" href="/assets/js/25.6b10ac06.js"><link rel="prefetch" href="/assets/js/26.cbceffcf.js"><link rel="prefetch" href="/assets/js/27.bddb79bc.js"><link rel="prefetch" href="/assets/js/28.9b9d939d.js"><link rel="prefetch" href="/assets/js/29.127f1213.js"><link rel="prefetch" href="/assets/js/3.e19cb12c.js"><link rel="prefetch" href="/assets/js/30.60bccf99.js"><link rel="prefetch" href="/assets/js/31.34b286a8.js"><link rel="prefetch" href="/assets/js/32.991b2f63.js"><link rel="prefetch" href="/assets/js/33.e6f327b7.js"><link rel="prefetch" href="/assets/js/34.b69bbc21.js"><link rel="prefetch" href="/assets/js/35.bab297ed.js"><link rel="prefetch" href="/assets/js/36.8a119b34.js"><link rel="prefetch" href="/assets/js/37.d029e9f3.js"><link rel="prefetch" href="/assets/js/38.46eb20a4.js"><link rel="prefetch" href="/assets/js/39.d793e68f.js"><link rel="prefetch" href="/assets/js/4.dd3209f8.js"><link rel="prefetch" href="/assets/js/40.b7b51498.js"><link rel="prefetch" href="/assets/js/41.151e380a.js"><link rel="prefetch" href="/assets/js/42.b07e21d1.js"><link rel="prefetch" href="/assets/js/43.3e777f06.js"><link rel="prefetch" href="/assets/js/44.11fa5c7b.js"><link rel="prefetch" href="/assets/js/45.7052c909.js"><link rel="prefetch" href="/assets/js/46.40032702.js"><link rel="prefetch" href="/assets/js/47.5b51cc93.js"><link rel="prefetch" href="/assets/js/48.39927459.js"><link rel="prefetch" href="/assets/js/49.3448b4a9.js"><link rel="prefetch" href="/assets/js/5.54c64e18.js"><link rel="prefetch" href="/assets/js/50.b030173a.js"><link rel="prefetch" href="/assets/js/51.1bbf6ad8.js"><link rel="prefetch" href="/assets/js/52.8558681f.js"><link rel="prefetch" href="/assets/js/53.288a22ed.js"><link rel="prefetch" href="/assets/js/54.ce3b3e40.js"><link rel="prefetch" href="/assets/js/55.1317e68e.js"><link rel="prefetch" href="/assets/js/56.24e8e377.js"><link rel="prefetch" href="/assets/js/57.ab29406a.js"><link rel="prefetch" href="/assets/js/58.a2e3804d.js"><link rel="prefetch" href="/assets/js/59.6a3257e7.js"><link rel="prefetch" href="/assets/js/6.a78acc98.js"><link rel="prefetch" href="/assets/js/60.80e92dda.js"><link rel="prefetch" href="/assets/js/61.7cdefce5.js"><link rel="prefetch" href="/assets/js/62.080e9027.js"><link rel="prefetch" href="/assets/js/63.12fb6ff0.js"><link rel="prefetch" href="/assets/js/64.f472bfdc.js"><link rel="prefetch" href="/assets/js/65.0f2d77db.js"><link rel="prefetch" href="/assets/js/66.cf918f88.js"><link rel="prefetch" href="/assets/js/67.e2a894dc.js"><link rel="prefetch" href="/assets/js/68.d02214b4.js"><link rel="prefetch" href="/assets/js/69.da9c776f.js"><link rel="prefetch" href="/assets/js/7.26888c57.js"><link rel="prefetch" href="/assets/js/70.3accafd4.js"><link rel="prefetch" href="/assets/js/71.cf06ab59.js"><link rel="prefetch" href="/assets/js/72.07426e29.js"><link rel="prefetch" href="/assets/js/73.2ca0934c.js"><link rel="prefetch" href="/assets/js/74.6ccd29d1.js"><link rel="prefetch" href="/assets/js/75.8180abcb.js"><link rel="prefetch" href="/assets/js/76.6b08ec10.js"><link rel="prefetch" href="/assets/js/77.d4b5ae3e.js"><link rel="prefetch" href="/assets/js/78.b26c414a.js"><link rel="prefetch" href="/assets/js/79.2734e666.js"><link rel="prefetch" href="/assets/js/8.9ae79d10.js"><link rel="prefetch" href="/assets/js/80.5cf7acc5.js"><link rel="prefetch" href="/assets/js/81.74f2c69e.js"><link rel="prefetch" href="/assets/js/82.9fb21468.js"><link rel="prefetch" href="/assets/js/83.464889d9.js"><link rel="prefetch" href="/assets/js/84.26038405.js"><link rel="prefetch" href="/assets/js/85.92d110c1.js"><link rel="prefetch" href="/assets/js/86.f8b3b40c.js"><link rel="prefetch" href="/assets/js/87.68c7849a.js"><link rel="prefetch" href="/assets/js/88.be47d7d8.js"><link rel="prefetch" href="/assets/js/89.33c7ca04.js"><link rel="prefetch" href="/assets/js/9.c437635c.js"><link rel="prefetch" href="/assets/js/90.43c46931.js"><link rel="prefetch" href="/assets/js/91.27dbd9c9.js"><link rel="prefetch" href="/assets/js/92.8830c207.js"><link rel="prefetch" href="/assets/js/94.ceac6b41.js"><link rel="prefetch" href="/assets/js/95.4f604719.js"><link rel="prefetch" href="/assets/js/96.090aa727.js"><link rel="prefetch" href="/assets/js/97.962db54a.js"><link rel="prefetch" href="/assets/js/98.6a0b73a3.js"><link rel="prefetch" href="/assets/js/99.9b257d4a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3623805a.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/logo2.png" alt="知识导图" class="logo"> <span class="site-name can-hide">知识导图</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/2f79a9/" class="nav-link">iOS知识</a></div><div class="nav-item"><a href="/pages/603316/" class="nav-link">计算机软件</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友情链接" class="dropdown-title"><!----> <span class="title" style="display:;">友情链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.52im.net/index.php" target="_blank" rel="noopener noreferrer" class="nav-link external">
  即时通讯网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://zhuanlan.zhihu.com/p/409277420" target="_blank" rel="noopener noreferrer" class="nav-link external">
  开发常用网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/2f79a9/" class="nav-link">iOS知识</a></div><div class="nav-item"><a href="/pages/603316/" class="nav-link">计算机软件</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友情链接" class="dropdown-title"><!----> <span class="title" style="display:;">友情链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.52im.net/index.php" target="_blank" rel="noopener noreferrer" class="nav-link external">
  即时通讯网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://zhuanlan.zhihu.com/p/409277420" target="_blank" rel="noopener noreferrer" class="nav-link external">
  开发常用网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MD</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>C语法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>C++语法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>汇编语言</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/3f6221/" class="sidebar-link">Day1-前言</a></li><li><a href="/pages/3420aa/" class="sidebar-link">Day2-语言发展</a></li><li><a href="/pages/712a44/" class="sidebar-link">intel-32基础语法(上)</a></li><li><a href="/pages/e62c69/" class="sidebar-link">intel-32基础语法(中)</a></li><li><a href="/pages/e593e1/" aria-current="page" class="active sidebar-link">intel-32基础语法(下)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/e593e1/#ascii数值" class="sidebar-link">ASCII数值</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#ascii数值操作" class="sidebar-link">ASCII数值操作</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#_1、ascii-可打印字符对照表" class="sidebar-link">1、ASCII 可打印字符对照表</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#_2、ascii-非打印控制字符" class="sidebar-link">2、ASCII 非打印控制字符</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#_3、扩展-ascii-可打印字符" class="sidebar-link">3、扩展 ASCII 可打印字符</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#数值数据" class="sidebar-link">数值数据</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#ascii表示" class="sidebar-link">ASCII表示</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#压缩" class="sidebar-link">压缩</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/e593e1/#标志位" class="sidebar-link">标志位</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#状态字-psw" class="sidebar-link">状态字(PSW)</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#标志寄存器-flag" class="sidebar-link">标志寄存器(flag)</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#of标志" class="sidebar-link">OF标志</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#df标志" class="sidebar-link">DF标志</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#if标志" class="sidebar-link">IF标志</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#tf标志" class="sidebar-link">TF标志</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#sf标志" class="sidebar-link">SF标志</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#zf标志" class="sidebar-link">ZF标志</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#af标志" class="sidebar-link">AF标志</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#pf标志" class="sidebar-link">PF标志</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#cf标志" class="sidebar-link">CF标志</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#_1-1-abc指令" class="sidebar-link">1.1 abc指令</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#_1-2-sbb指令" class="sidebar-link">1.2 sbb指令</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#_1-3-cmp指令" class="sidebar-link">1.3 cmp指令</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#_1-4-条件转移指令" class="sidebar-link">1.4 条件转移指令</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#_1-5-串传送指令" class="sidebar-link">1.5 串传送指令</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#_1-6-pushf和popf指令" class="sidebar-link">1.6 pushf和popf指令</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#_1-7-debug" class="sidebar-link">1.7 Debug</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/e593e1/#字符串" class="sidebar-link">字符串</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#字符串-2" class="sidebar-link">字符串</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#字符串指令" class="sidebar-link">字符串指令</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#标志位重置指令" class="sidebar-link">标志位重置指令</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#rep重复执行指令" class="sidebar-link">REP重复执行指令</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#movs指令" class="sidebar-link">MOVS指令</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#lods指令" class="sidebar-link">LODS指令</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#stos指令" class="sidebar-link">STOS指令</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#rep、repe-重复指令" class="sidebar-link">REP、REPE 重复指令</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#cmps指令" class="sidebar-link">CMPS指令</a></li><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#scas指令" class="sidebar-link">SCAS指令</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/e593e1/#数组" class="sidebar-link">数组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#数组-2" class="sidebar-link">数组</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/e593e1/#堆栈" class="sidebar-link">堆栈</a></li><li class="sidebar-sub-header level2"><a href="/pages/e593e1/#递归" class="sidebar-link">递归</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/e593e1/#递归-2" class="sidebar-link">递归</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>软件编程及算法</span></li><li data-v-06225672><span data-v-06225672>汇编语言</span></li></ul> <div class="info" data-v-06225672><!----> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-08-16</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">intel-32基础语法(下)<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="ascii数值"><a href="#ascii数值" class="header-anchor">#</a> ASCII数值</h2> <p>当数字显示在屏幕上或从键盘输入时，它们是ASCII形式存储的，也就是 输入‘1’ 实际是 49</p> <p>比如：</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>mov  <span class="token register variable">eax</span>,<span class="token string">'0'</span>
</code></pre></div><p>此时，eax 真实数据并非十进制数据0，而是 0的 ASCII 值 48 或者 30 .</p> <p>所以计算的时候，ASCII 十进制 的话 要先 - 48 得到真实的0</p> <p>下面观察一组0-9数据表：</p> <table><thead><tr><th>Bin(二进制)</th> <th>Oct(八进制)</th> <th>Dec(ASCII 十进制)</th> <th>Hex(ASCII 十六进制)</th> <th>Dec(十进制数值)</th> <th>解释</th></tr></thead> <tbody><tr><td>0011 0000</td> <td>060</td> <td>48</td> <td>0x30</td> <td>0</td> <td>字符0</td></tr> <tr><td>0011 0001</td> <td>061</td> <td>49</td> <td>0x31</td> <td>1</td> <td>字符1</td></tr> <tr><td>0011 0010</td> <td>062</td> <td>50</td> <td>0x32</td> <td>2</td> <td>字符2</td></tr> <tr><td>0011 0011</td> <td>063</td> <td>51</td> <td>0x33</td> <td>3</td> <td>字符3</td></tr> <tr><td>0011 0100</td> <td>064</td> <td>52</td> <td>0x34</td> <td>4</td> <td>字符4</td></tr> <tr><td>0011 0101</td> <td>065</td> <td>53</td> <td>0x35</td> <td>5</td> <td>字符5</td></tr> <tr><td>0011 0110</td> <td>066</td> <td>54</td> <td>0x36</td> <td>6</td> <td>字符6</td></tr> <tr><td>0011 0111</td> <td>067</td> <td>55</td> <td>0x37</td> <td>7</td> <td>字符7</td></tr> <tr><td>0011 1000</td> <td>070</td> <td>56</td> <td>0x38</td> <td>8</td> <td>字符8</td></tr> <tr><td>0011 1001</td> <td>071</td> <td>57</td> <td>0x39</td> <td>9</td> <td>字符9</td></tr></tbody></table> <h3 id="ascii数值操作"><a href="#ascii数值操作" class="header-anchor">#</a> ASCII数值操作</h3> <p>假设输入的数值16进制结果 以ASCII 十进制 数理解如下操作：</p> <p>1、最终输出eax结果：d</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>mov  <span class="token register variable">eax</span>,<span class="token string">'2'</span>	<span class="token comment">;eax = 50</span>
mov  <span class="token register variable">ebx</span>,<span class="token string">'2'</span>	<span class="token comment">;ebx = 50</span>
add  <span class="token register variable">eax</span>, <span class="token register variable">ebx</span>	<span class="token comment">;eax = 50 + 50 = 100 </span>

<span class="token comment">;此时打印eax的值不是4，打印的是 ASCII 100 对应的值d</span>
</code></pre></div><p>2、最终输出eax结果：菱形符号控制符号，不能正常输出</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>mov  <span class="token register variable">eax</span>,<span class="token number">2</span>	<span class="token comment">;eax = 2</span>
mov  <span class="token register variable">ebx</span>,<span class="token number">2</span>	<span class="token comment">;ebx = 2</span>
add  <span class="token register variable">eax</span>, <span class="token register variable">ebx</span>	<span class="token comment">;eax = 2 + 2 = 4 </span>

<span class="token comment">;此时打印eax的值不是4，打印的是 ASCII 4 对应的值菱形符号控制符号</span>
</code></pre></div><p>3、最终输出eax结果：4</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>mov  <span class="token register variable">eax</span>,<span class="token string">'2'</span>	<span class="token comment">;eax = 50</span>
mov  <span class="token register variable">ebx</span>,<span class="token number">2</span>	<span class="token comment">;ebx = 2</span>
add  <span class="token register variable">eax</span>, <span class="token register variable">ebx</span>	<span class="token comment">;eax = 50 + 2 = 52 </span>

<span class="token comment">;此时打印eax的值是 ASCII 52 对应的值4</span>
</code></pre></div><p>4、最终输出eax结果：4</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>mov  <span class="token register variable">eax</span>,<span class="token string">'2'</span>	<span class="token comment">;eax = 50</span>
sub  <span class="token register variable">eax</span>,<span class="token string">'0'</span>	<span class="token comment">;eax = 50 - 48 = 2</span>

mov  <span class="token register variable">ebx</span>,<span class="token string">'2'</span>	<span class="token comment">;ebx = 50</span>
sub  <span class="token register variable">ebx</span>,<span class="token string">'0'</span>	<span class="token comment">;ebx = 50 - 48 = 2</span>

add  <span class="token register variable">eax</span>, <span class="token register variable">ebx</span>	<span class="token comment">;eax = 2 + 2 = 4</span>
add  <span class="token register variable">eax</span>, <span class="token string">'0'</span> <span class="token comment">;eax = 48 + 4 = 52 </span>

<span class="token comment">;此时打印eax的值是 ASCII 52 对应的值4</span>
</code></pre></div><p>下面从网络上收集了ASCII  0 -159 对应的数据</p> <p><strong>ASCII码</strong>大致由三部分组成：</p> <h3 id="_1、ascii-可打印字符对照表"><a href="#_1、ascii-可打印字符对照表" class="header-anchor">#</a> 1、ASCII 可打印字符对照表</h3> <p>数字 32–126 分配给了能在键盘上找到的字符，当您查看或打印文档时就会出现。注：十进制32代表空格 ，十进制数字 127 代表 DELETE 命令。下面是<strong>ASCII码和相应数字</strong>的对照表</p> <table><thead><tr><th>ASCII 码</th> <th>字符</th> <th></th> <th></th> <th>ASCII 码</th> <th>字符</th> <th></th> <th></th> <th>ASCII 码</th> <th>字符</th> <th></th> <th></th> <th>ASCII 码</th> <th>字符</th> <th></th></tr></thead> <tbody><tr><td>十进位</td> <td>十六进位</td> <td></td> <td></td> <td>十进位</td> <td>十六进位</td> <td></td> <td></td> <td>十进位</td> <td>十六进位</td> <td></td> <td></td> <td>十进位</td> <td>十六进位</td> <td></td></tr> <tr><td>032</td> <td>20</td> <td></td> <td></td> <td>056</td> <td>38</td> <td>8</td> <td></td> <td>080</td> <td>50</td> <td>P</td> <td></td> <td>104</td> <td>68</td> <td>h</td></tr> <tr><td>033</td> <td>21</td> <td>!</td> <td></td> <td>057</td> <td>39</td> <td>9</td> <td></td> <td>081</td> <td>51</td> <td>Q</td> <td></td> <td>105</td> <td>69</td> <td>i</td></tr> <tr><td>034</td> <td>22</td> <td>&quot;</td> <td></td> <td>058</td> <td>3A</td> <td>:</td> <td></td> <td>082</td> <td>52</td> <td>R</td> <td></td> <td>106</td> <td>6A</td> <td>j</td></tr> <tr><td>035</td> <td>23</td> <td>#</td> <td></td> <td>059</td> <td>3B</td> <td>;</td> <td></td> <td>083</td> <td>53</td> <td>S</td> <td></td> <td>107</td> <td>6B</td> <td>k</td></tr> <tr><td>036</td> <td>24</td> <td>$</td> <td></td> <td>060</td> <td>3C</td> <td>&lt;</td> <td></td> <td>084</td> <td>54</td> <td>T</td> <td></td> <td>108</td> <td>6C</td> <td>l</td></tr> <tr><td>037</td> <td>25</td> <td>%</td> <td></td> <td>061</td> <td>3D</td> <td>=</td> <td></td> <td>085</td> <td>55</td> <td>U</td> <td></td> <td>109</td> <td>6D</td> <td>m</td></tr> <tr><td>038</td> <td>26</td> <td>&amp;</td> <td></td> <td>062</td> <td>3E</td> <td>&gt;</td> <td></td> <td>086</td> <td>56</td> <td>V</td> <td></td> <td>110</td> <td>6E</td> <td>n</td></tr> <tr><td>039</td> <td>27</td> <td>'</td> <td></td> <td>063</td> <td>3F</td> <td>?</td> <td></td> <td>087</td> <td>57</td> <td>W</td> <td></td> <td>111</td> <td>6F</td> <td>o</td></tr> <tr><td>040</td> <td>28</td> <td>(</td> <td></td> <td>064</td> <td>40</td> <td>@</td> <td></td> <td>088</td> <td>58</td> <td>X</td> <td></td> <td>112</td> <td>70</td> <td>p</td></tr> <tr><td>041</td> <td>29</td> <td>)</td> <td></td> <td>065</td> <td>41</td> <td>A</td> <td></td> <td>089</td> <td>59</td> <td>Y</td> <td></td> <td>113</td> <td>71</td> <td>q</td></tr> <tr><td>042</td> <td>2A</td> <td>*</td> <td></td> <td>066</td> <td>42</td> <td>B</td> <td></td> <td>090</td> <td>5A</td> <td>Z</td> <td></td> <td>114</td> <td>72</td> <td>r</td></tr> <tr><td>043</td> <td>2B</td> <td>+</td> <td></td> <td>067</td> <td>43</td> <td>C</td> <td></td> <td>091</td> <td>5B</td> <td>[</td> <td></td> <td>115</td> <td>73</td> <td>s</td></tr> <tr><td>044</td> <td>2C</td> <td>,</td> <td></td> <td>068</td> <td>44</td> <td>D</td> <td></td> <td>092</td> <td>5C</td> <td>\</td> <td></td> <td>116</td> <td>74</td> <td>t</td></tr> <tr><td>045</td> <td>2D</td> <td>-</td> <td></td> <td>069</td> <td>45</td> <td>E</td> <td></td> <td>093</td> <td>5D</td> <td>]</td> <td></td> <td>117</td> <td>75</td> <td>u</td></tr> <tr><td>046</td> <td>2E</td> <td>.</td> <td></td> <td>070</td> <td>46</td> <td>F</td> <td></td> <td>094</td> <td>5E</td> <td>^</td> <td></td> <td>118</td> <td>76</td> <td>v</td></tr> <tr><td>047</td> <td>2F</td> <td>/</td> <td></td> <td>071</td> <td>47</td> <td>G</td> <td></td> <td>095</td> <td>5F</td> <td>_</td> <td></td> <td>119</td> <td>77</td> <td>w</td></tr> <tr><td>048</td> <td>30</td> <td>0</td> <td></td> <td>072</td> <td>48</td> <td>H</td> <td></td> <td>096</td> <td>60</td> <td>`</td> <td></td> <td>120</td> <td>78</td> <td>x</td></tr> <tr><td>049</td> <td>31</td> <td>1</td> <td></td> <td>073</td> <td>49</td> <td>I</td> <td></td> <td>097</td> <td>61</td> <td>a</td> <td></td> <td>121</td> <td>79</td> <td>y</td></tr> <tr><td>050</td> <td>32</td> <td>2</td> <td></td> <td>074</td> <td>4A</td> <td>J</td> <td></td> <td>098</td> <td>62</td> <td>b</td> <td></td> <td>122</td> <td>7A</td> <td>z</td></tr> <tr><td>051</td> <td>33</td> <td>3</td> <td></td> <td>075</td> <td>4B</td> <td>K</td> <td></td> <td>099</td> <td>63</td> <td>c</td> <td></td> <td>123</td> <td>7B</td> <td>{</td></tr> <tr><td>052</td> <td>34</td> <td>4</td> <td></td> <td>076</td> <td>4C</td> <td>L</td> <td></td> <td>100</td> <td>64</td> <td>d</td> <td></td> <td>124</td> <td>7C</td> <td>|</td></tr> <tr><td>053</td> <td>35</td> <td>5</td> <td></td> <td>077</td> <td>4D</td> <td>M</td> <td></td> <td>101</td> <td>65</td> <td>e</td> <td></td> <td>125</td> <td>7D</td> <td>}</td></tr> <tr><td>054</td> <td>36</td> <td>6</td> <td></td> <td>078</td> <td>4E</td> <td>N</td> <td></td> <td>102</td> <td>66</td> <td>f</td> <td></td> <td>126</td> <td>7E</td> <td>~</td></tr> <tr><td>055</td> <td>37</td> <td>7</td> <td></td> <td>079</td> <td>4F</td> <td>O</td> <td></td> <td>103</td> <td>67</td> <td>g</td> <td></td> <td>127</td> <td>7F</td> <td>DEL</td></tr></tbody></table> <h3 id="_2、ascii-非打印控制字符"><a href="#_2、ascii-非打印控制字符" class="header-anchor">#</a> 2、ASCII 非打印控制字符</h3> <p>ASCII 表上的数字 0–31 分配给了控制字符，用于控制像打印机等一些外围设备。例如，12 代表换页/新页功能。此命令指示打印机跳到下一页的开头。</p> <table><thead><tr><th>进制</th> <th>十六进制</th> <th>字符</th> <th></th> <th>十进制</th> <th>十六进制</th> <th>字符</th></tr></thead> <tbody><tr><td>0</td> <td>00</td> <td>空</td> <td></td> <td>16</td> <td>10</td> <td>数据链路转意</td></tr> <tr><td>1</td> <td>01</td> <td>头标开始</td> <td></td> <td>17</td> <td>11</td> <td>设备控制 1</td></tr> <tr><td>2</td> <td>02</td> <td>正文开始</td> <td></td> <td>18</td> <td>12</td> <td>设备控制 2</td></tr> <tr><td>3</td> <td>03</td> <td>正文结束</td> <td></td> <td>19</td> <td>13</td> <td>设备控制 3</td></tr> <tr><td>4</td> <td>04</td> <td>传输结束</td> <td></td> <td>20</td> <td>14</td> <td>设备控制 4</td></tr> <tr><td>5</td> <td>05</td> <td>查询</td> <td></td> <td>21</td> <td>15</td> <td>反确认</td></tr> <tr><td>6</td> <td>06</td> <td>确认</td> <td></td> <td>22</td> <td>16</td> <td>同步空闲</td></tr> <tr><td>7</td> <td>07</td> <td>震铃</td> <td></td> <td>23</td> <td>17</td> <td>传输块结束</td></tr> <tr><td>8</td> <td>08</td> <td>backspace</td> <td></td> <td>24</td> <td>18</td> <td>取消</td></tr> <tr><td>9</td> <td>09</td> <td>水平制表符</td> <td></td> <td>25</td> <td>19</td> <td>媒体结束</td></tr> <tr><td>10</td> <td>0A</td> <td>换行/新行</td> <td></td> <td>26</td> <td>1A</td> <td>替换</td></tr> <tr><td>11</td> <td>0B</td> <td>竖直制表符</td> <td></td> <td>27</td> <td>1B</td> <td>转意</td></tr> <tr><td>12</td> <td>0C</td> <td>换页/新页</td> <td></td> <td>28</td> <td>1C</td> <td>文件分隔符</td></tr> <tr><td>13</td> <td>0D</td> <td>回车</td> <td></td> <td>29</td> <td>1D</td> <td>组分隔符</td></tr> <tr><td>14</td> <td>0E</td> <td>移出</td> <td></td> <td>30</td> <td>1E</td> <td>记录分隔符</td></tr> <tr><td>15</td> <td>0F</td> <td>移入</td> <td></td> <td>31</td> <td>1F</td> <td>单元分隔符</td></tr></tbody></table> <h3 id="_3、扩展-ascii-可打印字符"><a href="#_3、扩展-ascii-可打印字符" class="header-anchor">#</a> 3、扩展 ASCII 可打印字符</h3> <table><thead><tr><th>十进制</th> <th>十六进制</th> <th>字符</th> <th></th> <th>十进制</th> <th>十六进制</th> <th>字符</th> <th></th></tr></thead> <tbody><tr><td>32</td> <td>20</td> <td>space</td> <td></td> <td>80</td> <td>50</td> <td>P</td> <td></td></tr> <tr><td>33</td> <td>21</td> <td>!</td> <td></td> <td>81</td> <td>51</td> <td>Q</td> <td></td></tr> <tr><td>34</td> <td>22</td> <td>&quot;</td> <td></td> <td>82</td> <td>52</td> <td>R</td> <td></td></tr> <tr><td>35</td> <td>23</td> <td>#</td> <td></td> <td>83</td> <td>53</td> <td>S</td> <td></td></tr> <tr><td>36</td> <td>24</td> <td>$</td> <td></td> <td>84</td> <td>54</td> <td>T</td> <td></td></tr> <tr><td>37</td> <td>25</td> <td>%</td> <td></td> <td>85</td> <td>55</td> <td>U</td> <td></td></tr> <tr><td>38</td> <td>26</td> <td>&amp;</td> <td></td> <td>86</td> <td>56</td> <td>V</td> <td></td></tr> <tr><td>39</td> <td>27</td> <td>'</td> <td></td> <td>87</td> <td>57</td> <td>w</td> <td></td></tr> <tr><td>40</td> <td>28</td> <td>(</td> <td></td> <td>88</td> <td>58</td> <td>X</td> <td></td></tr> <tr><td>41</td> <td>29</td> <td>)</td> <td></td> <td>89</td> <td>59</td> <td>Y</td> <td></td></tr> <tr><td>42</td> <td>2A</td> <td>*</td> <td></td> <td>90</td> <td>5A</td> <td>Z</td> <td></td></tr> <tr><td>43</td> <td>2B</td> <td>+</td> <td></td> <td>91</td> <td>5B</td> <td>[</td> <td></td></tr> <tr><td>44</td> <td>2C</td> <td>,</td> <td></td> <td>92</td> <td>5C</td> <td>/</td> <td></td></tr> <tr><td>45</td> <td>2D</td> <td>-</td> <td></td> <td>93</td> <td>5D</td> <td>]</td> <td></td></tr> <tr><td>46</td> <td>2E</td> <td>.</td> <td></td> <td>94</td> <td>5E</td> <td>^</td> <td></td></tr> <tr><td>47</td> <td>2F</td> <td>/</td> <td></td> <td>95</td> <td>5F</td> <td>_</td> <td></td></tr> <tr><td>48</td> <td>30</td> <td>0</td> <td></td> <td>96</td> <td>60</td> <td>`</td> <td></td></tr> <tr><td>49</td> <td>31</td> <td>1</td> <td></td> <td>97</td> <td>61</td> <td>a</td> <td></td></tr> <tr><td>50</td> <td>32</td> <td>2</td> <td></td> <td>98</td> <td>62</td> <td>b</td> <td></td></tr> <tr><td>51</td> <td>33</td> <td>3</td> <td></td> <td>99</td> <td>63</td> <td>c</td> <td></td></tr> <tr><td>52</td> <td>34</td> <td>4</td> <td></td> <td>100</td> <td>64</td> <td>d</td> <td></td></tr> <tr><td>53</td> <td>35</td> <td>5</td> <td></td> <td>101</td> <td>65</td> <td>e</td> <td></td></tr> <tr><td>54</td> <td>36</td> <td>6</td> <td></td> <td>102</td> <td>66</td> <td>f</td> <td></td></tr> <tr><td>55</td> <td>37</td> <td>7</td> <td></td> <td>103</td> <td>67</td> <td>g</td> <td></td></tr> <tr><td>56</td> <td>38</td> <td>8</td> <td></td> <td>104</td> <td>68</td> <td>h</td> <td></td></tr> <tr><td>57</td> <td>39</td> <td>9</td> <td></td> <td>105</td> <td>69</td> <td>i</td> <td></td></tr> <tr><td>58</td> <td>3A</td> <td>:</td> <td></td> <td>106</td> <td>6A</td> <td>j</td> <td></td></tr> <tr><td>59</td> <td>3B</td> <td>;</td> <td></td> <td>107</td> <td>6B</td> <td>k</td> <td></td></tr> <tr><td>60</td> <td>3C</td> <td>&lt;</td> <td></td> <td>108</td> <td>6C</td> <td>l</td> <td></td></tr> <tr><td>61</td> <td>3D</td> <td>=</td> <td></td> <td>109</td> <td>6D</td> <td>m</td> <td></td></tr> <tr><td>62</td> <td>3E</td> <td>&gt;</td> <td></td> <td>110</td> <td>6E</td> <td>n</td> <td></td></tr> <tr><td>63</td> <td>3F</td> <td>?</td> <td></td> <td>111</td> <td>6F</td> <td>o</td> <td></td></tr> <tr><td>64</td> <td>40</td> <td>@</td> <td></td> <td>112</td> <td>70</td> <td>p</td> <td></td></tr> <tr><td>65</td> <td>41</td> <td>A</td> <td></td> <td>113</td> <td>71</td> <td>q</td> <td></td></tr> <tr><td>66</td> <td>42</td> <td>B</td> <td></td> <td>114</td> <td>72</td> <td>r</td> <td></td></tr> <tr><td>67</td> <td>43</td> <td>C</td> <td></td> <td>115</td> <td>73</td> <td>s</td> <td></td></tr> <tr><td>68</td> <td>44</td> <td>D</td> <td></td> <td>116</td> <td>74</td> <td>t</td> <td></td></tr> <tr><td>69</td> <td>45</td> <td>E</td> <td></td> <td>117</td> <td>75</td> <td>u</td> <td></td></tr> <tr><td>70</td> <td>46</td> <td>F</td> <td></td> <td>118</td> <td>76</td> <td>v</td> <td></td></tr> <tr><td>71</td> <td>47</td> <td>G</td> <td></td> <td>119</td> <td>77</td> <td>w</td> <td></td></tr> <tr><td>72</td> <td>48</td> <td>H</td> <td></td> <td>120</td> <td>78</td> <td>x</td> <td></td></tr> <tr><td>73</td> <td>49</td> <td>I</td> <td></td> <td>121</td> <td>79</td> <td>y</td> <td></td></tr> <tr><td>74</td> <td>4A</td> <td>J</td> <td></td> <td>122</td> <td>7A</td> <td>z</td> <td></td></tr> <tr><td>75</td> <td>4B</td> <td>K</td> <td></td> <td>123</td> <td>7B</td> <td>{</td> <td></td></tr> <tr><td>76</td> <td>4C</td> <td>L</td> <td></td> <td>124</td> <td>7C</td> <td></td> <td></td></tr> <tr><td>77</td> <td>4D</td> <td>M</td> <td></td> <td>125</td> <td>7D</td> <td>}</td> <td></td></tr> <tr><td>78</td> <td>4E</td> <td>N</td> <td></td> <td>126</td> <td>7E</td> <td>~</td> <td></td></tr> <tr><td>79</td> <td>4F</td> <td>O</td> <td></td> <td>127</td> <td>7F</td> <td>DEL</td> <td></td></tr></tbody></table> <h3 id="数值数据"><a href="#数值数据" class="header-anchor">#</a> 数值数据</h3> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token keyword">section .text</span>
   <span class="token keyword">global _start        </span><span class="token comment">;must be declared for using gcc</span>
        
<span class="token label function">_start:</span>                 <span class="token comment">;tell linker entry point</span>
   mov  <span class="token register variable">eax</span>,<span class="token string">'5'</span>
   sub     <span class="token register variable">eax</span>, <span class="token string">'0'</span>
        
   mov  <span class="token register variable">ebx</span>, <span class="token string">'6'</span>
   sub     <span class="token register variable">ebx</span>, <span class="token string">'0'</span>
   add  <span class="token register variable">eax</span>, <span class="token register variable">ebx</span>
   add  <span class="token register variable">eax</span>, <span class="token string">'0'</span>
        
   mov  <span class="token operator">[</span>sum<span class="token operator">]</span>, <span class="token register variable">eax</span>
   mov  <span class="token register variable">ecx</span>,msg 
   mov  <span class="token register variable">edx</span>, len
   mov  <span class="token register variable">ebx</span>,<span class="token number">1</span>            <span class="token comment">;file descriptor (stdout)</span>
   mov  <span class="token register variable">eax</span>,<span class="token number">4</span>            <span class="token comment">;system call number (sys_write)</span>
   int  <span class="token number">0x80</span>             <span class="token comment">;call kernel</span>
        
   mov  <span class="token register variable">ecx</span>,sum
   mov  <span class="token register variable">edx</span>, <span class="token number">1</span>
   mov  <span class="token register variable">ebx</span>,<span class="token number">1</span>            <span class="token comment">;file descriptor (stdout)</span>
   mov  <span class="token register variable">eax</span>,<span class="token number">4</span>            <span class="token comment">;system call number (sys_write)</span>
   int  <span class="token number">0x80</span>             <span class="token comment">;call kernel</span>
        
   mov  <span class="token register variable">eax</span>,<span class="token number">1</span>            <span class="token comment">;system call number (sys_exit)</span>
   int  <span class="token number">0x80</span>             <span class="token comment">;call kernel</span>
        
<span class="token keyword">section .data</span>
msg db <span class="token string">&quot;The sum is:&quot;</span>, <span class="token number">0xA</span>,<span class="token number">0xD</span> 
len equ <span class="token operator">$</span> <span class="token operator">-</span> msg   
segment .bss
sum resb <span class="token number">1</span>
</code></pre></div><p>结果：（显然结果不是我们想看到的）</p> <div class="language-t4 extra-class"><pre class="language-t4"><code>The sum is:
；
</code></pre></div><p>TODO：</p> <p>1、每次运算都要对每个寄存器处理有一定消耗</p> <p>2、能计算个位，但是没法进行进位，比如不能正确表示出11</p> <h3 id="ascii表示"><a href="#ascii表示" class="header-anchor">#</a> ASCII表示</h3> <p>在ASCII表示中，十进制数字存储为ASCII字符字符串，运算需要使用正确的汇编指令进行处理</p> <p>输入‘0’，结果其实是</p> <div class="language- extra-class"><pre class="language-text"><code>30H
</code></pre></div><p>输入十进制值0123存储为：</p> <div class="language-t4 extra-class"><pre class="language-t4"><code>30 		31     32      33H
</code></pre></div><p>其中，30H是0的ASCII值，31H是1的ASCII值，依此类推。</p> <p>所以要输出一个11需要这样：</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token keyword">section .text</span>
   <span class="token keyword">global _start        </span>
        
<span class="token label function">_start:</span>   
   mov     <span class="token register variable">ax</span>, <span class="token number">3131H</span>	 <span class="token comment">;设置 ax值 11</span>
   
   mov     <span class="token operator">[</span>res<span class="token operator">]</span>, <span class="token register variable">ax</span>

   mov  <span class="token register variable">edx</span>,<span class="token number">2</span>           <span class="token comment">;长度2</span>
   mov  <span class="token register variable">ecx</span>,res         <span class="token comment">;赋值</span>
   mov  <span class="token register variable">ebx</span>,<span class="token number">1</span>           
   mov  <span class="token register variable">eax</span>,<span class="token number">4</span>           
   int  <span class="token number">0x80</span>            
        
   mov  <span class="token register variable">eax</span>,<span class="token number">1</span>           
   int  <span class="token number">0x80</span>            
                      
<span class="token keyword">section .bss</span>
res resb <span class="token number">2</span>  
</code></pre></div><p>所以在本篇汇编中是不能完全直接使用 add 、sub直接加减的</p> <p><strong>1、处理ASCII运算的指令</strong></p> <table><thead><tr><th>ASCII运算的指令 （未压缩）</th> <th>解释</th></tr></thead> <tbody><tr><td>AAA（⚠️ 都是单指令，后不接操作数）</td> <td>加法后ASCII调整</td></tr> <tr><td>AAS</td> <td>减法后的ASCII调整</td></tr> <tr><td>AAM</td> <td>乘法后ASCII调整</td></tr> <tr><td>AAD</td> <td>除法前ASCII调整</td></tr></tbody></table> <p>2、处理对象</p> <p>这些指令处理的是 ax（eax 等），不需要指定，类似 ‘隐含寻址’</p> <p>3、使用方式</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token comment">;加法运算</span>
add     <span class="token register variable">ax</span>, <span class="token string">'6'</span>
aaa

<span class="token comment">;减法运算</span>
sub     <span class="token register variable">ax</span>, <span class="token string">'6'</span>
aas
</code></pre></div><p>示例：</p> <p>计算 5+6=11</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token keyword">section .text</span>
   <span class="token keyword">global _start        </span>
        
<span class="token label function">_start:</span>                 <span class="token comment">;tell linker entry point</span>
   <span class="token comment">;初始化操作，清空ax中的 高地位数据</span>
   sub     <span class="token register variable">al</span>, <span class="token register variable">ah</span>
   sub     <span class="token register variable">ah</span>, <span class="token register variable">ah</span>
   
   <span class="token comment">;运算</span>
   mov     <span class="token register variable">ax</span>, <span class="token string">'5'</span>			<span class="token comment">;ax = 00 35H</span>
   
   add     <span class="token register variable">ax</span>, <span class="token string">'6'</span>			<span class="token comment">;ax = 00 35H + 00 36H = 00 6BH</span>
   aaa		<span class="token comment">;调整ax中值（不是其它寄存器）</span>
   <span class="token comment">;⚠️ 使用add后接着使用aaa表示格式化，将上面加法后ASCII值进行调整</span>
   <span class="token comment">;调整前 00 6BH ，处理后 ax = 01 01H，高低位各一个1表示 11的值</span>
   
   or      <span class="token register variable">al</span>, <span class="token number">30h</span>			<span class="token comment">;ax = 01 31H</span>
   or      <span class="token register variable">ah</span>, <span class="token number">30h</span>			<span class="token comment">;ax = 31 31H</span>
   
   mov     <span class="token operator">[</span>res<span class="token operator">]</span>, <span class="token register variable">ax</span>		<span class="token comment">;res = 11</span>

   mov  <span class="token register variable">edx</span>,<span class="token number">2</span>           <span class="token comment">;11占两个字节，如果设置1个字节的长度的话返回的是1不是11</span>
   mov  <span class="token register variable">ecx</span>,res         <span class="token comment">;写入结果</span>
   mov  <span class="token register variable">ebx</span>,<span class="token number">1</span>           
   mov  <span class="token register variable">eax</span>,<span class="token number">4</span>           
   int  <span class="token number">0x80</span>            
        
   mov  <span class="token register variable">eax</span>,<span class="token number">1</span>           
   int  <span class="token number">0x80</span>           
                      
<span class="token keyword">section .bss</span>
res resb <span class="token number">2</span>  
</code></pre></div><p>结果：</p> <div class="language-t4 extra-class"><pre class="language-t4"><code>11
</code></pre></div><h3 id="压缩"><a href="#压缩" class="header-anchor">#</a> 压缩</h3> <p>对于一个十进制数1234</p> <p>1、1234 的 ASCII十六进制表示：</p> <div class="language- extra-class"><pre class="language-text"><code>31 32 33 34 H
</code></pre></div><p>对应的未压缩十进制表示：</p> <div class="language- extra-class"><pre class="language-text"><code>01 02 03 04
</code></pre></div><p>2、所以前面上一个示例中 aaa 的结果就是未压缩十进制表示</p> <div class="language- extra-class"><pre class="language-text"><code>01 01
</code></pre></div><p>3、对应压缩后十进制表示：</p> <div class="language- extra-class"><pre class="language-text"><code>12 34
</code></pre></div><p>从上可以看到，压缩后可以减少一半的存储空间。</p> <p><strong>压缩后数据运算指令</strong>：（⚠️ 不支持 ）</p> <table><thead><tr><th>ASCII运算的指令 （压缩）</th> <th>解释</th></tr></thead> <tbody><tr><td>DAA</td> <td>加法后的十进制调整</td></tr> <tr><td>DAS</td> <td>减后的十进制调整</td></tr> <tr><td>乘法</td> <td>不支持</td></tr> <tr><td>除法</td> <td>不支持</td></tr></tbody></table> <p>对比加法运算后 aaa（未压缩） 和 daa （压缩）结果</p> <p>1、aaa</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>mov     <span class="token register variable">ax</span>, <span class="token string">'5'</span>			<span class="token comment">;ax = 00 35H</span>
add     <span class="token register variable">ax</span>, <span class="token string">'6'</span>			<span class="token comment">;ax = 00 6BH</span>
aaa 								<span class="token comment">;ax = 01 01H</span>
</code></pre></div><p>2、daa</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>mov     <span class="token register variable">ax</span>, <span class="token string">'5'</span>			<span class="token comment">;ax = 00 35H</span>
add     <span class="token register variable">ax</span>, <span class="token string">'6'</span>			<span class="token comment">;ax = 00 6BH</span>
daa 								<span class="token comment">;ax = 00 11H</span>
</code></pre></div><p><strong>示例</strong>：</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token keyword">section .text</span>
   <span class="token keyword">global _start        </span><span class="token comment">;must be declared for using gcc</span>

<span class="token label function">_start:</span>                 <span class="token comment">;tell linker entry point</span>

   mov     <span class="token register variable">esi</span>, <span class="token number">4</span>       <span class="token comment">;pointing to the rightmost digit</span>
   mov     <span class="token register variable">ecx</span>, <span class="token number">5</span>       <span class="token comment">;num of digits</span>
   clc				<span class="token comment">; 清除标志位 CF的值，即CF=0</span>
<span class="token label function">add_num:</span>  
   mov  <span class="token register variable">al</span>, <span class="token operator">[</span>num1 <span class="token operator">+</span> <span class="token register variable">esi</span><span class="token operator">]</span>
   adc  <span class="token register variable">al</span>, <span class="token operator">[</span>num2 <span class="token operator">+</span> <span class="token register variable">esi</span><span class="token operator">]</span>
   aaa
   pushf
   or   <span class="token register variable">al</span>, <span class="token number">30h</span>
   popf
        
   mov  <span class="token operator">[</span>sum <span class="token operator">+</span> <span class="token register variable">esi</span><span class="token operator">]</span>, <span class="token register variable">al</span>
   dec  <span class="token register variable">esi</span>
   num  add_num
        
   mov  <span class="token register variable">edx</span>,len         <span class="token comment">;message length</span>
   mov  <span class="token register variable">ecx</span>,msg         <span class="token comment">;message to write</span>
   mov  <span class="token register variable">ebx</span>,<span class="token number">1</span>           <span class="token comment">;file descriptor (stdout)</span>
   mov  <span class="token register variable">eax</span>,<span class="token number">4</span>           <span class="token comment">;system call number (sys_write)</span>
   int  <span class="token number">0x80</span>            <span class="token comment">;call kernel</span>
        
   mov  <span class="token register variable">edx</span>,<span class="token number">5</span>           <span class="token comment">;message length</span>
   mov  <span class="token register variable">ecx</span>,sum         <span class="token comment">;message to write</span>
   mov  <span class="token register variable">ebx</span>,<span class="token number">1</span>           <span class="token comment">;file descriptor (stdout)</span>
   mov  <span class="token register variable">eax</span>,<span class="token number">4</span>           <span class="token comment">;system call number (sys_write)</span>
   int  <span class="token number">0x80</span>            <span class="token comment">;call kernel</span>
        
   mov  <span class="token register variable">eax</span>,<span class="token number">1</span>           <span class="token comment">;system call number (sys_exit)</span>
   int  <span class="token number">0x80</span>            <span class="token comment">;call kernel</span>

<span class="token keyword">section .data</span>
msg db <span class="token string">'The Sum is:'</span>,<span class="token number">0xa</span>        
len equ <span class="token operator">$</span> <span class="token operator">-</span> msg                 
num1 db <span class="token string">'12345'</span>
num2 db <span class="token string">'23456'</span>
sum db <span class="token string">'     '</span>
</code></pre></div><p><a href="https://www.jc2182.com/runcode.html?filename=num3&amp;type=21&amp;module=jiaocheng" target="_blank" rel="noopener noreferrer">尝试一下<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>编译并执行上述代码后，将产生以下结果-</p> <div class="language-t4 extra-class"><pre class="language-t4"><code>The Sum is:
35801
</code></pre></div><hr> <h2 id="标志位"><a href="#标志位" class="header-anchor">#</a> 标志位</h2> <p>前面在介绍逻辑章节的时候使用到了标志位，此节详细介绍每一个标志位（intel 16、32位）。</p> <p>CPU内部的寄存器中有一种特殊的寄存器，被称为标志寄存器，具有以下三种作用，：</p> <blockquote><p>（1）用来存储相关指令的某些执行结果；</p> <p>（2）用来为CPU执行相关指令提供行为依据；</p> <p>（3）用来控制CPU的相关工作方式。</p></blockquote> <h3 id="状态字-psw"><a href="#状态字-psw" class="header-anchor">#</a> <strong>状态字</strong>(PSW)</h3> <p>程序运行中一些记录信息，根据CPU不同，存储状态信息的寄存器也不同，有16位，32位，64位等等</p> <h3 id="标志寄存器-flag"><a href="#标志寄存器-flag" class="header-anchor">#</a> <strong>标志寄存器</strong>(flag)</h3> <p>标志，顾名思义就是记录一些状态当前的信息，方便做判断，</p> <p>flag寄存器是按位起作用的，每一位都有专门的含义，8086 CPU的flag寄存器的结构：</p> <table><thead><tr><th>位（高-低）</th> <th>flag（计算结果标志位）</th> <th>含义（计算后的标记）</th> <th></th></tr></thead> <tbody><tr><td>15</td> <td></td> <td></td> <td></td></tr> <tr><td>14</td> <td></td> <td></td> <td></td></tr> <tr><td>13</td> <td></td> <td></td> <td></td></tr> <tr><td>12</td> <td></td> <td></td> <td></td></tr> <tr><td>11</td> <td>OF（<strong>有符号运算</strong>是否有溢出）</td> <td>if (结果溢出) { of=1} else { of=0 }</td> <td></td></tr> <tr><td>10</td> <td>DF（递增递减方向）</td> <td>si、di递增 df=0，si、di递减df=1</td> <td></td></tr> <tr><td>9</td> <td>IF（中断允许）</td> <td>允许并响应外部中断时if=1，反之屏蔽</td> <td></td></tr> <tr><td>8</td> <td>TF（调试）</td> <td>tf=1表示处理器每次只执行一条指令，调试模式</td> <td></td></tr> <tr><td>7</td> <td>SF（非负）</td> <td>if (结果负数) { sf=1} else { sf=0 }</td> <td></td></tr> <tr><td>6</td> <td>ZF（非0）</td> <td>if (计算结果为0) { zf=1} else { zf=0 }</td> <td></td></tr> <tr><td>5</td> <td></td> <td></td> <td></td></tr> <tr><td>4</td> <td>AF（辅助进位）</td> <td>af=1表示运算过程中<strong>最后四位</strong>有进位</td> <td></td></tr> <tr><td>3</td> <td></td> <td></td> <td></td></tr> <tr><td>2</td> <td>PF（奇偶）</td> <td>if (计算结果为偶数) { pf=1} else { pf=0 }</td> <td></td></tr> <tr><td>1</td> <td></td> <td></td> <td></td></tr> <tr><td>0</td> <td>CF（<strong>无符号运算</strong>是否有借位）</td> <td>结果显示不下产生了借位，cf=1</td> <td></td></tr></tbody></table> <p>其中1、3、5、12、13、14、15位在8086 CPU中没有使用</p> <h3 id="of标志"><a href="#of标志" class="header-anchor">#</a> <strong>OF标志</strong></h3> <p><strong>有符号</strong>运算<strong>溢出</strong>标志位。</p> <p>记录了<strong>有符号</strong>运算的结果是否发生了溢出，如果发生溢出OF=1,如果没有OF=0；</p> <h3 id="df标志"><a href="#df标志" class="header-anchor">#</a> <strong>DF标志</strong></h3> <p>方向标志位。</p> <p>在串处理指令中，每次操作后，如果DF=0，si、di递增，如果DF=1，si、di递减；</p> <p>DF的值是由程序员进行设定的 cld命令是将DF设置为0，std命令是将DF设置为1；</p> <h3 id="if标志"><a href="#if标志" class="header-anchor">#</a> <strong>IF标志</strong></h3> <p>中断允许标志位。</p> <p>它用来控制是否允许接收外部中断请求。</p> <p>若IF=1，能响应外部中断，反之则屏蔽外部中断;</p> <h3 id="tf标志"><a href="#tf标志" class="header-anchor">#</a> <strong>TF标志</strong></h3> <p>调试标志位。</p> <p>当TF=1时，处理器每次只执行一条指令，即单步执行;</p> <h3 id="sf标志"><a href="#sf标志" class="header-anchor">#</a> SF标志</h3> <p>flag的第7位是SF，符号标志位。</p> <p>它记录相关指令执行后，其结果是否为负。如果结果为负，sf=1；如果非负，sf=0。</p> <p>计算机中通常用<strong>补码</strong>来表示有符号数据（负数）。</p> <p>运算后可以通过它来得知结果的正负。</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>mov <span class="token register variable">ax</span>,<span class="token number">1</span>
sub <span class="token register variable">ax</span>,<span class="token number">2</span>
<span class="token comment">;1-2&lt;0,此时sf=1</span>
</code></pre></div><h3 id="zf标志"><a href="#zf标志" class="header-anchor">#</a> ZF标志</h3> <p>flag的第6位是ZF，零标志位</p> <p>它记录相关指令执行后，结果为0，ZF=1(记录下是0这样的肯定信息)，结果不为0，ZF=0(表示结果非0)。</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>mov <span class="token register variable">ax</span>,<span class="token number">5</span>
sub <span class="token register variable">ax</span>,<span class="token number">5</span>
<span class="token comment">;指令执行后，结果为0，则ZF=1</span>

mov <span class="token register variable">ax</span>,<span class="token number">5</span>
and <span class="token register variable">ax</span>,<span class="token number">0</span>
<span class="token comment">;指令执行后，结果为0，则ZF=1</span>

mov <span class="token register variable">ax</span>,<span class="token number">5</span>
sub <span class="token register variable">ax</span>,<span class="token number">1</span>
<span class="token comment">;指令执行后，结果为4，不为0，则ZF=0</span>

mov <span class="token register variable">ax</span>,<span class="token number">1</span>
or <span class="token register variable">ax</span>,<span class="token number">0</span>
<span class="token comment">;指令执行后，结果为1，不为0，则ZF=0</span>
</code></pre></div><h3 id="af标志"><a href="#af标志" class="header-anchor">#</a> <strong>AF标志</strong></h3> <p>辅助进位标志位。</p> <p>运算过程中看最后四位，不论长度为多少。最后四位向前有进位或者借位，AF=1,否则AF=0;</p> <h3 id="pf标志"><a href="#pf标志" class="header-anchor">#</a> PF标志</h3> <p>flag的第2位是PF，奇偶标志位。</p> <p>记录指令执行后结果所有的二进制位中1的个数。为偶数，PF=1；为奇数，PF=0。</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>mov <span class="token register variable">al</span>,<span class="token number">1</span>
add <span class="token register variable">al</span>,<span class="token number">2</span>
<span class="token comment">;执行结果为00000011B，有2个1，偶数,则PF=1</span>

mov <span class="token register variable">al</span>,<span class="token number">1</span>
or <span class="token register variable">al</span>,<span class="token number">0</span>
<span class="token comment">;执行后结果为00000001B，有1个1，奇数,则PF=1</span>
</code></pre></div><h3 id="cf标志"><a href="#cf标志" class="header-anchor">#</a> CF标志</h3> <p>flag的第0位是CF，<strong>无符号</strong>运算<strong>进位</strong>标志位。</p> <p>是<strong>无符号运算</strong>记录了运算结果的最高有效位向更高位的进位值，或从更高位的借位值。</p> <p>对于位数为N的无符号数，其对应的二进制信息的最高位，即第N-1位，就是它的最高有效位，假想存在第N位是相对于最高有效位的更高位。</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>mov <span class="token register variable">al</span>,<span class="token number">98h</span>
add <span class="token register variable">al</span>,<span class="token register variable">al</span>      <span class="token comment">;98H + 98H = 01 30H; al 只有两个字节，所以执行后(al)=30H，cf=1，cf记录了从最高有效位向更高位的进位值</span>
add <span class="token register variable">al</span>,<span class="token register variable">al</span>      <span class="token comment">;30H + 30H = 60H; 执行后(al)=60H，cf=0，cf记录了从最高有效位向更高位的进位值</span>

sub <span class="token register variable">al</span>,<span class="token register variable">al</span>      <span class="token comment">;执行后(al)=0，cf=0，cf记录了向更高位的借位值</span>
</code></pre></div><h3 id="_1-1-abc指令"><a href="#_1-1-abc指令" class="header-anchor">#</a> 1.1 abc指令</h3> <p>adc是带进位加法指令，利用了CF位上记录的进位值。</p> <p>格式：adc 操作对象1，操作对象2</p> <p>功能：操作对象1=操作对象1+操作对象2+CF。</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>mov <span class="token register variable">ax</span>,<span class="token number">2</span>
mov <span class="token register variable">bx</span>,<span class="token number">1</span>
sub <span class="token register variable">bx</span>,<span class="token register variable">ax</span>
adc <span class="token register variable">ax</span>,<span class="token number">1</span>
执行后 (<span class="token register variable">ax</span>)<span class="token operator">=</span><span class="token number">4</span>，相当于计算(<span class="token register variable">ax</span>)<span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span>CF<span class="token operator">=</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">4</span>

mov <span class="token register variable">ax</span>,<span class="token number">1</span>
add <span class="token register variable">ax</span>,<span class="token register variable">ax</span>
adc <span class="token register variable">ax</span>,<span class="token number">3</span>
执行后(<span class="token register variable">ax</span>)<span class="token operator">=</span><span class="token number">5</span>，相当于执行(<span class="token register variable">ax</span>)<span class="token operator">+</span><span class="token number">3</span><span class="token operator">+</span>CF<span class="token operator">=</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">3</span><span class="token operator">+</span><span class="token number">0</span><span class="token operator">=</span><span class="token number">5</span>

mov <span class="token register variable">al</span>,<span class="token number">98H</span>
add <span class="token register variable">al</span>,<span class="token register variable">al</span>
adx <span class="token register variable">al</span>,<span class="token number">3</span>
执行后 (<span class="token register variable">al</span>)<span class="token operator">=</span><span class="token number">34H</span>，相当于执行(<span class="token register variable">ax</span>)<span class="token operator">+</span><span class="token number">3</span><span class="token operator">+</span>CF<span class="token operator">=</span><span class="token number">30H</span><span class="token operator">+</span><span class="token number">3</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">34H</span>
</code></pre></div><p>由adc指令前面的指令，决定在执行adc指令的时候加上的CF的值的含义。也就是说关键在于所加上的CF值是被什么指令设置的。</p> <p><strong>1、进位值</strong></p> <p>如果是被<strong>add</strong>指令设置的，那么它的含义就是进位值。</p> <p>加法运算分两步进行：</p> <p>①低位相加</p> <p>②高位相加加上低位相加产生的进位值。</p> <p>CPU提供adc指令的目的，就是来进行加法的第二步运算的。adc指令和add指令相配合就可以对更大的数据进行加法运算。</p> <p><strong>2、借位值</strong></p> <p>如果CF的值是被<strong>sub</strong>指令设置的，那么它的含义就是借位值；</p> <p>编程：计算1EF000H+201000H,结果存放在AX(高16位)和BX(低16位)中。</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>mov <span class="token register variable">ax</span>,<span class="token number">001EH</span>
mov <span class="token register variable">bx</span>,<span class="token number">0F000H</span>
add <span class="token register variable">bx</span>,<span class="token number">1000H</span>
adc <span class="token register variable">ax</span>,<span class="token number">0020H</span>
<span class="token comment">;编程：1EF0001000H+2010001EF0H,结果存放在AX(高16位)、BX(次16位)中和cx(低16位)。</span>
</code></pre></div><p>计算分三步进行：</p> <div class="language- extra-class"><pre class="language-text"><code>（1）先将低16位相加，完成后，CF中记录本次相加的进位值。
（2）再将次高16位和CF（来自低16位的进位值）相加，完成后，CF中记录本次相加的进位值。
（3）最后高16位和CF（来自次高16位的进位值）相加，完成后，CF中记录本次相加的进位值。
</code></pre></div><div class="language-nasm extra-class"><pre class="language-nasm"><code>mov <span class="token register variable">ax</span>,<span class="token number">001EH</span>
mov <span class="token register variable">bx</span>,<span class="token number">0F000H</span>
mov <span class="token register variable">cx</span>,<span class="token number">1000H</span>
add <span class="token register variable">cx</span>,<span class="token number">1EF0H</span>
add <span class="token register variable">bx</span>,<span class="token number">1000H</span>
adc <span class="token register variable">ax</span>,<span class="token number">0020H</span>
</code></pre></div><p>编程：对两个128位数据进行相加</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>assume <span class="token register variable">cs</span>:code,<span class="token register variable">ds</span>:data
    data segment
            db <span class="token number">16</span> dup(<span class="token number">88H</span>)
            db <span class="token number">16</span> dup(<span class="token number">11H</span>)
    data ends
    code segment
    <span class="token label function">start:</span>
            mov <span class="token register variable">ax</span>,data
            mov <span class="token register variable">ds</span>,<span class="token register variable">ax</span>
            mov <span class="token register variable">si</span>,<span class="token number">0</span>
            mov <span class="token register variable">di</span>,<span class="token number">16</span>
            mov <span class="token register variable">cx</span>,<span class="token number">8</span>
            call add128
            mov <span class="token register variable">ax</span>,<span class="token number">4C00H</span>
            int <span class="token number">21H</span>
    <span class="token label function">add128:</span>
            push <span class="token register variable">ax</span>
            push <span class="token register variable">cx</span>
            push <span class="token register variable">si</span>
            push <span class="token register variable">di</span>
            sub <span class="token register variable">ax</span>,<span class="token register variable">ax</span><span class="token comment">;将CF设置为0</span>
        <span class="token label function">s:</span>
            mov <span class="token register variable">ax</span>,<span class="token operator">[</span><span class="token register variable">si</span><span class="token operator">]</span>
            adc <span class="token register variable">ax</span>,<span class="token operator">[</span><span class="token register variable">di</span><span class="token operator">]</span>
            mov <span class="token operator">[</span><span class="token register variable">si</span><span class="token operator">]</span>,<span class="token register variable">ax</span>
            inc <span class="token register variable">si</span><span class="token comment">;不能用add si,2代替</span>
            inc <span class="token register variable">si</span><span class="token comment">;因为会影响cf位</span>
            inc <span class="token register variable">di</span><span class="token comment">;而loop和inc不会影响</span>
            inc <span class="token register variable">di</span>
            loop s
             pop <span class="token register variable">di</span>
             pop <span class="token register variable">si</span>
             pop <span class="token register variable">cx</span>
             pop <span class="token register variable">ax</span>
             ret
    code ends
end start
</code></pre></div><h3 id="_1-2-sbb指令"><a href="#_1-2-sbb指令" class="header-anchor">#</a> 1.2 sbb指令</h3> <p>sbb是带借位减法指令，利用了CF位上记录的借位值。</p> <p>格式：sbb 操作对象1,操作对象2</p> <p>功能：操作对象1=操作对象1-操作对象2-CF</p> <p>利用sbb指令我们可以对任意大的数据进行减法运算。</p> <p>sbb和adc是基于同样的思想设计的两条指令，在应用思路上sbb和adc类似。</p> <p>编程：计算003E1000H-00202000H，结果放在ax，bx中</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>mov <span class="token register variable">bx</span>,<span class="token number">1000H</span>
mov <span class="token register variable">ax</span>,<span class="token number">003EH</span>
sub <span class="token register variable">bx</span>,<span class="token number">2000H</span>
sbb <span class="token register variable">ax</span>,<span class="token number">0020H</span>
</code></pre></div><h3 id="_1-3-cmp指令"><a href="#_1-3-cmp指令" class="header-anchor">#</a> 1.3 cmp指令</h3> <p>cmp是比较指令，功能上相当于减法指令，只是不保存结果。</p> <p>格式：cmp 操作对象1,操作对象2</p> <p>功能：计算操作对象1-操作对象2但不保存结果，仅仅是根据计算结果对标志寄存器进行设置。</p> <p>cmp指令运算执行后通过做减法将对标志寄存器产生影响，其他相关指令通过识别这些被影响的标志寄存器位来得知比较结果。</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>cmp <span class="token register variable">ax</span>,<span class="token register variable">ax</span>
<span class="token comment">;执行后结果为0，ZF=1,PF=1,SF=0,CF=0,OF=0</span>

mov <span class="token register variable">ax</span>,<span class="token number">8</span>
mov <span class="token register variable">bx</span>,<span class="token number">3</span>
cmp <span class="token register variable">ax</span>,<span class="token register variable">bx</span>
<span class="token comment">;执行后ax、bx的值不变，ZF=0,PF=1,SF=0,CF=0,OF=0</span>
<span class="token comment">;通过cmp指令执行后，相关标志位的值就可以看出比较的结果。 </span>
<span class="token comment">;指令&quot;cmp ax,bx”的逻辑含义是比较ax和bx中的值</span>
</code></pre></div><p><strong>判断结果大小</strong></p> <p>指令&quot;cmp ax,bx”的逻辑含义是比较ax和bx中的值，如果执行后：</p> <table><thead><tr><th>cmp ax,bx 比较后的标志状态</th> <th>含义</th></tr></thead> <tbody><tr><td>ZF=1</td> <td>ax = bx</td></tr> <tr><td>ZF=0</td> <td>ax != bx</td></tr> <tr><td>CF=1</td> <td>ax &lt; bx</td></tr> <tr><td>CF=0</td> <td>ax &gt;= bx</td></tr> <tr><td>CF=0 &amp; ZF=0</td> <td>ax &gt; bx</td></tr> <tr><td>CF=1 &amp; ZF=1</td> <td>ax &lt;= bx</td></tr></tbody></table> <p><strong>判断结果正负</strong></p> <p>⚠️ sf记录的是ah中的8位二进制信息所表示的数据的正负, 而cmp并不修改寄存器的值，单纯地考察SF的值不可能知道结果的正负</p> <table><thead><tr><th>OF</th> <th>0: 没有溢出，1:溢出</th></tr></thead> <tbody><tr><td>SF</td> <td>1:表示负数，0 正数</td></tr> <tr><td>OF=0 &amp; SF=1</td> <td>（ah）&lt;（bh）</td></tr> <tr><td>OF=0 &amp; SF=0</td> <td>（ah）≥（bh）</td></tr> <tr><td>OF=1 &amp; SF=1</td> <td>（ah）＞（bh）</td></tr> <tr><td>OF=1 &amp; SF=0</td> <td>（ah）&lt;（bh）</td></tr></tbody></table> <p>1、<strong>无溢出</strong>时通过sf标记<strong>可判断</strong>结果的<strong>正负</strong></p> <p>如果SF=1或SF=0，OF=0，逻辑上真正结果的正负=实际结果的正负。</p> <p>of=0，说明没有溢出，逻辑上真正结果的正负=实际结果的正负；</p> <p>若sf=1，实际结果为负，所以逻辑上真正的结果为负，所以（ah）&lt;（bh）</p> <p>若sf=0，实际结果非负，所以逻辑上真正的结果非负，所以（ah）≥（bh）</p> <p>2、<strong>有溢出</strong>时通过sf标记 <strong>判断</strong>结果的**正负****</p> <p>如果SF=1或SF=0，OF=1，逻辑上真正结果的负正≠实际结果的正负。</p> <p>of=1，说明有溢出，逻辑上真正结果的正负≠实际结果的正负；</p> <p>若sf=1，实际结果为负，而又有溢出，这说明是由于溢出导致了实际结果为负，简单分析一下，就可以看出，如果因为溢出导致了实际结果为负，那么逻辑上真正的结果必然为正，则说明（ah）＞（bh）。</p> <p>若sf=0，实际结果非负，而of=1说明有溢出，则结果非0，所以，实际结果为正。实际结果为正，而又有溢出，这说明是由于溢出导致了导致了实际结果非负，简单分析一下就可以看出，如果因为溢出导致了实际结果为正，那么逻辑上真正的结果必然为负，则说明（ah）&lt;（bh）。</p> <h3 id="_1-4-条件转移指令"><a href="#_1-4-条件转移指令" class="header-anchor">#</a> 1.4 条件转移指令</h3> <p>条件转移指令需根据比较指令、并配合标志综合使用，</p> <p>比如与cmp相配使用，根据cmp指令的比较结果(cmp指令执行后相关标志位的值)进行工作的指令。</p> <p>cmp指令可以同时进行两种比较，无符号数比较和有符号数比较，所以根据cmp指令的比较结果进行转移的指令也分为两种：</p> <div class="language-html extra-class"><pre class="language-html"><code>1、无符号比较

根据无符号数的比较结果进行转移的条件转移指令，它们检测ZF、CF的值；

2、有符号比较

根据有符号数的比较结果进行转移的条件转移指令，它们检测SF、OF、ZF的值。

</code></pre></div><table><thead><tr><th>跳转指令</th> <th>跳转条件</th> <th>标志位</th></tr></thead> <tbody><tr><td>JE</td> <td>=</td> <td>ZF=1</td></tr> <tr><td>JNE</td> <td>!=</td> <td>ZF=0</td></tr> <tr><td>JB</td> <td>&lt;</td> <td>CF=1</td></tr> <tr><td>JNB</td> <td>&gt;=</td> <td>CF=0</td></tr> <tr><td>JA</td> <td>&gt;</td> <td>CF=0 &amp; ZF=0</td></tr> <tr><td>JNA</td> <td>&lt;=</td> <td>CF=1 &amp; ZF=1</td></tr></tbody></table> <div class="language-nasm extra-class"><pre class="language-nasm"><code> <span class="token comment">;编程：如果(ah)=(bh)则(ah)=(ah)+(ah)，否则(ah)=(ah)+(bh)。</span>

  cmp <span class="token register variable">ah</span>,<span class="token register variable">bh</span>
  je s                       <span class="token comment">;ZF=1则跳转</span>
  add <span class="token register variable">ah</span>,<span class="token register variable">bh</span>
  jmp short ok
    <span class="token label function">s:</span> add <span class="token register variable">ah</span>,<span class="token register variable">bh</span>
   <span class="token label function">ok:</span> ret 

 <span class="token comment">;je检测的是ZF的位置，不管je前面是什么指令，只要CPU执行je指令时，ZF=1那么就发生转移。</span>
		mov <span class="token register variable">ax</span>,<span class="token number">0</span>
    mov <span class="token register variable">ax</span>,<span class="token number">0</span>
    je s
    inc <span class="token register variable">ax</span>
<span class="token label function">s:</span>
    inc <span class="token register variable">ax</span>
    
  <span class="token comment">;执行后(ax)=1，add ax,0使得ZF=1，所以je指令将进行转移。 </span>
</code></pre></div><p>编程:统计data段中数值为8的字节的个数，用ax保存统计结果。</p> <p>方案一</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>assume <span class="token register variable">cs</span>:code
    data segment
            db <span class="token number">8</span>,<span class="token number">11</span>,<span class="token number">8</span>,<span class="token number">1</span>,<span class="token number">8</span>,<span class="token number">5</span>,<span class="token number">63</span>,<span class="token number">38</span>
    data ends
    code segment
    <span class="token label function">start:</span>
            mov <span class="token register variable">ax</span>,data
            mov <span class="token register variable">ds</span>,<span class="token register variable">ax</span>
            mov <span class="token register variable">bx</span>,<span class="token number">0</span><span class="token comment">;ds:bx指向第一个字节</span>
            mov <span class="token register variable">ax</span>,<span class="token number">0</span><span class="token comment">;初始化累加器</span>
            mov <span class="token register variable">cx</span>,<span class="token number">0</span>
        <span class="token label function">s:</span>
            cmp byte ptr <span class="token operator">[</span><span class="token register variable">bx</span><span class="token operator">]</span>,<span class="token number">8</span><span class="token comment">;和8进行比较</span>
            jne next<span class="token comment">;如果不相等转到next，继续循环</span>
            inc <span class="token register variable">ax</span><span class="token comment">;如果相等就计数值加1</span>
        <span class="token label function">next:</span>
            inc <span class="token register variable">bx</span>
            loop s<span class="token comment">;执行后：(ax)=3</span>
            mov <span class="token register variable">ax</span>,<span class="token number">4c00h</span>
            int <span class="token number">21h</span>
    code ends
end segment
</code></pre></div><p>方案二</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>assume <span class="token register variable">cs</span>:code
    data segment
            db <span class="token number">8</span>,<span class="token number">11</span>,<span class="token number">8</span>,<span class="token number">1</span>,<span class="token number">8</span>,<span class="token number">5</span>,<span class="token number">63</span>,<span class="token number">38</span>
    data ends
    code segment
    <span class="token label function">start:</span>
            mov <span class="token register variable">ax</span>,data
            mov <span class="token register variable">ds</span>,<span class="token register variable">ax</span>
            mov <span class="token register variable">bx</span>,<span class="token number">0</span><span class="token comment">;ds:bx指向第一个字节</span>
            mov <span class="token register variable">ax</span>,<span class="token number">0</span><span class="token comment">;初始化累加器</span>
            mov <span class="token register variable">cx</span>,<span class="token number">0</span>
        <span class="token label function">s:</span>
            cmp byte ptr <span class="token operator">[</span><span class="token register variable">bx</span><span class="token operator">]</span>,<span class="token number">8</span><span class="token comment">;和8进行比较</span>
            je ok<span class="token comment">;如果不相等转到ok，继续循环</span>
            jmp short next<span class="token comment">;如果不想等就转到next，继续循环</span>
        <span class="token label function">ok:</span>
            inc <span class="token register variable">ax</span><span class="token comment">;如果相等就计数值加1</span>
        <span class="token label function">next:</span>
            inc <span class="token register variable">bx</span>
            loop s<span class="token comment">;执行后：(ax)=3</span>
            mov <span class="token register variable">ax</span>,<span class="token number">4c00h</span>
            int <span class="token number">21h</span>
    code ends
end segment 
</code></pre></div><p>编程:统计data段中数值大于8的字节的个数，用ax保存统计结果。</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>assume <span class="token register variable">cs</span>:code
    data segment
            db <span class="token number">8</span>,<span class="token number">11</span>,<span class="token number">8</span>,<span class="token number">1</span>,<span class="token number">8</span>,<span class="token number">5</span>,<span class="token number">63</span>,<span class="token number">38</span>
    data ends
    code segment
    <span class="token label function">start:</span>
            mov <span class="token register variable">ax</span>,data
            mov <span class="token register variable">ds</span>,<span class="token register variable">ax</span>
            mov <span class="token register variable">bx</span>,<span class="token number">0</span><span class="token comment">;ds:bx指向第一个字节</span>
            mov <span class="token register variable">ax</span>,<span class="token number">0</span><span class="token comment">;初始化累加器</span>
            mov <span class="token register variable">cx</span>,<span class="token number">0</span>
        <span class="token label function">s:</span>
            cmp byte ptr <span class="token operator">[</span><span class="token register variable">bx</span><span class="token operator">]</span>,<span class="token number">8</span><span class="token comment">;和8进行比较</span>
            jna next<span class="token comment">;如果大于8转到next，继续循环</span>
            inc <span class="token register variable">ax</span><span class="token comment">;如果大于就计数值加1</span>
        <span class="token label function">next:</span>
            inc <span class="token register variable">bx</span>
            loop s<span class="token comment">;执行后：(ax)=3</span>
            mov <span class="token register variable">ax</span>,<span class="token number">4c00h</span>
            int <span class="token number">21h</span>
    code ends
end segment
</code></pre></div><h3 id="_1-5-串传送指令"><a href="#_1-5-串传送指令" class="header-anchor">#</a> 1.5 串传送指令</h3> <p><strong>1、DF标志:方向标志位</strong></p> <p>在串处理指令中，控制每次操作后si(一般指向原始偏移地址)、di(一般指向目标偏移地址)的增减。</p> <div class="language- extra-class"><pre class="language-text"><code>DF=0：每次操作后si、di递增；

DF=1：每次操作后so、di递减。
</code></pre></div><p>2、movsb串传送指令
movsb(mov string byte)串传送指令</p> <p>以字节为单位传送</p> <p>格式：movsb</p> <p>执行movsb相当于以下操作：</p> <div class="language- extra-class"><pre><code>（1）((es)*16+(di))=((ds)*16+(si))

（2）如果DF=0，则(si)=(si)+1,(di)=(di)+1;
	
	如果DF=1，则(si)=(si)-1，(di)=(di)-1。
	movsb功能：将ds:si指向的内存单元中的字节送入es:di中，然后根据标志寄存器DF位的值将si和di递增1或递减1。
</code></pre></div><p>2、movsw串传送指令</p> <p>以字为单位传送。</p> <p>将ds:si指向的内存单元中的字送入es:di中，然后根据标志寄存器DF位的值将si和di递增2或递减2。</p> <p>movsb和movsw进行的是串传送操作中的一个步骤，一般和rep配合使用，格式：rep movsb，rep的作用是根据cx 的值，重复执行后面的串传送指令。由于每执行一次movsb指令si和di都会递增或递减指向后一个单元或前个单元，则rep movsb就可以循环实现(cx)个字符的传送。</p> <p>使用串传送指令进行数据的传送，需要提供：</p> <div class="language- extra-class"><pre class="language-text"><code>1、传送的原始位置；

2、传送的目的位置；

3、传送的长度；

4、传送的方向。
</code></pre></div><p>由于flag的DF位决定着串传送指令执行后，si和di改变的方向，8086CPU提供两条指令对DF位进行设置：</p> <div class="language- extra-class"><pre class="language-text"><code>（1）cld指令：将标志寄存器的DF位设置为0；

（2）std指令：将标志寄存器的DF位设置为1。
</code></pre></div><h3 id="_1-6-pushf和popf指令"><a href="#_1-6-pushf和popf指令" class="header-anchor">#</a> <strong>1.6 pushf和popf指令</strong></h3> <p>pushf的功能是将标志寄存器的值压栈，</p> <p>popf是从栈中弹出数据，送入标志寄存器中。</p> <p><strong>pushf和popf为直接访问标志寄存器提供了一种方法</strong>。</p> <p>下面的程序执行后ax的值是多少？</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>mov <span class="token register variable">ax</span>,<span class="token number">0</span>
push <span class="token register variable">ax</span>
popf
mov <span class="token register variable">ax</span>,<span class="token number">0fff0h</span>
add <span class="token register variable">ax</span>,<span class="token number">0010h</span>
pushf
pop <span class="token register variable">ax</span>
and <span class="token register variable">al</span>,<span class="token number">11000101b</span>
and <span class="token register variable">ah</span>,<span class="token number">00001000b</span>
</code></pre></div><h3 id="_1-7-debug"><a href="#_1-7-debug" class="header-anchor">#</a> <strong>1.7 Debug</strong></h3> <p>标志寄存器在Debug中的表示</p> <table><thead><tr><th>标志</th> <th>值为1的标记</th> <th>值为。的标记</th></tr></thead> <tbody><tr><td>OF</td> <td>OV</td> <td>NV</td></tr> <tr><td>SF</td> <td>NG</td> <td>PL</td></tr> <tr><td>ZF</td> <td>ZR</td> <td>NZ</td></tr> <tr><td>PF</td> <td>PE</td> <td>PO</td></tr> <tr><td>CF</td> <td>CY</td> <td>NC</td></tr> <tr><td>DF</td> <td>DN</td> <td>UP</td></tr></tbody></table> <h2 id="字符串"><a href="#字符串" class="header-anchor">#</a> 字符串</h2> <p>可以使用 section .data 显式存储字符串，</p> <p>或者 section  .bss 段定义字符串变量再赋值</p> <h3 id="字符串-2"><a href="#字符串-2" class="header-anchor">#</a> 字符串</h3> <p>我们可以使用表示位置计数器当前值的$位置计数器符号来显式存储字符串长度</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>msg  db  <span class="token string">'Hello, world!'</span>,<span class="token number">0xa</span> <span class="token comment">;我们常见的字符</span>
len  equ  <span class="token operator">$</span> <span class="token operator">-</span> msg            <span class="token comment">;长度</span>
<span class="token comment">;$指向字符串变量msg的最后一个字符之后的字节。因此，$ - msg给出字符串的长度</span>
</code></pre></div><h3 id="字符串指令"><a href="#字符串指令" class="header-anchor">#</a> 字符串指令</h3> <p>对于16位地址，使用SI和DI寄存器，对于32位地址，使用ESI和EDI寄存器。</p> <p>下表提供了各种版本的字符串指令和假定的操作数空间:</p> <table><thead><tr><th style="text-align:left;">基本指令</th> <th style="text-align:left;">操作的寄存器</th> <th style="text-align:left;">字节运算</th> <th style="text-align:left;">字运算</th> <th style="text-align:left;">双字运算</th> <th>说明</th></tr></thead> <tbody><tr><td style="text-align:left;"><strong>MOVS</strong></td> <td style="text-align:left;">ES:DI，DS:SI</td> <td style="text-align:left;">MOVSB</td> <td style="text-align:left;">MOVSW</td> <td style="text-align:left;">MOVSD</td> <td>该指令将1字节，字或双字数据从存储位置移到另一个位置</td></tr> <tr><td style="text-align:left;"><strong>LODS</strong></td> <td style="text-align:left;">DS:SI</td> <td style="text-align:left;">LODSB</td> <td style="text-align:left;">LODSW</td> <td style="text-align:left;">LODSD</td> <td>该指令从存储器加载。如果操作数是一个字节，则将其加载到AL寄存器中；如果操作数是一个字，则将其加载到AX寄存器中，并将双字加载到EAX寄存器中</td></tr> <tr><td style="text-align:left;"><strong>STOS</strong></td> <td style="text-align:left;">ES:DI，AX</td> <td style="text-align:left;">STOSB</td> <td style="text-align:left;">STOS</td> <td style="text-align:left;">STOSD</td> <td>该指令将数据从寄存器（AL，AX或EAX）存储到存储器</td></tr> <tr><td style="text-align:left;"><strong>CMPS</strong></td> <td style="text-align:left;">DS:SI，ES:DI</td> <td style="text-align:left;">CMPSB</td> <td style="text-align:left;">CMPSW</td> <td style="text-align:left;">CMPSD</td> <td>该指令比较内存中的两个数据项。数据可以是字节大小，字或双字</td></tr> <tr><td style="text-align:left;"><strong>SCAS</strong></td> <td style="text-align:left;">ES:DI，AX</td> <td style="text-align:left;">SCASB</td> <td style="text-align:left;">SCASW</td> <td style="text-align:left;">SCASD</td> <td>该指令将寄存器（AL，AX或EAX）的内容与内存中项目的内容进行比较</td></tr></tbody></table> <p>下面介绍一些会用到的指令</p> <h3 id="标志位重置指令"><a href="#标志位重置指令" class="header-anchor">#</a> <strong>标志位重置指令</strong></h3> <table><thead><tr><th>CLD</th> <th>将方向标志位DF清零</th></tr></thead> <tbody><tr><td>STD</td> <td>将方向标志位DF置1</td></tr></tbody></table> <h3 id="rep重复执行指令"><a href="#rep重复执行指令" class="header-anchor">#</a> REP重复执行指令</h3> <p>1、REP（Repeat）汇编指令是一种重复执行指令的控制指令，它通常和其他指令组合使用，用于在处理字符串或数组时进行重复操作。REP指令可以和多个其他指令搭配使用，如MOV、STOS等。其语法如下：</p> <div class="language- extra-class"><pre class="language-text"><code>rep instruction ;比如 rep MOVSB
</code></pre></div><p>其中，instruction是要重复执行的指令。</p> <p>2、REP指令会将ECX寄存器中的值作为计数器，循环执行instruction指定的操作。</p> <p>每次循环都会将ECX减1，直到ECX的值为0为止（类似loop）</p> <p>3、对于不同的操作码，REP有三种形式：</p> <table><thead><tr><th>REPE、REP</th> <th>Repeat while Equal</th> <th>比较结果相同时继续执行，不相同退出循环</th></tr></thead> <tbody><tr><td>REPNE、REPN</td> <td>Repeat while Not Equal</td> <td>比较结果不相同时继续执行，相同退出循环</td></tr> <tr><td>REPZ</td> <td>Repeat while Zero</td> <td>结果 =0 时继续执行，结果 !=0 退出循环</td></tr></tbody></table> <h3 id="movs指令"><a href="#movs指令" class="header-anchor">#</a> MOVS指令</h3> <p>MOVS指令用于将数据项（字节，字或双字）从源字符串SI 到目标字符串DI :</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token keyword">section .text</span>
   <span class="token keyword">global _start </span>
        
<span class="token label function">_start:</span>              
   mov  <span class="token register variable">ecx</span>, len       <span class="token comment">;s1长度</span>
   mov  <span class="token register variable">esi</span>, s1        <span class="token comment">;将s1的字符串送入 si 寄存器中</span>
   mov  <span class="token register variable">edi</span>, s2        <span class="token comment">;开辟 s2空间并指定到 di 寄存器</span>
   cld					       <span class="token comment">;方向标志位DF清零</span>
   rep  movsb	         <span class="token comment">;源字符串SI 送到目标字符串DI</span>
        
   mov  <span class="token register variable">edx</span>,<span class="token number">20</span>          <span class="token comment">;s2长度</span>
   mov  <span class="token register variable">ecx</span>,s2          <span class="token comment">;s2信息</span>
   mov  <span class="token register variable">ebx</span>,<span class="token number">1</span>           <span class="token comment">;stdout</span>
   mov  <span class="token register variable">eax</span>,<span class="token number">4</span>           <span class="token comment">;sys_write</span>
   int  <span class="token number">0x80</span>            <span class="token comment">;call </span>
        
   mov  <span class="token register variable">eax</span>,<span class="token number">1</span>           <span class="token comment">;system call number (sys_exit)</span>
   int  <span class="token number">0x80</span>            <span class="token comment">;call kernel</span>
        
<span class="token keyword">section .data</span>
s1 db <span class="token string">'Hello, world!'</span>
len equ <span class="token operator">$</span><span class="token operator">-</span>s1

<span class="token keyword">section  .bss</span>
s2 resb <span class="token number">20</span>              
</code></pre></div><p>结果：</p> <div class="language-t4 extra-class"><pre class="language-t4"><code>Hello, world!
</code></pre></div><h3 id="lods指令"><a href="#lods指令" class="header-anchor">#</a> LODS指令</h3> <p>该指令从存储器加载。如果操作数是一个字节，则将其加载到AL寄存器中；如果操作数是一个字，则将其加载到AX寄存器中，并将双字加载到EAX寄存器中</p> <p>示例：</p> <p>将secret加密显示，加密方式：单字节增加2位</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token keyword">section .text</span>
   <span class="token keyword">global _start       </span>
        
<span class="token label function">_start:</span>                 
   mov    <span class="token register variable">ecx</span>, <span class="token number">6</span>      <span class="token comment">;secret字符串长度，同时也是loop循环的次数</span>
   mov    <span class="token register variable">esi</span>, s1      	<span class="token comment">;将s1的字符串送入 si 寄存器中</span>
   mov    <span class="token register variable">edi</span>, s2      	<span class="token comment">;开辟 s2空间并指定到 di 寄存器</span>
      
<span class="token label function">loop_encrypt:</span> 			<span class="token comment">;加密（循环6次）</span>
   lodsb				<span class="token comment">;将si中的'secret'加载到AL（AX或EAX）寄存器</span>
   add <span class="token register variable">al</span>, <span class="token number">02</span>		<span class="token comment">;al内容偏移2（混淆）</span>
   stosb 				<span class="token comment">;该指令将数据从寄存器AL（AX或EAX）存储到存储器</span>
   loop    loop_encrypt          
   
   cld					       <span class="token comment">;方向标志位DF清零</span>
   rep  movsb	         <span class="token comment">;源字符串SI 送到目标字符串DI</span>
        
   mov     <span class="token register variable">edx</span>,<span class="token number">20</span>        
   mov     <span class="token register variable">ecx</span>,s2       
   mov     <span class="token register variable">ebx</span>,<span class="token number">1</span>        
   mov     <span class="token register variable">eax</span>,<span class="token number">4</span>        
   int     <span class="token number">0x80</span>         
        
   mov     <span class="token register variable">eax</span>,<span class="token number">1</span>        
   int     <span class="token number">0x80</span>         
        
<span class="token keyword">section .data</span>
s1 db <span class="token string">'secret key'</span>
len equ <span class="token operator">$</span><span class="token operator">-</span>s1

<span class="token keyword">section .bss</span>
s2 resb <span class="token number">10</span>             
</code></pre></div><p>结果：</p> <div class="language-t4 extra-class"><pre class="language-t4"><code>ugetgv
</code></pre></div><p>同样如果想要将密文ugetgv解密，转换片段：</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token label function">encrypt_code:</span> 			<span class="token comment">;解密（循环6次）</span>
   lodsb				<span class="token comment">;将si中的密文'ugetgv'加载到AL（AX或EAX）寄存器</span>
   sub <span class="token register variable">al</span>, <span class="token number">02</span>		<span class="token comment">;al内容偏移2（还原）</span>
   stosb 				<span class="token comment">;该指令将数据从寄存器AL（AX或EAX）存储到存储器</span>
   loop    encrypt_code          
</code></pre></div><p>结果还原为'secret'</p> <h3 id="stos指令"><a href="#stos指令" class="header-anchor">#</a> STOS指令</h3> <p>STOS指令将数据项从AL（对于字节-STOSB），AX（对于字-STOSW）或EAX（对于双字-STOSD）到目标字符串，该目标字符串由内存中的ES:DI指向。</p> <p>上面示例已经使用了stosb</p> <p>将大写字符串转换为其小写值转换片段：</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>   
<span class="token label function">lower_case:</span>
   lodsb
   or      <span class="token register variable">al</span>, <span class="token number">20h</span>
   stosb
   loop    lower_case    
   
   cld
   rep  movsb
 
</code></pre></div><h3 id="rep、repe-重复指令"><a href="#rep、repe-重复指令" class="header-anchor">#</a> REP、REPE 重复指令</h3> <p>REP前缀在字符串指令（例如-REP MOVSB）之前设置时，会根据放置在CX寄存器中的计数器使该指令重复。REP执行该指令，将CX减1，然后检查CX是否为零。重复指令处理，直到CX为零为止。</p> <p>方向标志（DF）确定操作的方向。</p> <div class="language- extra-class"><pre class="language-text"><code>- 使用CLD（清除方向标志，DF = 0）使操作从左到右。
- 使用STD（设置方向标志，DF = 1）使操作从右到左。
</code></pre></div><p>REP前缀也有以下变化:</p> <div class="language- extra-class"><pre class="language-text"><code>- REP:这是无条件的重复。重复该操作，直到CX为零为止。
- REPE或REPZ:这是有条件的重复。当零标志指示等于/零时，它将重复操作。当ZF表示不等于零或CX为零时，它将停止。
- REPNE或REPNZ:这也是有条件的重复。当零标志指示不等于/零时，它将重复操作。当ZF指示等于/零或CX减为零时，它将停止。
</code></pre></div><h3 id="cmps指令"><a href="#cmps指令" class="header-anchor">#</a> CMPS指令</h3> <p><strong>CMPS</strong>指令:</p> <p>比较两个字符串。该指令比较DS:SI和ES:DI寄存器所指向的两个数据项，即一个字节，一个字或一个双字，并相应地设置标志。</p> <p><strong>REPE</strong>:</p> <p>比较结果相同时继续执行，不相同退出循环，</p> <p>1、循环次数同loop使用cx寄存器值</p> <p>2、不同的是，cx递减到0前满足退出循环条件的时候就结束了，不会继续循环，比loop 损耗小</p> <p><strong>JECXZ</strong>：</p> <p>根据 CX、ECX 寄存器的值跳转:  JCXZ(CX 为 0 则跳转)、JECXZ(ECX 为 0 则跳转);</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token keyword">section .text</span>
   <span class="token keyword">global _start           </span>
        
<span class="token label function">_start:</span> 
   mov <span class="token register variable">esi</span>, s1
   mov <span class="token register variable">edi</span>, s2
   mov <span class="token register variable">ecx</span>, lens2
   
   cld
   repe  cmpsb              <span class="token comment">;重复执行cmpsb命令，直到 cx=0或者 比较结果不相同 结束</span>
   jecxz  equal             <span class="token comment">;CX 为 0 则跳转</span>
	 jmp nequal

<span class="token label function">nequal:</span> 
   <span class="token comment">;不相同时逻辑</span>
   mov <span class="token register variable">eax</span>, <span class="token number">4</span>
   mov <span class="token register variable">ebx</span>, <span class="token number">1</span>
   mov <span class="token register variable">ecx</span>, msg_neq
   mov <span class="token register variable">edx</span>, len_neq
   int <span class="token number">80h</span>
   jmp exit
        
<span class="token label function">equal:</span> <span class="token comment">;相同时逻辑</span>
   mov <span class="token register variable">eax</span>, <span class="token number">4</span>
   mov <span class="token register variable">ebx</span>, <span class="token number">1</span>
   mov <span class="token register variable">ecx</span>, msg_eq
   mov <span class="token register variable">edx</span>, len_eq
   int <span class="token number">80h</span>
   jmp exit
        
<span class="token label function">exit:</span> <span class="token comment">;退出</span>
   mov <span class="token register variable">eax</span>, <span class="token number">1</span>
   mov <span class="token register variable">ebx</span>, <span class="token number">0</span>
   int <span class="token number">80h</span>
        
<span class="token keyword">section .data</span>
s1 db <span class="token string">'Hello, world!'</span>,<span class="token number">0</span>      <span class="token comment">;源字符</span>
lens1 equ <span class="token operator">$</span><span class="token operator">-</span>s1

s2 db <span class="token string">'Hello, world!'</span>, <span class="token number">0</span>     <span class="token comment">;比较字符</span>
lens2 equ <span class="token operator">$</span><span class="token operator">-</span>s2

msg_eq db <span class="token string">'相同的字符串!'</span>, <span class="token number">0xa</span>
len_eq  equ <span class="token operator">$</span><span class="token operator">-</span>msg_eq

msg_neq db <span class="token string">'不相同的字符串!'</span>
len_neq equ <span class="token operator">$</span><span class="token operator">-</span>msg_neq
</code></pre></div><p>结果</p> <div class="language-t4 extra-class"><pre class="language-t4"><code>相同的字符串!
</code></pre></div><h3 id="scas指令"><a href="#scas指令" class="header-anchor">#</a> SCAS指令</h3> <p>SCAS指令用于搜索字符串中的特定字符或一组字符。要搜索的数据项应该在AL（对于SCASB），AX（对于SCASW）或EAX（对于SCASD）寄存器中。要搜索的字符串应在内存中，并由ES:DI（或EDI）寄存器指向。查看以下程序以了解概念-</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token keyword">section .text</span>
   <span class="token keyword">global _start        </span><span class="token comment">;must be declared for using gcc</span>
        
<span class="token label function">_start:</span>                 <span class="token comment">;tell linker entry point</span>

   mov <span class="token register variable">ecx</span>,len
   mov <span class="token register variable">edi</span>,my_string
   mov <span class="token register variable">al</span> , <span class="token string">'e'</span>
   cld
   repne scasb
   je found <span class="token comment">; when found</span>
   <span class="token comment">; If not not then the following code</span>
        
   mov <span class="token register variable">eax</span>,<span class="token number">4</span>
   mov <span class="token register variable">ebx</span>,<span class="token number">1</span>
   mov <span class="token register variable">ecx</span>,msg_notfound
   mov <span class="token register variable">edx</span>,len_notfound
   int <span class="token number">80h</span>
   jmp exit
        
<span class="token label function">found:</span>
   mov <span class="token register variable">eax</span>,<span class="token number">4</span>
   mov <span class="token register variable">ebx</span>,<span class="token number">1</span>
   mov <span class="token register variable">ecx</span>,msg_found
   mov <span class="token register variable">edx</span>,len_found
   int <span class="token number">80h</span>
        
<span class="token label function">exit:</span>
   mov <span class="token register variable">eax</span>,<span class="token number">1</span>
   mov <span class="token register variable">ebx</span>,<span class="token number">0</span>
   int <span class="token number">80h</span>
        
<span class="token keyword">section .data</span>
my_string db <span class="token string">'hello world'</span>, <span class="token number">0</span>
len equ <span class="token operator">$</span><span class="token operator">-</span>my_string  

msg_found db <span class="token string">'包含该字符串!'</span>, <span class="token number">0xa</span>
len_found equ <span class="token operator">$</span><span class="token operator">-</span>msg_found

msg_notfound db <span class="token string">'不包含该字符串!'</span>
len_notfound equ <span class="token operator">$</span><span class="token operator">-</span>msg_notfound   
</code></pre></div><p>结果-：</p> <div class="language-t4 extra-class"><pre class="language-t4"><code>包含该字符串!
</code></pre></div><h2 id="数组"><a href="#数组" class="header-anchor">#</a> 数组</h2> <p>C++语法中数组示例：</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> marks<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">34</span><span class="token punctuation">,</span>  <span class="token number">45</span><span class="token punctuation">,</span>  <span class="token number">56</span><span class="token punctuation">,</span>  <span class="token number">67</span><span class="token punctuation">,</span>  <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">89</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="数组-2"><a href="#数组-2" class="header-anchor">#</a> 数组</h3> <p>我们已经讨论过，汇编程序的数据定义指令用于为变量分配存储空间。变量也可以用一些特定的值初始化。初始化值可以以十六进制，十进制或二进制形式指定。例如，我们可以通过以下两种方式之一来定义单词变量“months”-</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>MONTHS  DW      <span class="token number">12</span>			<span class="token comment">;十进制表示12月</span>
MONTHS  DW      <span class="token number">0CH</span>			<span class="token comment">;十六进制表示12月</span>
MONTHS  DW      <span class="token number">0110B</span>		<span class="token comment">;二进制表示12月</span>
</code></pre></div><p><strong>1、连续数据定义</strong></p> <p>分配连续内存空间，初始化值0</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>List1   DW  <span class="token number">0</span>, <span class="token number">0</span> , <span class="token number">0</span> , <span class="token number">0</span> , <span class="token number">0</span> , <span class="token number">0</span> 
</code></pre></div><p>定义一维数字数组（连续的相同类型）。</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>List1 DW  <span class="token number">34</span>,  <span class="token number">45</span>,  <span class="token number">56</span>,  <span class="token number">67</span>,  <span class="token number">75</span>, <span class="token number">89</span>
<span class="token comment">;分配了2x6 = 12个字节的连续存储空间</span>
</code></pre></div><p>定义相同内容时可以使用 times</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>List1 TIMES <span class="token number">6</span> DW <span class="token number">0</span>
</code></pre></div><p>定义6个8</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>List1 TIMES <span class="token number">6</span> DW <span class="token number">8</span>
</code></pre></div><p><strong>2、访问数据</strong></p> <p>第一个数字的符号地址为List1，第二个数字的符号地址为List1 + 2，依此类推。</p> <p>比如访问 56</p> <div class="language- extra-class"><pre class="language-text"><code>[List1 + 4]
</code></pre></div><p>访问第二个名称：</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token keyword">section .text</span>
   <span class="token keyword">global _start        </span><span class="token comment">;must be declared for linker (ld)</span>
        
<span class="token label function">_start:</span>    
   
   mov  <span class="token register variable">edx</span>,<span class="token number">4</span>           <span class="token comment">;message length</span>
   mov  <span class="token register variable">ecx</span>, names<span class="token operator">+</span><span class="token number">4</span>      <span class="token comment">;message to write</span>
   mov  <span class="token register variable">ebx</span>,<span class="token number">1</span>           <span class="token comment">;file descriptor (stdout)</span>
   mov  <span class="token register variable">eax</span>,<span class="token number">4</span>           <span class="token comment">;system call number (sys_write)</span>
   int  <span class="token number">0x80</span>      
   
   mov  <span class="token register variable">eax</span>,<span class="token number">1</span>           <span class="token comment">;system call number (sys_exit)</span>
   int  <span class="token number">0x80</span>            <span class="token comment">;call kernel</span>

<span class="token keyword">section .data</span>
<span class="token keyword">global names</span>
<span class="token label function">names:</span>
DW  <span class="token string">'Lucy'</span>, <span class="token string">'Andy'</span>, <span class="token string">'Pete'</span>
</code></pre></div><p>结果</p> <div class="language- extra-class"><pre class="language-text"><code>Andy
</code></pre></div><h2 id="堆栈"><a href="#堆栈" class="header-anchor">#</a> 堆栈</h2> <p>内存结构：</p> <p>堆栈是内存中类似数组的连续内存数据结构，通常会固定一段存储空间。</p> <p>可以在其中存储数据并从称为“堆栈顶部”的位置删除数据。</p> <p>入栈：</p> <p>需要存储的数据被“推送”到堆栈中</p> <p>出栈：</p> <p>要检索的数据从堆栈中“弹出”。</p> <p>LIFO：</p> <p>堆栈是一种LIFO（后进先出）数据结构，即首先存储的数据最后被检索。</p> <p>PUSH和POP：</p> <p>汇编语言为堆栈操作提供了两条指令：PUSH和POP。</p> <p>语法如下：</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>PUSH    operand
POP     address<span class="token operator">/</span>register
</code></pre></div><p>堆栈段中保留的内存空间用于实现堆栈。寄存器SS和ESP（或SP）用于实现堆栈。</p> <p>SS栈顶指针寄存器：</p> <p>指向堆栈段的开头，也就是起始地址，通常是最高位开始</p> <p>SP（或ESP）偏移量：</p> <p>SS起始地址上，再偏移SP的偏移量，就是栈顶的位置，也就是最后存储的一条数据位置。</p> <p>比如：</p> <p>从1-5将数据存储到堆栈（0x01-0x09）的存储空间上：</p> <table><thead><tr><th>堆栈示意地址</th> <th>插入的数据</th> <th>位置</th></tr></thead> <tbody><tr><td>0x09</td> <td>1</td> <td>SS:存放栈顶的段地址（最高位为起始地址）</td></tr> <tr><td>0x08</td> <td>2</td> <td></td></tr> <tr><td>0x07</td> <td>3</td> <td></td></tr> <tr><td>0x06</td> <td>4</td> <td></td></tr> <tr><td>0x05</td> <td>5</td> <td>SS: SP：sp偏移量结合的位置为栈顶（最后数据5的位置）</td></tr> <tr><td>0x04</td> <td></td> <td></td></tr> <tr><td>0x03</td> <td></td> <td></td></tr> <tr><td>0x02</td> <td></td> <td></td></tr> <tr><td>0x01</td> <td></td> <td></td></tr></tbody></table> <p>pop的顺序依次是：5，4，3，2，1 ，和push是相反的</p> <div class="language- extra-class"><pre class="language-text"><code>- 只能将字或双字保存到堆栈中，而不是字节。
- 堆栈朝反方向增长，即朝着较低的存储器地址增长
- 堆栈的顶部指向插入堆栈中的最后一个项目。它指向插入的最后一个字的低字节。
</code></pre></div><p>使用场景，比如：</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>MOV     <span class="token register variable">AX</span>, <span class="token number">1</span>
MOV     <span class="token register variable">BX</span>, <span class="token number">2</span>

<span class="token comment">; 将AX和BX寄存器内容保存在堆栈中</span>
PUSH    <span class="token register variable">AX</span>
PUSH    <span class="token register variable">BX</span>

<span class="token comment">;将寄存器用着其他用途</span>
MOV     <span class="token register variable">AX</span>, <span class="token number">3</span>
MOV     <span class="token register variable">BX</span>, <span class="token number">4</span>
...

<span class="token comment">;使用完之后恢复寄存器原始值,最后push的BX要最先pop才行。</span>
POP     <span class="token register variable">BX</span> <span class="token comment">;BX=2</span>
POP     <span class="token register variable">AX</span> <span class="token comment">;AX=1</span>
</code></pre></div><p>以下程序显示整个ASCII字符集。主程序调用一个名为display的过程，该过程显示ASCII字符集。</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token keyword">section .text</span>
   <span class="token keyword">global _start        </span>
        
<span class="token label function">_start:</span> 
	 <span class="token comment">;call 指令表示执行一段代码，需要ret 配合返回并继续执行后续代码</span>
   call init_count <span class="token comment">;从'5' 开始递增打印20个ASCII字符</span>
   call next  <span class="token comment">;循环打印</span>
   call exit
   
<span class="token label function">init_count:</span>     
   mov    <span class="token register variable">ecx</span>, <span class="token number">20</span> 
	 ret
<span class="token label function">next:</span>
   push    <span class="token register variable">ecx</span>
   call display  <span class="token comment">;调用显示代码块</span>
        
   pop     <span class="token register variable">ecx</span>  
   mov  <span class="token register variable">dx</span>, <span class="token operator">[</span>achar<span class="token operator">]</span>
   cmp  byte <span class="token operator">[</span>achar<span class="token operator">]</span>, <span class="token number">0dh</span>
   inc  byte <span class="token operator">[</span>achar<span class="token operator">]</span>
   loop    next
   ret
   
 <span class="token label function">display:</span>
   mov     <span class="token register variable">eax</span>, <span class="token number">4</span>
   mov     <span class="token register variable">ebx</span>, <span class="token number">1</span>
   mov     <span class="token register variable">ecx</span>, achar
   mov     <span class="token register variable">edx</span>, <span class="token number">1</span>
   int     <span class="token number">80h</span>  
   ret
   
<span class="token label function">exit:</span>
   mov  <span class="token register variable">eax</span>,<span class="token number">1</span>           <span class="token comment">;system call number (sys_exit)</span>
   int  <span class="token number">0x80</span>            <span class="token comment">;call kernel</span>

<span class="token keyword">section .data</span>
achar db <span class="token string">'5'</span> 
</code></pre></div><p>结果：</p> <div class="language-tex extra-class"><pre class="language-tex"><code>56789:;&lt;=&gt;?@ABCDEFGH
</code></pre></div><h2 id="递归"><a href="#递归" class="header-anchor">#</a> 递归</h2> <p>递归过程是一个调用自身的过程。</p> <p>上一个示例中我们使用到了 call 指令； call 指令表示执行一段代码，需要ret 配合返回并继续执行后续代码</p> <h3 id="递归-2"><a href="#递归-2" class="header-anchor">#</a> 递归</h3> <p>示例：直接递归（方法内调用自己）</p> <p>3阶乘c示意代码：</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> a<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span>b<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>

fun mul_fun <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// 结束</span>
	b<span class="token operator">--</span><span class="token punctuation">;</span>
	a <span class="token operator">=</span> a<span class="token operator">*</span>b<span class="token punctuation">;</span>
	<span class="token function">mul_fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>汇编示例：</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token keyword">section .text</span>
   <span class="token keyword">global _start      </span>
        
<span class="token label function">_start:</span>               

   mov <span class="token register variable">bx</span>, <span class="token number">3</span>
	 mov <span class="token register variable">ax</span>, <span class="token number">3</span>
   call  mul_fun

<span class="token label function">mul_fun:</span> <span class="token comment">;阶乘递归</span>
    cmp   <span class="token register variable">bl</span>, <span class="token number">1</span>
    JLE	  p_total <span class="token comment">;&lt;= 1时结束，跳转到打印方法</span>
    dec <span class="token register variable">bl</span>
    mul <span class="token register variable">bl</span> <span class="token comment">;ax = al * bl</span>
    call mul_fun
        
<span class="token label function">p_total:</span> <span class="token comment">;打印</span>
   add   <span class="token register variable">ax</span>, <span class="token number">30h</span>
   mov  <span class="token operator">[</span>fact<span class="token operator">]</span>, <span class="token register variable">ax</span>
   
   mov    <span class="token register variable">edx</span>,<span class="token number">1</span>            <span class="token comment">;message length</span>
   mov    <span class="token register variable">ecx</span>,fact       <span class="token comment">;message to write</span>
   mov    <span class="token register variable">ebx</span>,<span class="token number">1</span>          <span class="token comment">;file descriptor (stdout)</span>
   mov    <span class="token register variable">eax</span>,<span class="token number">4</span>          <span class="token comment">;system call number (sys_write)</span>
   int    <span class="token number">0x80</span>           <span class="token comment">;call kernel</span>
    
   mov    <span class="token register variable">eax</span>,<span class="token number">1</span>          <span class="token comment">;system call number (sys_exit)</span>
   int    <span class="token number">0x80</span>           <span class="token comment">;call kernel</span>

<span class="token keyword">section .bss</span>
fact resb <span class="token number">1</span>
</code></pre></div><p>结果：</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token number">6</span>
</code></pre></div></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/e62c69/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">intel-32基础语法(中)</div></a> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/e62c69/" class="prev">intel-32基础语法(中)</a></span> <!----></p></div></div></div> <!----></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> <!----></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.956f6e98.js" defer></script><script src="/assets/js/2.d54d51d6.js" defer></script><script src="/assets/js/93.1d548ae4.js" defer></script>
  </body>
</html>
