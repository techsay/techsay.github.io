<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Socket | 知识导图</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/images/logo.PNG">
    <meta name="description" content="复杂的知识体系需要一套精简的知识导图作参考和索引">
    
    <link rel="preload" href="/assets/css/0.styles.f55df645.css" as="style"><link rel="preload" href="/assets/js/app.106733fc.js" as="script"><link rel="preload" href="/assets/js/2.d54d51d6.js" as="script"><link rel="preload" href="/assets/js/37.e817d0de.js" as="script"><link rel="prefetch" href="/assets/js/10.615d3423.js"><link rel="prefetch" href="/assets/js/11.94dc8a54.js"><link rel="prefetch" href="/assets/js/12.00e9bdb4.js"><link rel="prefetch" href="/assets/js/13.8d97213a.js"><link rel="prefetch" href="/assets/js/14.3864ca76.js"><link rel="prefetch" href="/assets/js/15.accf01d6.js"><link rel="prefetch" href="/assets/js/16.ea689f78.js"><link rel="prefetch" href="/assets/js/17.b5087c46.js"><link rel="prefetch" href="/assets/js/18.17c361c7.js"><link rel="prefetch" href="/assets/js/19.15e1939b.js"><link rel="prefetch" href="/assets/js/20.6354eeb1.js"><link rel="prefetch" href="/assets/js/21.592bbe59.js"><link rel="prefetch" href="/assets/js/22.baefef60.js"><link rel="prefetch" href="/assets/js/23.eea2f134.js"><link rel="prefetch" href="/assets/js/24.a42ee91b.js"><link rel="prefetch" href="/assets/js/25.632d40b8.js"><link rel="prefetch" href="/assets/js/26.03f61e05.js"><link rel="prefetch" href="/assets/js/27.675cdb00.js"><link rel="prefetch" href="/assets/js/28.c71f53d9.js"><link rel="prefetch" href="/assets/js/29.d87a2e71.js"><link rel="prefetch" href="/assets/js/3.ab8dae5c.js"><link rel="prefetch" href="/assets/js/30.0b558aad.js"><link rel="prefetch" href="/assets/js/31.67451f2e.js"><link rel="prefetch" href="/assets/js/32.869040a2.js"><link rel="prefetch" href="/assets/js/33.f95e4095.js"><link rel="prefetch" href="/assets/js/34.d24d1e65.js"><link rel="prefetch" href="/assets/js/35.2378132d.js"><link rel="prefetch" href="/assets/js/36.f8e8848d.js"><link rel="prefetch" href="/assets/js/38.7bdfda84.js"><link rel="prefetch" href="/assets/js/39.16d4b982.js"><link rel="prefetch" href="/assets/js/4.dd3209f8.js"><link rel="prefetch" href="/assets/js/40.013887ba.js"><link rel="prefetch" href="/assets/js/41.e1956824.js"><link rel="prefetch" href="/assets/js/42.7d40562d.js"><link rel="prefetch" href="/assets/js/43.0475397d.js"><link rel="prefetch" href="/assets/js/44.010841e9.js"><link rel="prefetch" href="/assets/js/45.1bdca865.js"><link rel="prefetch" href="/assets/js/46.a76a4840.js"><link rel="prefetch" href="/assets/js/47.86d4e991.js"><link rel="prefetch" href="/assets/js/48.bd79ad37.js"><link rel="prefetch" href="/assets/js/49.7327a141.js"><link rel="prefetch" href="/assets/js/5.4061c7b2.js"><link rel="prefetch" href="/assets/js/50.a59e1e5c.js"><link rel="prefetch" href="/assets/js/51.d6e1da9d.js"><link rel="prefetch" href="/assets/js/52.13e78d7d.js"><link rel="prefetch" href="/assets/js/53.55775557.js"><link rel="prefetch" href="/assets/js/54.8f04fd00.js"><link rel="prefetch" href="/assets/js/55.b4365d4b.js"><link rel="prefetch" href="/assets/js/56.45b487b5.js"><link rel="prefetch" href="/assets/js/57.56a8dfa3.js"><link rel="prefetch" href="/assets/js/58.137e5c6c.js"><link rel="prefetch" href="/assets/js/59.329b25ab.js"><link rel="prefetch" href="/assets/js/6.89d63062.js"><link rel="prefetch" href="/assets/js/60.fcf90991.js"><link rel="prefetch" href="/assets/js/61.70cd335e.js"><link rel="prefetch" href="/assets/js/62.1cf32bf6.js"><link rel="prefetch" href="/assets/js/63.a259b0e9.js"><link rel="prefetch" href="/assets/js/64.021b754d.js"><link rel="prefetch" href="/assets/js/65.73d288ae.js"><link rel="prefetch" href="/assets/js/66.9d7bfa4d.js"><link rel="prefetch" href="/assets/js/67.c942bf89.js"><link rel="prefetch" href="/assets/js/68.e0621228.js"><link rel="prefetch" href="/assets/js/69.c44ed0b0.js"><link rel="prefetch" href="/assets/js/7.0db51838.js"><link rel="prefetch" href="/assets/js/70.4123300d.js"><link rel="prefetch" href="/assets/js/71.54bc27a3.js"><link rel="prefetch" href="/assets/js/72.10ac95dd.js"><link rel="prefetch" href="/assets/js/73.f3591f46.js"><link rel="prefetch" href="/assets/js/74.a619d656.js"><link rel="prefetch" href="/assets/js/75.d3259754.js"><link rel="prefetch" href="/assets/js/76.63c8e003.js"><link rel="prefetch" href="/assets/js/77.de254bd3.js"><link rel="prefetch" href="/assets/js/78.3ba71495.js"><link rel="prefetch" href="/assets/js/79.3b4a8dbc.js"><link rel="prefetch" href="/assets/js/8.deaf7e13.js"><link rel="prefetch" href="/assets/js/80.01bce961.js"><link rel="prefetch" href="/assets/js/81.17969c01.js"><link rel="prefetch" href="/assets/js/82.75f84cb7.js"><link rel="prefetch" href="/assets/js/83.04dce5f4.js"><link rel="prefetch" href="/assets/js/84.6e0f7729.js"><link rel="prefetch" href="/assets/js/9.97f70a04.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f55df645.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/logo.PNG" alt="知识导图" class="logo"> <span class="site-name can-hide">知识导图</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/3468b2/" class="nav-link">iOS知识</a></div><div class="nav-item"><a href="/pages/603316/" class="nav-link">计算机软件</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友情链接" class="dropdown-title"><!----> <span class="title" style="display:;">友情链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.52im.net/index.php" target="_blank" rel="noopener noreferrer" class="nav-link external">
  即时通讯网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://zhuanlan.zhihu.com/p/409277420" target="_blank" rel="noopener noreferrer" class="nav-link external">
  开发常用网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/3468b2/" class="nav-link">iOS知识</a></div><div class="nav-item"><a href="/pages/603316/" class="nav-link">计算机软件</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友情链接" class="dropdown-title"><!----> <span class="title" style="display:;">友情链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.52im.net/index.php" target="_blank" rel="noopener noreferrer" class="nav-link external">
  即时通讯网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://zhuanlan.zhihu.com/p/409277420" target="_blank" rel="noopener noreferrer" class="nav-link external">
  开发常用网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iOS开发-上篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>iOS开发-中篇</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/1a2531/" class="sidebar-link">KVO</a></li><li><a href="/pages/a8479d/" class="sidebar-link">Block</a></li><li><a href="/pages/be70e9/" class="sidebar-link">GCD</a></li><li><a href="/pages/f56bb5/" class="sidebar-link">NSNotification</a></li><li><a href="/pages/e01d5e/" class="sidebar-link">Delegate</a></li><li><a href="/pages/c0a875/" aria-current="page" class="active sidebar-link">Socket</a></li><li><a href="/pages/44385c/" class="sidebar-link">随笔</a></li><li><a href="/pages/ce0242/" class="sidebar-link">Bug收集分析</a></li><li><a href="/pages/1b1e3b/" class="sidebar-link">内存</a></li><li><a href="/pages/073276/" class="sidebar-link">内存管理</a></li><li><a href="/pages/aaad5a/" class="sidebar-link">锁</a></li><li><a href="/pages/2e933e/" class="sidebar-link">多线程-锁</a></li><li><a href="/pages/4c1594/" class="sidebar-link">数据库多线程</a></li><li><a href="/pages/4abadf/" class="sidebar-link">数据存储</a></li><li><a href="/pages/59f72f/" class="sidebar-link">响应链</a></li><li><a href="/pages/b72c04/" class="sidebar-link">设计模式</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iOS开发-下篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iOS开发-三方库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iOS开发-工具</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>iOS开发</span></li><li data-v-06225672><span data-v-06225672>iOS开发-中篇</span></li></ul> <div class="info" data-v-06225672><!----> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-05-14</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><!----> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Socket<!----></h1> <!----> <div class="theme-vdoing-content content__default"><html><head><meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>iOS开发-中篇-2022</title> <style>
        body{
            margin: 0;
        }
        #content-info{
            width: auto;
            margin: 0 auto;
            text-align: center;
        }
        #author-info{
            white-space: nowrap;
            text-overflow: ellipsis;
            overflow: hidden;
        }
        #title{
            text-overflow: ellipsis;
            white-space: nowrap;
            overflow: hidden;
            padding-top: 10px;
            margin-bottom: 2px;
            font-size: 34px;
            color: #505050;
        }
        .text{
            white-space:nowrap;
            text-overflow: ellipsis;
            display: inline-block;
            margin-right: 20px;
            margin-bottom: 2px;
            font-size: 20px;
            color: #8c8c8c;
        }
        #navBar{
            width: auto;
            height: auto;
            position: fixed;
            right:0;
            bottom: 0;
            background-color: #f0f3f4;
            overflow-y: auto;
            text-align: center;
        }
        #svg-container{
            width: 100%;
            overflow-x: scroll;
            min-width: 0px;
            margin: 0 10px;
            overflow: visible;
            position: relative;
        }
        #nav-thumbs{
            overflow-y: scroll;
            padding: 0 5px;
        }
        .nav-thumb{
            position: relative;
            margin: 10px auto;
        }
        .nav-thumb &gt;p{
            text-align: center;
            font-size: 12px;
            margin: 4px 0 0 0;
        }
        .nav-thumb &gt;div{
            position: relative;
            display: inline-block;
            border: 1px solid #c6cfd5;
        }
        .nav-thumb img{
            display: block;
        }
        #main-content{
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #ffffff;
            display: flex;
            height: auto;
            flex-flow: row wrap;
            text-align:center;
        }
        #svg-container &gt;svg{
            overflow: visible;
            display: block;
            margin:5px auto;
            margin-bottom: 5px;
        }
        #copyright{
            bottom: 0;
            left: 50%;
            margin: 5px auto;
            font-size: 16px;
            color: #515151;
        }
        #copyright &gt;a{
            text-decoration: none;
            color: #77C;
        }
        .number{
            position: absolute;
            top:0;
            left:0;
            border-top:22px solid #08a1ef;
            border-right: 22px solid transparent;
        }
        .pagenum{
            font-size: 12px;
            color: #fff;
            position: absolute;
            top: -23px;
            left: 2px;
        }
            #navBar::-webkit-scrollbar{
            width: 8px;
            background-color: #f5f5f5;
        }
            #navBar::-webkit-scrollbar-track{
            -webkit-box-shadow: inset 0 0 4px rgba(0,0,0,.3);
            border-radius: 8px;
            background-color: #fff;
        }
            #navBar::-webkit-scrollbar-thumb{
            border-radius: 8px;
            -webkit-box-shadow: inset 0 0 4px rgba(0,0,0,.3);
            background-color: #6b6b70;
        }
        #navBar::-webkit-scrollbar-thumb:hover{
            background-color: #4a4a4f;
        }
</style></head> <body><div id="main-area"><div id="main-content"><div id="svg-container"><svg preserveAspectRadio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events" id="page20" width="939" viewBox="0 0 939 9040" xmlns:ed="https://www.edrawsoft.cn/xml/2017/SVGExtensions/" height="9117" ed:name="socket" ed:hSpacing="30" ed:vSpacing="30"><style type="text/css">&lt;![CDATA[
g[ed\:togtopicid],g[ed\:hyperlink],g[ed\:comment],g[ed\:note] {cursor:pointer;}
g[id] {-moz-user-select: none;-ms-user-select: none;user-select: none;}
svg text::selection,svg tspan::selection{background-color: #4285f4;color: #ffffff;fill: #ffffff;}
.st57 {fill:#141414;font-family:Open Sans;font-size:10.5pt}
.st55 {fill:#4caf50;font-family:Open Sans;font-size:27pt;font-weight:bold}
.st56 {fill:#ffffff;font-family:Open Sans;font-size:13.5pt}
]]&gt;</style> <defs></defs> <rect x="0" fill="#ffffff" width="939" y="0" height="9117"></rect> <path d="M8,0L441.5,0C446.9,0,449.5,2.6,449.5,8L449.5,314C449.5,319.4,446.9,322,441.5,322L8,322C2.6,322,0,319.4,0,314L0,8C0,2.6,2.6,0,8,0z" transform="matrix(1,0,0,1,209.2,6356.25)" ed:type="boundary" ed:idlist="386" fill="#4caf50" stroke-width="2" stroke-dasharray="5,2" id="382" fill-opacity="0.2" stroke-linejoin="round" stroke="#4caf50" ed:parentid="386"></path> <path d="M8,0L523,0C528.4,0,531,2.6,531,8L531,813C531,818.4,528.4,821,523,821L8,821C2.6,821,0,818.4,0,813L0,8C0,2.6,2.6,0,8,0z" transform="matrix(1,0,0,1,209.2,6688)" ed:type="boundary" ed:idlist="388" fill="#4caf50" stroke-width="2" stroke-dasharray="5,2" id="383" fill-opacity="0.2" stroke-linejoin="round" stroke="#4caf50" ed:parentid="388"></path> <path d="M8,0L523,0C528.4,0,531,2.6,531,8L531,919C531,924.4,528.4,927,523,927L8,927C2.6,927,0,924.4,0,919L0,8C0,2.6,2.6,0,8,0z" transform="matrix(1,0,0,1,209.2,7552.5)" ed:type="boundary" ed:idlist="392" fill="#4caf50" stroke-width="2" stroke-dasharray="5,2" id="384" fill-opacity="0.2" stroke-linejoin="round" stroke="#4caf50" ed:parentid="392"></path> <path d="M8,0L523,0C528.4,0,531,2.6,531,8L531,552C531,557.4,528.4,560,523,560L8,560C2.6,560,0,557.4,0,552L0,8C0,2.6,2.6,0,8,0z" transform="matrix(1,0,0,1,209.2,8523)" ed:type="boundary" ed:idlist="396" fill="#4caf50" stroke-width="2" stroke-dasharray="5,2" id="385" fill-opacity="0.2" stroke-linejoin="round" stroke="#4caf50" ed:parentid="396"></path> <path stroke-linecap="round" d="M-25.2,-26.5L-25.2,20.5C-25.2,23.8,-22.5,26.5,-19.2,26.5L25.2,26.5" transform="matrix(1,0,0,1,83.2,187.5)" fill="none" stroke-width="3" id="123" ed:tosuperid="122" stroke-linejoin="round" stroke="#4caf50" ed:parentid="121"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9" transform="matrix(1,0,0,1,152.85,244.88)" fill="none" stroke-width="3" id="125" ed:tosuperid="124" stroke-linejoin="round" stroke="#4caf50" ed:parentid="122"></path> <path stroke-linecap="round" d="M-9.5,-47.8L-9.5,41.8C-9.5,45.1,-6.8,47.8,-3.5,47.8L9.5,47.8" transform="matrix(1,0,0,1,152.85,281.75)" fill="none" stroke-width="3" id="127" ed:tosuperid="126" stroke-linejoin="round" stroke="#4caf50" ed:parentid="122"></path> <path stroke-linecap="round" d="M-9.5,-84.6L-9.5,78.6C-9.5,81.9,-6.8,84.6,-3.5,84.6L9.5,84.6" transform="matrix(1,0,0,1,152.85,318.63)" fill="none" stroke-width="3" id="129" ed:tosuperid="128" stroke-linejoin="round" stroke="#4caf50" ed:parentid="122"></path> <path stroke-linecap="round" d="M-9.5,-101.5L-9.5,95.5C-9.5,98.8,-6.8,101.5,-3.5,101.5L9.5,101.5" transform="matrix(1,0,0,1,152.85,335.5)" fill="none" stroke-width="3" id="131" ed:tosuperid="130" stroke-linejoin="round" stroke="#4caf50" ed:parentid="122"></path> <path stroke-linecap="round" d="M-25.2,-170.5L-25.2,164.5C-25.2,167.8,-22.5,170.5,-19.2,170.5L25.2,170.5" transform="matrix(1,0,0,1,83.2,331.5)" fill="none" stroke-width="3" id="133" ed:tosuperid="132" stroke-linejoin="round" stroke="#4caf50" ed:parentid="121"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9" transform="matrix(1,0,0,1,152.85,532.88)" fill="none" stroke-width="3" id="135" ed:tosuperid="134" stroke-linejoin="round" stroke="#4caf50" ed:parentid="132"></path> <path stroke-linecap="round" d="M-9.4,-15.9L-9.4,9.9C-9.4,13.2,-6.8,15.9,-3.4,15.9L9.5,15.9" transform="matrix(1,0,0,1,206.75,571.63)" fill="none" stroke-width="3" id="137" ed:tosuperid="136" stroke-linejoin="round" stroke="#4caf50" ed:parentid="134"></path> <path stroke-linecap="round" d="M-9.5,-69.6L-9.5,63.6C-9.5,66.9,-6.8,69.6,-3.5,69.6L9.5,69.6" transform="matrix(1,0,0,1,152.85,591.63)" fill="none" stroke-width="3" id="139" ed:tosuperid="138" stroke-linejoin="round" stroke="#4caf50" ed:parentid="132"></path> <path stroke-linecap="round" d="M-9.5,-101.5L-9.5,95.5C-9.5,98.8,-6.8,101.5,-3.5,101.5L9.5,101.5" transform="matrix(1,0,0,1,152.85,623.5)" fill="none" stroke-width="3" id="141" ed:tosuperid="140" stroke-linejoin="round" stroke="#4caf50" ed:parentid="132"></path> <path stroke-linecap="round" d="M-9.5,-129.8L-9.5,123.8C-9.5,127.1,-6.8,129.8,-3.5,129.8L9.5,129.8" transform="matrix(1,0,0,1,152.85,651.81)" fill="none" stroke-width="3" id="143" ed:tosuperid="142" stroke-linejoin="round" stroke="#4caf50" ed:parentid="132"></path> <path stroke-linecap="round" d="M-13.5,11.4L0,11.4L0,-5.4C0,-8.7,2.7,-11.4,6,-11.4L13.5,-11.4" transform="matrix(1,0,0,1,396,770.19)" fill="none" stroke-width="3" id="145" ed:tosuperid="144" stroke-linejoin="round" stroke="#4caf50" ed:parentid="142"></path> <path stroke-linecap="round" d="M-13.5,0L0,0C0,0,2.7,0,6,0L13.5,0" transform="matrix(1,0,0,1,513.27,758.75)" fill="none" stroke-width="3" id="147" ed:tosuperid="146" stroke-linejoin="round" stroke="#4caf50" ed:parentid="144"></path> <path stroke-linecap="round" d="M0,-11.4L0,5.4C0,8.7,2.7,11.4,6,11.4L13.5,11.4" transform="matrix(1,0,0,1,396,793.06)" fill="none" stroke-width="3" id="149" ed:tosuperid="148" stroke-linejoin="round" stroke="#4caf50" ed:parentid="142"></path> <path stroke-linecap="round" d="M-13.5,7.6L0,7.6L0,-1.6C0,-4.9,2.7,-7.6,6,-7.6L13.5,-7.6" transform="matrix(1,0,0,1,529.35,796.88)" fill="none" stroke-width="3" id="151" ed:tosuperid="150" stroke-linejoin="round" stroke="#4caf50" ed:parentid="148"></path> <path stroke-linecap="round" d="M0,-7.6L0,1.6C0,4.9,2.7,7.6,6,7.6L13.5,7.6" transform="matrix(1,0,0,1,529.35,812.13)" fill="none" stroke-width="3" id="153" ed:tosuperid="152" stroke-linejoin="round" stroke="#4caf50" ed:parentid="148"></path> <path stroke-linecap="round" d="M-9.5,-170.8L-9.5,164.8C-9.5,168.1,-6.8,170.8,-3.5,170.8L9.5,170.8" transform="matrix(1,0,0,1,152.85,692.75)" fill="none" stroke-width="3" id="155" ed:tosuperid="154" stroke-linejoin="round" stroke="#4caf50" ed:parentid="132"></path> <path stroke-linecap="round" d="M-25.2,-388.8L-25.2,382.8C-25.2,386.1,-22.5,388.8,-19.2,388.8L25.2,388.8" transform="matrix(1,0,0,1,83.2,549.75)" fill="none" stroke-width="3" id="157" ed:tosuperid="156" stroke-linejoin="round" stroke="#4caf50" ed:parentid="121"></path> <path stroke-linecap="round" d="M-9.5,-20.9L-9.5,14.9C-9.5,18.2,-6.8,20.9,-3.5,20.9L9.5,20.9" transform="matrix(1,0,0,1,152.85,979.38)" fill="none" stroke-width="3" id="159" ed:tosuperid="158" stroke-linejoin="round" stroke="#4caf50" ed:parentid="156"></path> <path stroke-linecap="round" d="M-9.5,-52.8L-9.5,46.8C-9.5,50.1,-6.8,52.8,-3.5,52.8L9.5,52.8" transform="matrix(1,0,0,1,152.85,1011.25)" fill="none" stroke-width="3" id="161" ed:tosuperid="160" stroke-linejoin="round" stroke="#4caf50" ed:parentid="156"></path> <path stroke-linecap="round" d="M-9.4,-15.9L-9.4,9.9C-9.4,13.2,-6.8,15.9,-3.4,15.9L9.5,15.9" transform="matrix(1,0,0,1,206.75,1101.88)" fill="none" stroke-width="3" id="163" ed:tosuperid="162" stroke-linejoin="round" stroke="#4caf50" ed:parentid="160"></path> <path stroke-linecap="round" d="M-9.5,-101.8L-9.5,95.8C-9.5,99.1,-6.8,101.8,-3.5,101.8L9.5,101.8" transform="matrix(1,0,0,1,152.85,1060.25)" fill="none" stroke-width="3" id="165" ed:tosuperid="164" stroke-linejoin="round" stroke="#4caf50" ed:parentid="156"></path> <path stroke-linecap="round" d="M-9.5,-118.9L-9.5,112.9C-9.5,116.2,-6.8,118.9,-3.5,118.9L9.5,118.9" transform="matrix(1,0,0,1,152.85,1077.38)" fill="none" stroke-width="3" id="167" ed:tosuperid="166" stroke-linejoin="round" stroke="#4caf50" ed:parentid="156"></path> <path stroke-linecap="round" d="M-9.4,-10.9L-9.4,4.9C-9.4,8.2,-6.8,10.9,-3.4,10.9L9.5,10.9" transform="matrix(1,0,0,1,195.88,1219.13)" fill="none" stroke-width="3" id="169" ed:tosuperid="168" stroke-linejoin="round" stroke="#4caf50" ed:parentid="166"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9" transform="matrix(1,0,0,1,249.78,1252.88)" fill="none" stroke-width="3" id="171" ed:tosuperid="170" stroke-linejoin="round" stroke="#4caf50" ed:parentid="168"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.4,10.9" transform="matrix(1,0,0,1,303.68,1286.63)" fill="none" stroke-width="3" id="173" ed:tosuperid="172" stroke-linejoin="round" stroke="#4caf50" ed:parentid="170"></path> <path stroke-linecap="round" d="M-9.5,-44.6L-9.5,38.6C-9.5,41.9,-6.8,44.6,-3.5,44.6L9.5,44.6" transform="matrix(1,0,0,1,249.78,1286.63)" fill="none" stroke-width="3" id="175" ed:tosuperid="174" stroke-linejoin="round" stroke="#4caf50" ed:parentid="168"></path> <path stroke-linecap="round" d="M-9.5,-61.5L-9.5,55.5C-9.5,58.8,-6.8,61.5,-3.5,61.5L9.5,61.5" transform="matrix(1,0,0,1,249.78,1303.5)" fill="none" stroke-width="3" id="177" ed:tosuperid="176" stroke-linejoin="round" stroke="#4caf50" ed:parentid="168"></path> <path stroke-linecap="round" d="M-9.4,-95.3L-9.4,89.3C-9.4,92.6,-6.8,95.3,-3.4,95.3L9.5,95.3" transform="matrix(1,0,0,1,195.88,1303.5)" fill="none" stroke-width="3" id="179" ed:tosuperid="178" stroke-linejoin="round" stroke="#4caf50" ed:parentid="166"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9" transform="matrix(1,0,0,1,249.78,1421.63)" fill="none" stroke-width="3" id="181" ed:tosuperid="180" stroke-linejoin="round" stroke="#4caf50" ed:parentid="178"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.4,10.9" transform="matrix(1,0,0,1,303.68,1455.38)" fill="none" stroke-width="3" id="183" ed:tosuperid="182" stroke-linejoin="round" stroke="#4caf50" ed:parentid="180"></path> <path stroke-linecap="round" d="M-9.5,-27.8L-9.5,21.8C-9.5,25.1,-6.8,27.8,-3.5,27.8L9.4,27.8" transform="matrix(1,0,0,1,303.68,1472.25)" fill="none" stroke-width="3" id="185" ed:tosuperid="184" stroke-linejoin="round" stroke="#4caf50" ed:parentid="180"></path> <path stroke-linecap="round" d="M-9.5,-49.6L-9.5,43.6C-9.5,46.9,-6.8,49.6,-3.5,49.6L9.4,49.6" transform="matrix(1,0,0,1,303.68,1494.13)" fill="none" stroke-width="3" id="187" ed:tosuperid="186" stroke-linejoin="round" stroke="#4caf50" ed:parentid="180"></path> <path stroke-linecap="round" d="M-9.5,-88.4L-9.5,82.4C-9.5,85.7,-6.8,88.4,-3.5,88.4L9.5,88.4" transform="matrix(1,0,0,1,249.78,1499.13)" fill="none" stroke-width="3" id="189" ed:tosuperid="188" stroke-linejoin="round" stroke="#4caf50" ed:parentid="178"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.4,10.9" transform="matrix(1,0,0,1,297.6,1610.38)" fill="none" stroke-width="3" id="191" ed:tosuperid="190" stroke-linejoin="round" stroke="#4caf50" ed:parentid="188"></path> <path stroke-linecap="round" d="M-9.5,-27.8L-9.5,21.8C-9.5,25.1,-6.8,27.8,-3.5,27.8L9.4,27.8" transform="matrix(1,0,0,1,297.6,1627.25)" fill="none" stroke-width="3" id="193" ed:tosuperid="192" stroke-linejoin="round" stroke="#4caf50" ed:parentid="188"></path> <path stroke-linecap="round" d="M-9.4,-240.3L-9.4,234.3C-9.4,237.6,-6.8,240.3,-3.4,240.3L9.5,240.3" transform="matrix(1,0,0,1,195.88,1448.5)" fill="none" stroke-width="3" id="195" ed:tosuperid="194" stroke-linejoin="round" stroke="#4caf50" ed:parentid="166"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9" transform="matrix(1,0,0,1,249.78,1711.63)" fill="none" stroke-width="3" id="197" ed:tosuperid="196" stroke-linejoin="round" stroke="#4caf50" ed:parentid="194"></path> <path stroke-linecap="round" d="M-9.5,-32.8L-9.5,26.8C-9.5,30.1,-6.8,32.8,-3.5,32.8L9.4,32.8" transform="matrix(1,0,0,1,249.78,1733.5)" fill="none" stroke-width="3" id="199" ed:tosuperid="198" stroke-linejoin="round" stroke="#4caf50" ed:parentid="194"></path> <path stroke-linecap="round" d="M-25.2,-840.1L-25.2,834.1C-25.2,837.4,-22.5,840.1,-19.2,840.1L25.2,840.1" transform="matrix(1,0,0,1,83.2,1001.13)" fill="none" stroke-width="3" id="201" ed:tosuperid="200" stroke-linejoin="round" stroke="#4caf50" ed:parentid="121"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9" transform="matrix(1,0,0,1,152.85,1872.13)" fill="none" stroke-width="3" id="203" ed:tosuperid="202" stroke-linejoin="round" stroke="#4caf50" ed:parentid="200"></path> <path stroke-linecap="round" d="M-9.4,-15.9L-9.4,9.9C-9.4,13.2,-6.8,15.9,-3.4,15.9L9.5,15.9" transform="matrix(1,0,0,1,206.75,1910.88)" fill="none" stroke-width="3" id="205" ed:tosuperid="204" stroke-linejoin="round" stroke="#4caf50" ed:parentid="202"></path> <path stroke-linecap="round" d="M-9.5,-54.6L-9.5,48.6C-9.5,51.9,-6.8,54.6,-3.5,54.6L9.5,54.6" transform="matrix(1,0,0,1,152.85,1915.88)" fill="none" stroke-width="3" id="207" ed:tosuperid="206" stroke-linejoin="round" stroke="#4caf50" ed:parentid="200"></path> <path stroke-linecap="round" d="M-9.4,-10.9L-9.4,4.9C-9.4,8.2,-6.8,10.9,-3.4,10.9L9.5,10.9" transform="matrix(1,0,0,1,206.75,1993.38)" fill="none" stroke-width="3" id="209" ed:tosuperid="208" stroke-linejoin="round" stroke="#4caf50" ed:parentid="206"></path> <path stroke-linecap="round" d="M-25.2,-954.1L-25.2,948.1C-25.2,951.4,-22.5,954.1,-19.2,954.1L25.2,954.1" transform="matrix(1,0,0,1,83.2,1115.13)" fill="none" stroke-width="3" id="211" ed:tosuperid="210" stroke-linejoin="round" stroke="#4caf50" ed:parentid="121"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9" transform="matrix(1,0,0,1,152.85,2100.13)" fill="none" stroke-width="3" id="213" ed:tosuperid="212" stroke-linejoin="round" stroke="#4caf50" ed:parentid="210"></path> <path stroke-linecap="round" d="M-9.4,-10.9L-9.4,4.9C-9.4,8.2,-6.8,10.9,-3.4,10.9L9.5,10.9" transform="matrix(1,0,0,1,206.75,2133.88)" fill="none" stroke-width="3" id="215" ed:tosuperid="214" stroke-linejoin="round" stroke="#4caf50" ed:parentid="212"></path> <path stroke-linecap="round" d="M-9.4,-27.8L-9.4,21.8C-9.4,25.1,-6.8,27.8,-3.4,27.8L9.5,27.8" transform="matrix(1,0,0,1,206.75,2150.75)" fill="none" stroke-width="3" id="217" ed:tosuperid="216" stroke-linejoin="round" stroke="#4caf50" ed:parentid="212"></path> <path stroke-linecap="round" d="M-25.2,-1041.3L-25.2,1035.3C-25.2,1038.6,-22.5,1041.3,-19.2,1041.3L25.2,1041.3" transform="matrix(1,0,0,1,83.2,1202.25)" fill="none" stroke-width="3" id="219" ed:tosuperid="218" stroke-linejoin="round" stroke="#4caf50" ed:parentid="121"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9" transform="matrix(1,0,0,1,152.85,2274.38)" fill="none" stroke-width="3" id="221" ed:tosuperid="220" stroke-linejoin="round" stroke="#4caf50" ed:parentid="218"></path> <path stroke-linecap="round" d="M-9.4,-10.9L-9.4,4.9C-9.4,8.2,-6.8,10.9,-3.4,10.9L9.5,10.9" transform="matrix(1,0,0,1,206.75,2308.13)" fill="none" stroke-width="3" id="223" ed:tosuperid="222" stroke-linejoin="round" stroke="#4caf50" ed:parentid="220"></path> <path stroke-linecap="round" d="M-9.5,-15.9L-9.5,9.9C-9.5,13.2,-6.8,15.9,-3.5,15.9L9.4,15.9" transform="matrix(1,0,0,1,260.65,2346.88)" fill="none" stroke-width="3" id="225" ed:tosuperid="224" stroke-linejoin="round" stroke="#4caf50" ed:parentid="222"></path> <path stroke-linecap="round" d="M-9.4,-54.6L-9.4,48.6C-9.4,51.9,-6.8,54.6,-3.4,54.6L9.5,54.6" transform="matrix(1,0,0,1,206.75,2351.88)" fill="none" stroke-width="3" id="227" ed:tosuperid="226" stroke-linejoin="round" stroke="#4caf50" ed:parentid="220"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9" transform="matrix(1,0,0,1,260.65,2429.38)" fill="none" stroke-width="3" id="229" ed:tosuperid="228" stroke-linejoin="round" stroke="#4caf50" ed:parentid="226"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.4,10.9" transform="matrix(1,0,0,1,314.55,2463.13)" fill="none" stroke-width="3" id="231" ed:tosuperid="230" stroke-linejoin="round" stroke="#4caf50" ed:parentid="228"></path> <path stroke-linecap="round" d="M-9.5,-27.8L-9.5,21.8C-9.5,25.1,-6.8,27.8,-3.5,27.8L9.4,27.8" transform="matrix(1,0,0,1,314.55,2480)" fill="none" stroke-width="3" id="233" ed:tosuperid="232" stroke-linejoin="round" stroke="#4caf50" ed:parentid="228"></path> <path stroke-linecap="round" d="M-9.5,-139L-9.5,133C-9.5,136.3,-6.8,139,-3.5,139L9.5,139" transform="matrix(1,0,0,1,152.85,2402.5)" fill="none" stroke-width="3" id="235" ed:tosuperid="234" stroke-linejoin="round" stroke="#4caf50" ed:parentid="218"></path> <path stroke-linecap="round" d="M-9.4,-10.9L-9.4,4.9C-9.4,8.2,-6.8,10.9,-3.4,10.9L9.5,10.9" transform="matrix(1,0,0,1,203.25,2564.38)" fill="none" stroke-width="3" id="237" ed:tosuperid="236" stroke-linejoin="round" stroke="#4caf50" ed:parentid="234"></path> <path stroke-linecap="round" d="M-25.2,-1239.6L-25.2,1233.6C-25.2,1236.9,-22.5,1239.6,-19.2,1239.6L25.2,1239.6" transform="matrix(1,0,0,1,83.2,1400.63)" fill="none" stroke-width="3" id="239" ed:tosuperid="238" stroke-linejoin="round" stroke="#4caf50" ed:parentid="121"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9" transform="matrix(1,0,0,1,152.85,2671.13)" fill="none" stroke-width="3" id="241" ed:tosuperid="240" stroke-linejoin="round" stroke="#4caf50" ed:parentid="238"></path> <path stroke-linecap="round" d="M-9.5,-27.8L-9.5,21.8C-9.5,25.1,-6.8,27.8,-3.5,27.8L9.5,27.8" transform="matrix(1,0,0,1,152.85,2688)" fill="none" stroke-width="3" id="243" ed:tosuperid="242" stroke-linejoin="round" stroke="#4caf50" ed:parentid="238"></path> <path stroke-linecap="round" d="M-9.4,-10.9L-9.4,4.9C-9.4,8.2,-6.8,10.9,-3.4,10.9L9.5,10.9" transform="matrix(1,0,0,1,206.75,2738.63)" fill="none" stroke-width="3" id="245" ed:tosuperid="244" stroke-linejoin="round" stroke="#4caf50" ed:parentid="242"></path> <path stroke-linecap="round" d="M-9.4,-27.8L-9.4,21.8C-9.4,25.1,-6.8,27.8,-3.4,27.8L9.5,27.8" transform="matrix(1,0,0,1,206.75,2755.5)" fill="none" stroke-width="3" id="247" ed:tosuperid="246" stroke-linejoin="round" stroke="#4caf50" ed:parentid="242"></path> <path stroke-linecap="round" d="M-9.5,-10.1L-9.5,4.1C-9.5,7.4,-6.8,10.1,-3.5,10.1L9.5,10.1" transform="matrix(1,0,0,1,260.65,2805.38)" fill="none" stroke-width="3" id="249" ed:tosuperid="248" stroke-linejoin="round" stroke="#4caf50" ed:parentid="246"></path> <path stroke-linecap="round" d="M-9.5,-26.3L-9.5,20.3C-9.5,23.6,-6.8,26.3,-3.5,26.3L9.5,26.3" transform="matrix(1,0,0,1,260.65,2821.5)" fill="none" stroke-width="3" id="251" ed:tosuperid="250" stroke-linejoin="round" stroke="#4caf50" ed:parentid="246"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.4,10.9" transform="matrix(1,0,0,1,308.47,2870.63)" fill="none" stroke-width="3" id="253" ed:tosuperid="252" stroke-linejoin="round" stroke="#4caf50" ed:parentid="250"></path> <path stroke-linecap="round" d="M-9.5,-32.8L-9.5,26.8C-9.5,30.1,-6.8,32.8,-3.5,32.8L9.4,32.8" transform="matrix(1,0,0,1,308.47,2892.5)" fill="none" stroke-width="3" id="255" ed:tosuperid="254" stroke-linejoin="round" stroke="#4caf50" ed:parentid="250"></path> <path stroke-linecap="round" d="M-9.5,-54.6L-9.5,48.6C-9.5,51.9,-6.8,54.6,-3.5,54.6L9.4,54.6" transform="matrix(1,0,0,1,308.47,2914.38)" fill="none" stroke-width="3" id="257" ed:tosuperid="256" stroke-linejoin="round" stroke="#4caf50" ed:parentid="250"></path> <path stroke-linecap="round" d="M-9.4,-137.5L-9.4,131.5C-9.4,134.8,-6.8,137.5,-3.4,137.5L9.5,137.5" transform="matrix(1,0,0,1,206.75,2865.25)" fill="none" stroke-width="3" id="259" ed:tosuperid="258" stroke-linejoin="round" stroke="#4caf50" ed:parentid="242"></path> <path stroke-linecap="round" d="M-9.4,-154.4L-9.4,148.4C-9.4,151.7,-6.8,154.4,-3.4,154.4L9.5,154.4" transform="matrix(1,0,0,1,206.75,2882.13)" fill="none" stroke-width="3" id="261" ed:tosuperid="260" stroke-linejoin="round" stroke="#4caf50" ed:parentid="242"></path> <path stroke-linecap="round" d="M-9.5,-15.9L-9.5,9.9C-9.5,13.2,-6.8,15.9,-3.5,15.9L9.4,15.9" transform="matrix(1,0,0,1,260.65,3064.38)" fill="none" stroke-width="3" id="263" ed:tosuperid="262" stroke-linejoin="round" stroke="#4caf50" ed:parentid="260"></path> <path stroke-linecap="round" d="M-9.5,-37L-9.5,31C-9.5,34.3,-6.8,37,-3.5,37L9.5,37" transform="matrix(1,0,0,1,260.65,3085.5)" fill="none" stroke-width="3" id="265" ed:tosuperid="264" stroke-linejoin="round" stroke="#4caf50" ed:parentid="260"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.4,10.9" transform="matrix(1,0,0,1,314.55,3143.88)" fill="none" stroke-width="3" id="267" ed:tosuperid="266" stroke-linejoin="round" stroke="#4caf50" ed:parentid="264"></path> <path stroke-linecap="round" d="M-9.5,-27.8L-9.5,21.8C-9.5,25.1,-6.8,27.8,-3.5,27.8L9.4,27.8" transform="matrix(1,0,0,1,314.55,3160.75)" fill="none" stroke-width="3" id="269" ed:tosuperid="268" stroke-linejoin="round" stroke="#4caf50" ed:parentid="264"></path> <path stroke-linecap="round" d="M-9.5,-8.9L-9.5,2.9C-9.5,6.2,-6.8,8.9,-3.5,8.9L9.5,8.9" transform="matrix(1,0,0,1,368.45,3209.38)" fill="none" stroke-width="3" id="271" ed:tosuperid="270" stroke-linejoin="round" stroke="#4caf50" ed:parentid="268"></path> <path stroke-linecap="round" d="M-9.5,-99L-9.5,93C-9.5,96.3,-6.8,99,-3.5,99L9.5,99" transform="matrix(1,0,0,1,260.65,3147.5)" fill="none" stroke-width="3" id="273" ed:tosuperid="272" stroke-linejoin="round" stroke="#4caf50" ed:parentid="260"></path> <path stroke-linecap="round" d="M-9.5,-15.9L-9.5,9.9C-9.5,13.2,-6.8,15.9,-3.5,15.9L9.4,15.9" transform="matrix(1,0,0,1,314.55,3272.88)" fill="none" stroke-width="3" id="275" ed:tosuperid="274" stroke-linejoin="round" stroke="#4caf50" ed:parentid="272"></path> <path stroke-linecap="round" d="M-9.5,-142L-9.5,136C-9.5,139.3,-6.8,142,-3.5,142L9.5,142" transform="matrix(1,0,0,1,260.65,3190.5)" fill="none" stroke-width="3" id="277" ed:tosuperid="276" stroke-linejoin="round" stroke="#4caf50" ed:parentid="260"></path> <path stroke-linecap="round" d="M-9.5,-25.9L-9.5,19.9C-9.5,23.2,-6.8,25.9,-3.5,25.9L9.4,25.9" transform="matrix(1,0,0,1,314.55,3370.38)" fill="none" stroke-width="3" id="279" ed:tosuperid="278" stroke-linejoin="round" stroke="#4caf50" ed:parentid="276"></path> <path stroke-linecap="round" d="M-9.5,-205.8L-9.5,199.8C-9.5,203.1,-6.8,205.8,-3.5,205.8L9.5,205.8" transform="matrix(1,0,0,1,260.65,3254.25)" fill="none" stroke-width="3" id="281" ed:tosuperid="280" stroke-linejoin="round" stroke="#4caf50" ed:parentid="260"></path> <path stroke-linecap="round" d="M-9.5,-20.9L-9.5,14.9C-9.5,18.2,-6.8,20.9,-3.5,20.9L9.4,20.9" transform="matrix(1,0,0,1,314.55,3492.88)" fill="none" stroke-width="3" id="283" ed:tosuperid="282" stroke-linejoin="round" stroke="#4caf50" ed:parentid="280"></path> <path stroke-linecap="round" d="M-9.4,-419.9L-9.4,413.9C-9.4,417.2,-6.8,419.9,-3.4,419.9L9.5,419.9" transform="matrix(1,0,0,1,206.75,3147.63)" fill="none" stroke-width="3" id="285" ed:tosuperid="284" stroke-linejoin="round" stroke="#4caf50" ed:parentid="242"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.4,10.9" transform="matrix(1,0,0,1,260.65,3590.38)" fill="none" stroke-width="3" id="287" ed:tosuperid="286" stroke-linejoin="round" stroke="#4caf50" ed:parentid="284"></path> <path stroke-linecap="round" d="M-9.5,-27L-9.5,21C-9.5,24.3,-6.8,27,-3.5,27L9.4,27" transform="matrix(1,0,0,1,260.65,3606.5)" fill="none" stroke-width="3" id="289" ed:tosuperid="288" stroke-linejoin="round" stroke="#4caf50" ed:parentid="284"></path> <path stroke-linecap="round" d="M-9.5,-43.1L-9.5,37.1C-9.5,40.4,-6.8,43.1,-3.5,43.1L9.5,43.1" transform="matrix(1,0,0,1,260.65,3622.63)" fill="none" stroke-width="3" id="291" ed:tosuperid="290" stroke-linejoin="round" stroke="#4caf50" ed:parentid="284"></path> <path stroke-linecap="round" d="M-9.4,-485.9L-9.4,479.9C-9.4,483.2,-6.8,485.9,-3.4,485.9L9.5,485.9" transform="matrix(1,0,0,1,206.75,3213.63)" fill="none" stroke-width="3" id="293" ed:tosuperid="292" stroke-linejoin="round" stroke="#4caf50" ed:parentid="242"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.4,10.9" transform="matrix(1,0,0,1,260.65,3722.38)" fill="none" stroke-width="3" id="295" ed:tosuperid="294" stroke-linejoin="round" stroke="#4caf50" ed:parentid="292"></path> <path stroke-linecap="round" d="M-9.5,-42.8L-9.5,36.8C-9.5,40.1,-6.8,42.8,-3.5,42.8L9.4,42.8" transform="matrix(1,0,0,1,260.65,3754.25)" fill="none" stroke-width="3" id="297" ed:tosuperid="296" stroke-linejoin="round" stroke="#4caf50" ed:parentid="292"></path> <path stroke-linecap="round" d="M-9.5,-84.6L-9.5,78.6C-9.5,81.9,-6.8,84.6,-3.5,84.6L9.4,84.6" transform="matrix(1,0,0,1,260.65,3796.13)" fill="none" stroke-width="3" id="299" ed:tosuperid="298" stroke-linejoin="round" stroke="#4caf50" ed:parentid="292"></path> <path stroke-linecap="round" d="M-9.4,-603.4L-9.4,597.4C-9.4,600.7,-6.8,603.4,-3.4,603.4L9.5,603.4" transform="matrix(1,0,0,1,206.75,3331.13)" fill="none" stroke-width="3" id="301" ed:tosuperid="300" stroke-linejoin="round" stroke="#4caf50" ed:parentid="242"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9" transform="matrix(1,0,0,1,260.65,3957.38)" fill="none" stroke-width="3" id="303" ed:tosuperid="302" stroke-linejoin="round" stroke="#4caf50" ed:parentid="300"></path> <path stroke-linecap="round" d="M-9.5,-42.8L-9.5,36.8C-9.5,40.1,-6.8,42.8,-3.5,42.8L9.5,42.8" transform="matrix(1,0,0,1,260.65,3989.25)" fill="none" stroke-width="3" id="305" ed:tosuperid="304" stroke-linejoin="round" stroke="#4caf50" ed:parentid="300"></path> <path stroke-linecap="round" d="M-9.4,-684L-9.4,678C-9.4,681.3,-6.8,684,-3.4,684L9.5,684" transform="matrix(1,0,0,1,206.75,3411.75)" fill="none" stroke-width="3" id="307" ed:tosuperid="306" stroke-linejoin="round" stroke="#4caf50" ed:parentid="242"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9" transform="matrix(1,0,0,1,260.65,4118.63)" fill="none" stroke-width="3" id="309" ed:tosuperid="308" stroke-linejoin="round" stroke="#4caf50" ed:parentid="306"></path> <path stroke-linecap="round" d="M-9.5,-62.8L-9.5,56.8C-9.5,60.1,-6.8,62.8,-3.5,62.8L9.4,62.8" transform="matrix(1,0,0,1,260.65,4170.5)" fill="none" stroke-width="3" id="311" ed:tosuperid="310" stroke-linejoin="round" stroke="#4caf50" ed:parentid="306"></path> <path stroke-linecap="round" d="M-9.4,-804.6L-9.4,798.6C-9.4,801.9,-6.8,804.6,-3.4,804.6L9.5,804.6" transform="matrix(1,0,0,1,206.75,3532.38)" fill="none" stroke-width="3" id="313" ed:tosuperid="312" stroke-linejoin="round" stroke="#4caf50" ed:parentid="242"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9" transform="matrix(1,0,0,1,260.65,4359.88)" fill="none" stroke-width="3" id="315" ed:tosuperid="314" stroke-linejoin="round" stroke="#4caf50" ed:parentid="312"></path> <path stroke-linecap="round" d="M-9.5,-62.8L-9.5,56.8C-9.5,60.1,-6.8,62.8,-3.5,62.8L9.4,62.8" transform="matrix(1,0,0,1,260.65,4411.75)" fill="none" stroke-width="3" id="317" ed:tosuperid="316" stroke-linejoin="round" stroke="#4caf50" ed:parentid="312"></path> <path stroke-linecap="round" d="M-9.4,-925.3L-9.4,919.3C-9.4,922.6,-6.8,925.3,-3.4,925.3L9.5,925.3" transform="matrix(1,0,0,1,206.75,3653)" fill="none" stroke-width="3" id="319" ed:tosuperid="318" stroke-linejoin="round" stroke="#4caf50" ed:parentid="242"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9" transform="matrix(1,0,0,1,260.65,4601.13)" fill="none" stroke-width="3" id="321" ed:tosuperid="320" stroke-linejoin="round" stroke="#4caf50" ed:parentid="318"></path> <path stroke-linecap="round" d="M-9.5,-10.1L-9.5,4.1C-9.5,7.4,-6.8,10.1,-3.5,10.1L9.4,10.1" transform="matrix(1,0,0,1,314.55,4634.13)" fill="none" stroke-width="3" id="323" ed:tosuperid="322" stroke-linejoin="round" stroke="#4caf50" ed:parentid="320"></path> <path stroke-linecap="round" d="M-9.5,-26.3L-9.5,20.3C-9.5,23.6,-6.8,26.3,-3.5,26.3L9.4,26.3" transform="matrix(1,0,0,1,314.55,4650.25)" fill="none" stroke-width="3" id="325" ed:tosuperid="324" stroke-linejoin="round" stroke="#4caf50" ed:parentid="320"></path> <path stroke-linecap="round" d="M-9.5,-60L-9.5,54C-9.5,57.3,-6.8,60,-3.5,60L9.5,60" transform="matrix(1,0,0,1,260.65,4650.25)" fill="none" stroke-width="3" id="327" ed:tosuperid="326" stroke-linejoin="round" stroke="#4caf50" ed:parentid="318"></path> <path stroke-linecap="round" d="M-9.5,-15.9L-9.5,9.9C-9.5,13.2,-6.8,15.9,-3.5,15.9L9.4,15.9" transform="matrix(1,0,0,1,314.55,4738.13)" fill="none" stroke-width="3" id="329" ed:tosuperid="328" stroke-linejoin="round" stroke="#4caf50" ed:parentid="326"></path> <path stroke-linecap="round" d="M-9.5,-117.8L-9.5,111.8C-9.5,115.1,-6.8,117.8,-3.5,117.8L9.4,117.8" transform="matrix(1,0,0,1,314.55,4840)" fill="none" stroke-width="3" id="331" ed:tosuperid="330" stroke-linejoin="round" stroke="#4caf50" ed:parentid="326"></path> <path stroke-linecap="round" d="M-9.5,-212.6L-9.5,206.6C-9.5,209.9,-6.8,212.6,-3.5,212.6L9.4,212.6" transform="matrix(1,0,0,1,314.55,4934.88)" fill="none" stroke-width="3" id="333" ed:tosuperid="332" stroke-linejoin="round" stroke="#4caf50" ed:parentid="326"></path> <path stroke-linecap="round" d="M-9.5,-267.5L-9.5,261.5C-9.5,264.8,-6.8,267.5,-3.5,267.5L9.4,267.5" transform="matrix(1,0,0,1,314.55,4989.75)" fill="none" stroke-width="3" id="335" ed:tosuperid="334" stroke-linejoin="round" stroke="#4caf50" ed:parentid="326"></path> <path stroke-linecap="round" d="M-9.4,-1321.6L-9.4,1315.6C-9.4,1318.9,-6.8,1321.6,-3.4,1321.6L9.5,1321.6" transform="matrix(1,0,0,1,206.75,4049.38)" fill="none" stroke-width="3" id="337" ed:tosuperid="336" stroke-linejoin="round" stroke="#4caf50" ed:parentid="242"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9" transform="matrix(1,0,0,1,260.65,5393.88)" fill="none" stroke-width="3" id="339" ed:tosuperid="338" stroke-linejoin="round" stroke="#4caf50" ed:parentid="336"></path> <path stroke-linecap="round" d="M-9.5,-20.9L-9.5,14.9C-9.5,18.2,-6.8,20.9,-3.5,20.9L9.4,20.9" transform="matrix(1,0,0,1,314.55,5437.63)" fill="none" stroke-width="3" id="341" ed:tosuperid="340" stroke-linejoin="round" stroke="#4caf50" ed:parentid="338"></path> <path stroke-linecap="round" d="M-9.5,-64.6L-9.5,58.6C-9.5,61.9,-6.8,64.6,-3.5,64.6L9.5,64.6" transform="matrix(1,0,0,1,260.65,5447.63)" fill="none" stroke-width="3" id="343" ed:tosuperid="342" stroke-linejoin="round" stroke="#4caf50" ed:parentid="336"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.4,10.9" transform="matrix(1,0,0,1,314.55,5535.13)" fill="none" stroke-width="3" id="345" ed:tosuperid="344" stroke-linejoin="round" stroke="#4caf50" ed:parentid="342"></path> <path stroke-linecap="round" d="M-9.5,-47.8L-9.5,41.8C-9.5,45.1,-6.8,47.8,-3.5,47.8L9.4,47.8" transform="matrix(1,0,0,1,314.55,5572)" fill="none" stroke-width="3" id="347" ed:tosuperid="346" stroke-linejoin="round" stroke="#4caf50" ed:parentid="342"></path> <path stroke-linecap="round" d="M-9.5,-82.6L-9.5,76.6C-9.5,79.9,-6.8,82.6,-3.5,82.6L9.4,82.6" transform="matrix(1,0,0,1,314.55,5606.88)" fill="none" stroke-width="3" id="349" ed:tosuperid="348" stroke-linejoin="round" stroke="#4caf50" ed:parentid="342"></path> <path stroke-linecap="round" d="M-9.5,-168.1L-9.5,162.1C-9.5,165.4,-6.8,168.1,-3.5,168.1L9.5,168.1" transform="matrix(1,0,0,1,260.65,5551.13)" fill="none" stroke-width="3" id="351" ed:tosuperid="350" stroke-linejoin="round" stroke="#4caf50" ed:parentid="336"></path> <path stroke-linecap="round" d="M-9.5,-10.1L-9.5,4.1C-9.5,7.4,-6.8,10.1,-3.5,10.1L9.4,10.1" transform="matrix(1,0,0,1,314.55,5741.38)" fill="none" stroke-width="3" id="353" ed:tosuperid="352" stroke-linejoin="round" stroke="#4caf50" ed:parentid="350"></path> <path stroke-linecap="round" d="M-9.5,-36.3L-9.5,30.3C-9.5,33.6,-6.8,36.3,-3.5,36.3L9.4,36.3" transform="matrix(1,0,0,1,314.55,5767.5)" fill="none" stroke-width="3" id="355" ed:tosuperid="354" stroke-linejoin="round" stroke="#4caf50" ed:parentid="350"></path> <path stroke-linecap="round" d="M-9.5,-73.1L-9.5,67.1C-9.5,70.4,-6.8,73.1,-3.5,73.1L9.4,73.1" transform="matrix(1,0,0,1,314.55,5804.38)" fill="none" stroke-width="3" id="357" ed:tosuperid="356" stroke-linejoin="round" stroke="#4caf50" ed:parentid="350"></path> <path stroke-linecap="round" d="M-9.5,-1635.5L-9.5,1629.5C-9.5,1632.8,-6.8,1635.5,-3.5,1635.5L9.5,1635.5" transform="matrix(1,0,0,1,152.85,4295.75)" fill="none" stroke-width="3" id="359" ed:tosuperid="358" stroke-linejoin="round" stroke="#4caf50" ed:parentid="238"></path> <path stroke-linecap="round" d="M-9.4,-10.9L-9.4,4.9C-9.4,8.2,-6.8,10.9,-3.4,10.9L9.5,10.9" transform="matrix(1,0,0,1,206.75,5954.13)" fill="none" stroke-width="3" id="361" ed:tosuperid="360" stroke-linejoin="round" stroke="#4caf50" ed:parentid="358"></path> <path stroke-linecap="round" d="M-9.5,-8.9L-9.5,2.9C-9.5,6.2,-6.8,8.9,-3.5,8.9L9.5,8.9" transform="matrix(1,0,0,1,254.57,5985.88)" fill="none" stroke-width="3" id="363" ed:tosuperid="362" stroke-linejoin="round" stroke="#4caf50" ed:parentid="360"></path> <path stroke-linecap="round" d="M-9.5,-23.8L-9.5,17.8C-9.5,21.1,-6.8,23.8,-3.5,23.8L9.5,23.8" transform="matrix(1,0,0,1,254.57,6000.75)" fill="none" stroke-width="3" id="365" ed:tosuperid="364" stroke-linejoin="round" stroke="#4caf50" ed:parentid="360"></path> <path stroke-linecap="round" d="M-9.4,-57.5L-9.4,51.5C-9.4,54.8,-6.8,57.5,-3.4,57.5L9.5,57.5" transform="matrix(1,0,0,1,206.75,6000.75)" fill="none" stroke-width="3" id="367" ed:tosuperid="366" stroke-linejoin="round" stroke="#4caf50" ed:parentid="358"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.4,10.9" transform="matrix(1,0,0,1,260.65,6081.13)" fill="none" stroke-width="3" id="369" ed:tosuperid="368" stroke-linejoin="round" stroke="#4caf50" ed:parentid="366"></path> <path stroke-linecap="round" d="M-9.5,-32.8L-9.5,26.8C-9.5,30.1,-6.8,32.8,-3.5,32.8L9.4,32.8" transform="matrix(1,0,0,1,260.65,6103)" fill="none" stroke-width="3" id="371" ed:tosuperid="370" stroke-linejoin="round" stroke="#4caf50" ed:parentid="366"></path> <path stroke-linecap="round" d="M-9.5,-54.6L-9.5,48.6C-9.5,51.9,-6.8,54.6,-3.5,54.6L9.5,54.6" transform="matrix(1,0,0,1,260.65,6124.88)" fill="none" stroke-width="3" id="373" ed:tosuperid="372" stroke-linejoin="round" stroke="#4caf50" ed:parentid="366"></path> <path stroke-linecap="round" d="M-9.4,-135L-9.4,129C-9.4,132.3,-6.8,135,-3.4,135L9.5,135" transform="matrix(1,0,0,1,206.75,6078.25)" fill="none" stroke-width="3" id="375" ed:tosuperid="374" stroke-linejoin="round" stroke="#4caf50" ed:parentid="358"></path> <path stroke-linecap="round" d="M-9.5,-15.9L-9.5,9.9C-9.5,13.2,-6.8,15.9,-3.5,15.9L9.4,15.9" transform="matrix(1,0,0,1,260.65,6241.13)" fill="none" stroke-width="3" id="377" ed:tosuperid="376" stroke-linejoin="round" stroke="#4caf50" ed:parentid="374"></path> <path stroke-linecap="round" d="M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9" transform="matrix(1,0,0,1,314.55,6289.88)" fill="none" stroke-width="3" id="379" ed:tosuperid="378" stroke-linejoin="round" stroke="#4caf50" ed:parentid="376"></path> <path stroke-linecap="round" d="M-9.5,-1837.1L-9.5,1831.1C-9.5,1834.4,-6.8,1837.1,-3.5,1837.1L9.5,1837.1" transform="matrix(1,0,0,1,152.85,4497.38)" fill="none" stroke-width="3" id="381" ed:tosuperid="380" stroke-linejoin="round" stroke="#4caf50" ed:parentid="238"></path> <path stroke-linecap="round" d="M-9.4,-85.4L-9.4,79.4C-9.4,82.7,-6.8,85.4,-3.4,85.4L9.5,85.4" transform="matrix(1,0,0,1,206.75,6431.88)" fill="none" stroke-width="3" id="387" ed:tosuperid="386" stroke-linejoin="round" stroke="#4caf50" ed:parentid="380"></path> <path stroke-linecap="round" d="M-9.4,-376L-9.4,370C-9.4,373.3,-6.8,376,-3.4,376L9.5,376" transform="matrix(1,0,0,1,206.75,6722.5)" fill="none" stroke-width="3" id="389" ed:tosuperid="388" stroke-linejoin="round" stroke="#4caf50" ed:parentid="380"></path> <path stroke-linecap="round" d="M-9.4,-592.1L-9.4,586.1C-9.4,589.4,-6.8,592.1,-3.4,592.1L9.5,592.1" transform="matrix(1,0,0,1,206.75,6938.63)" fill="none" stroke-width="3" id="391" ed:tosuperid="390" stroke-linejoin="round" stroke="#4caf50" ed:parentid="380"></path> <path stroke-linecap="round" d="M-9.4,-834.8L-9.4,828.8C-9.4,832.1,-6.8,834.8,-3.4,834.8L9.5,834.8" transform="matrix(1,0,0,1,206.75,7181.25)" fill="none" stroke-width="3" id="393" ed:tosuperid="392" stroke-linejoin="round" stroke="#4caf50" ed:parentid="380"></path> <path stroke-linecap="round" d="M-9.4,-1077.4L-9.4,1071.4C-9.4,1074.7,-6.8,1077.4,-3.4,1077.4L9.5,1077.4" transform="matrix(1,0,0,1,206.75,7423.88)" fill="none" stroke-width="3" id="395" ed:tosuperid="394" stroke-linejoin="round" stroke="#4caf50" ed:parentid="380"></path> <path stroke-linecap="round" d="M-9.4,-1228.3L-9.4,1222.3C-9.4,1225.6,-6.8,1228.3,-3.4,1228.3L9.5,1228.3" transform="matrix(1,0,0,1,206.75,7574.75)" fill="none" stroke-width="3" id="397" ed:tosuperid="396" stroke-linejoin="round" stroke="#4caf50" ed:parentid="380"></path> <g transform="matrix(1,0,0,1,23,88)" id="121" ed:width="164.9375" ed:height="73" ed:layout="righttree" ed:topictype="mainidea"><path d="M4,0L160.9,0C163.6,0,164.9,1.3,164.9,4L164.9,69C164.9,71.7,163.6,73,160.9,73L4,73C1.3,73,0,71.7,0,69L0,4C0,1.3,1.3,0,4,0z" fill="none" stroke-width="3" stroke-linejoin="round" stroke="#4caf50"></path> <text class="st55"><tspan x="22" textLength="121" y="50">socket</tspan></text></g> <g transform="matrix(1,0,0,1,108.4,194)" id="122" ed:width="91.0625" ed:height="40" ed:parentid="121"><path d="M4,0L87.1,0C89.8,0,91.1,1.3,91.1,4L91.1,36C91.1,38.7,89.8,40,87.1,40L4,40C1.3,40,0,38.7,0,36L0,4C0,1.3,1.3,0,4,0z" fill="#4caf50"></path> <text class="st56"><tspan x="19" textLength="53" y="24">需求 : </tspan></text></g> <g transform="matrix(1,0,0,1,162.3,243.75)" id="124" ed:width="296.109375" ed:height="24" ed:parentid="122"><text class="st57"><tspan x="10" textLength="275" y="16">客户端 跟 服务器 如何进行通信 (传输信息) ?</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,277.5)" id="126" ed:width="517" ed:height="104" ed:parentid="122"><text class="st57"><tspan x="10" textLength="487" y="16">套接字(socket)可以看成是两个网络应用程序进行通信时，各自通信连接中的一</tspan> <tspan x="10" textLength="490" y="36">个端点。通信时，其中的一个网络应用程序将要传输的一段信息写入它所在主机</tspan> <tspan x="10" textLength="495" y="56">的Socket中，该Socket通过网络接口卡的传输介质将这段信息发送给另一台主机</tspan> <tspan x="10" textLength="492" y="76">的Socket中，使这段信息能传送到其他程序中。因此，两个应用程序之间的数据</tspan> <tspan x="10" textLength="221" y="96">传输要通过套接字(socket)来完成。</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,391.25)" id="128" ed:width="435.84375" ed:height="24" ed:parentid="122"><text class="st57"><tspan x="10" textLength="415" y="16">端与端之间就像两个不同国家的陌生人, 由于语言不同无法直接沟通</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,425)" id="130" ed:width="328.265625" ed:height="24" ed:parentid="122"><text class="st57"><tspan x="10" textLength="307" y="16">因此双方之间都聘请了一个翻译,而沟通就像这样 :</tspan></text></g> <g transform="matrix(1,0,0,1,108.4,482)" id="132" ed:width="79.6875" ed:height="40" ed:parentid="121"><path d="M4,0L75.7,0C78.4,0,79.7,1.3,79.7,4L79.7,36C79.7,38.7,78.4,40,75.7,40L4,40C1.3,40,0,38.7,0,36L0,4C0,1.3,1.3,0,4,0z" fill="#4caf50"></path> <text class="st56"><tspan x="19" textLength="42" y="24">定义:</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,531.75)" id="134" ed:width="121.828125" ed:height="24" ed:parentid="132"><text class="st57"><tspan x="10" textLength="101" y="16">socket 在哪里 ?</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,565.5)" id="136" ed:width="517" ed:height="44" ed:parentid="134"><text class="st57"><tspan x="10" textLength="487" y="16">Socket : 对数据传输协议TCP/UDP IP 等进行封装的API 接口 , 而应用层直接使</tspan> <tspan x="10" textLength="161" y="36">用socket 接口来完成传输</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,619.25)" id="138" ed:width="517" ed:height="84" ed:parentid="132"><text class="st57"><tspan x="10" textLength="496" y="16">(1)套接字（socket）是一个抽象层，应用程序可以通过它发送或接收数据，可对</tspan> <tspan x="10" textLength="488" y="36">其进行(2)像对文件一样的打开、读写和关闭等操作。套接字允许应用程序将I/O</tspan> <tspan x="10" textLength="492" y="56">插入到网络中，并与网络中的其他应用程序进行通信。(3)网络套接字是IP地址与</tspan> <tspan x="10" textLength="70" y="76">端口的组合</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,713)" id="140" ed:width="262.203125" ed:height="24" ed:parentid="132"><text class="st57"><tspan x="10" textLength="241" y="16">(1) : 专门是帮助发送和接收数据的作用</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,769.63)" id="142" ed:width="220.203125" ed:height="24" ed:layout="rightmap" ed:parentid="132"><text class="st57"><tspan x="10" textLength="199" y="16">(2) : 像读写文件一样去传输数据</tspan></text></g> <g transform="matrix(1,0,0,1,409.5,746.75)" id="144" ed:width="90.265625" ed:height="24" ed:layout="rightmap" ed:parentid="142"><text class="st57"><tspan x="10" textLength="69" y="16">文件 读写 :</tspan></text></g> <g transform="matrix(1,0,0,1,526.77,746.75)" id="146" ed:width="161.125" ed:height="24" ed:layout="rightmap" ed:parentid="144"><text class="st57"><tspan x="10" textLength="140" y="16">打开 -&gt; 读写 -&gt; 关闭</tspan></text></g> <g transform="matrix(1,0,0,1,409.5,792.5)" id="148" ed:width="106.34375" ed:height="24" ed:layout="rightmap" ed:parentid="142"><text class="st57"><tspan x="10" textLength="85" y="16">socket 操作 :</tspan></text></g> <g transform="matrix(1,0,0,1,542.85,777.25)" id="150" ed:width="245.125" ed:height="24" ed:layout="rightmap" ed:parentid="148"><text class="st57"><tspan x="10" textLength="224" y="16">请求确认 -&gt; 传输数据 -&gt; 结束传输</tspan></text></g> <g transform="matrix(1,0,0,1,542.85,807.75)" id="152" ed:width="375.3125" ed:height="24" ed:layout="rightmap" ed:parentid="148"><text class="st57"><tspan x="10" textLength="354" y="16">请求确认(三次握手) -&gt; 传输数据 -&gt; 结束传输(四次分手)</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,841.5)" id="154" ed:width="517" ed:height="44" ed:parentid="132"><text class="st57"><tspan x="10" textLength="500" y="16">(3) : 如果IP地址是210.37.145.1，而端口号是23，那么得到套接字就是 socket </tspan> <tspan x="10" textLength="164" y="36">=（210.37.145.1：23）</tspan></text></g> <g transform="matrix(1,0,0,1,108.4,918.5)" id="156" ed:width="85.375" ed:height="40" ed:parentid="121"><path d="M4,0L81.4,0C84.1,0,85.4,1.3,85.4,4L85.4,36C85.4,38.7,84.1,40,81.4,40L4,40C1.3,40,0,38.7,0,36L0,4C0,1.3,1.3,0,4,0z" fill="#4caf50"></path> <text class="st56"><tspan x="19" textLength="47" y="24">来源 :</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,968.25)" id="158" ed:width="517" ed:height="64" ed:parentid="156"><text class="st57"><tspan x="10" textLength="496" y="16">Socket最初是加利福尼亚大学Berkeley分校为Unix系统开发的网络通信接口。后</tspan> <tspan x="10" textLength="469" y="36">来随着TCP/IP网络的发展，Socket成为最为通用的应用程序接口 (socket 函</tspan> <tspan x="10" textLength="331" y="56">数)，也是在Internet上进行应用开发最为通用的API。</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,1042)" id="160" ed:width="517" ed:height="44" ed:parentid="156"><text class="st57"><tspan x="10" textLength="488" y="16">但是, 在网络应用程序设计时，由于TCP/IP的核心内容被封装在操作系统中，如</tspan> <tspan x="10" textLength="455" y="36">果应用程序要使用TCP/IP，可以通过系统提供的TCP/IP的编程接口来实现</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,1095.75)" id="162" ed:width="517" ed:height="44" ed:parentid="160"><text class="st57"><tspan x="10" textLength="485" y="16">意思是 : 购买的系统 已经把socket 之间沟通的过程封装好了, 并生成一套公开 </tspan> <tspan x="10" textLength="346" y="36">API ,公开给 用户去使用, 只需要按照 接口规则使用即可.</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,1149.5)" id="164" ed:width="280.765625" ed:height="25" ed:parentid="156"><path d="M4,0L276.8,0C279.5,0,280.8,1.3,280.8,4L280.8,21C280.8,23.7,279.5,25,276.8,25L4,25C1.3,25,0,23.7,0,21L0,4C0,1.3,1.3,0,4,0z" fill="none" stroke-width="2" stroke-linejoin="round" stroke="#4caf50"></path> <text class="st57"><tspan x="10" textLength="259" y="16.5"> socket 有哪些 (系统封装了三种套接字) ?</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,1184.25)" id="166" ed:width="48.265625" ed:height="24" ed:parentid="156"><text class="st57"><tspan x="10" textLength="27" y="16"> 3种</tspan></text></g> <g transform="matrix(1,0,0,1,205.33,1218)" id="168" ed:width="117.53125" ed:height="24" ed:parentid="166"><text class="st57"><tspan x="10" textLength="97" y="16">1. 流式套接字 :</tspan></text></g> <g transform="matrix(1,0,0,1,259.23,1251.75)" id="170" ed:width="140.09375" ed:height="24" ed:parentid="168"><text class="st57"><tspan x="10" textLength="119" y="16">使用TCP协议传输 :</tspan></text></g> <g transform="matrix(1,0,0,1,313.13,1285.5)" id="172" ed:width="511" ed:height="24" ed:parentid="170"><text class="st57"><tspan x="10" textLength="490" y="16">一种可靠的、面向连接的双向数据传输服务，实现了数据无差错、无重复的发送</tspan></text></g> <g transform="matrix(1,0,0,1,259.23,1319.25)" id="174" ed:width="105" ed:height="24" ed:parentid="168"><text class="st57"><tspan x="10" textLength="84" y="16">内设流量控制</tspan></text></g> <g transform="matrix(1,0,0,1,259.23,1353)" id="176" ed:width="276.6875" ed:height="24" ed:parentid="168"><text class="st57"><tspan x="10" textLength="256" y="16">选择 : 数据大,对数据准确等要求高的时候</tspan></text></g> <g transform="matrix(1,0,0,1,205.33,1386.75)" id="178" ed:width="131.53125" ed:height="24" ed:parentid="166"><text class="st57"><tspan x="10" textLength="111" y="16">2. 数据报套接字 :</tspan></text></g> <g transform="matrix(1,0,0,1,259.23,1420.5)" id="180" ed:width="113.75" ed:height="24" ed:parentid="178"><text class="st57"><tspan x="10" textLength="93" y="16">使用UDP协议 :</tspan></text></g> <g transform="matrix(1,0,0,1,313.13,1454.25)" id="182" ed:width="273" ed:height="24" ed:parentid="180"><text class="st57"><tspan x="10" textLength="252" y="16">一种无连接、不可靠的双向数据传输服务</tspan></text></g> <g transform="matrix(1,0,0,1,313.13,1488)" id="184" ed:width="455" ed:height="24" ed:parentid="180"><text class="st57"><tspan x="10" textLength="434" y="16">数据包以独立的形式被发送，并且保留了记录边界，不提供可靠性保证</tspan></text></g> <g transform="matrix(1,0,0,1,313.13,1521.75)" id="186" ed:width="517" ed:height="44" ed:parentid="180"><text class="st57"><tspan x="10" textLength="490" y="16">数据在传输过程中可能会丢失(丢了就算了,不会再次发送)或重复，并且不能保证</tspan> <tspan x="10" textLength="182" y="36">在接收端按发送顺序接收数据</tspan></text></g> <g transform="matrix(1,0,0,1,259.23,1575.5)" id="188" ed:width="57.84375" ed:height="24" ed:parentid="178"><text class="st57"><tspan x="10" textLength="37" y="16">选择 :</tspan></text></g> <g transform="matrix(1,0,0,1,307.05,1609.25)" id="190" ed:width="169.84375" ed:height="24" ed:parentid="188"><text class="st57"><tspan x="10" textLength="149" y="16">数据校验要求低, 效率高</tspan></text></g> <g transform="matrix(1,0,0,1,307.05,1643)" id="192" ed:width="295.84375" ed:height="24" ed:parentid="188"><text class="st57"><tspan x="10" textLength="275" y="16">直播,视频聊天等 掉帧不影响使用的功能需求</tspan></text></g> <g transform="matrix(1,0,0,1,205.33,1676.75)" id="194" ed:width="117.53125" ed:height="24" ed:parentid="166"><text class="st57"><tspan x="10" textLength="97" y="16">3. 原始套接字 :</tspan></text></g> <g transform="matrix(1,0,0,1,259.23,1710.5)" id="196" ed:width="290.25" ed:height="24" ed:parentid="194"><text class="st57"><tspan x="10" textLength="269" y="16">对较低层协议（如IP或ICMP）进行直接访问</tspan></text></g> <g transform="matrix(1,0,0,1,259.23,1744.25)" id="198" ed:width="517" ed:height="44" ed:parentid="194"><text class="st57"><tspan x="10" textLength="490" y="16">常用于网络协议分析，检验新的网络协议实现，也可用于测试新配置或安装的网</tspan> <tspan x="10" textLength="42" y="36">络设备</tspan></text></g> <g transform="matrix(1,0,0,1,108.4,1821.25)" id="200" ed:width="179.96875" ed:height="40" ed:parentid="121"><path d="M4,0L176,0C178.7,0,180,1.3,180,4L180,36C180,38.7,178.7,40,176,40L4,40C1.3,40,0,38.7,0,36L0,4C0,1.3,1.3,0,4,0z" fill="#4caf50"></path> <text class="st56"><tspan x="19" textLength="142" y="24">何时调用socket ?</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,1871)" id="202" ed:width="145.78125" ed:height="24" ed:parentid="200"><text class="st57"><tspan x="10" textLength="125" y="16">开始通信时 : (握手) </tspan></text></g> <g transform="matrix(1,0,0,1,216.2,1904.75)" id="204" ed:width="517" ed:height="44" ed:parentid="202"><text class="st57"><tspan x="10" textLength="487" y="16">任何用户要进行通信都必须创建套接字，而创建套接字是通过系统调用socket()</tspan> <tspan x="10" textLength="70" y="36">函数实现的</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,1958.5)" id="206" ed:width="141.359375" ed:height="24" ed:parentid="200"><text class="st57"><tspan x="10" textLength="120" y="16">结束通信时 : (分手)</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,1992.25)" id="208" ed:width="499.078125" ed:height="24" ed:parentid="206"><text class="st57"><tspan x="10" textLength="478" y="16">当对某个套接字的通信结束时，必须调用关闭socket函数关闭指定的套接字。</tspan></text></g> <g transform="matrix(1,0,0,1,108.4,2049.25)" id="210" ed:width="74" ed:height="40" ed:parentid="121"><path d="M4,0L70,0C72.7,0,74,1.3,74,4L74,36C74,38.7,72.7,40,70,40L4,40C1.3,40,0,38.7,0,36L0,4C0,1.3,1.3,0,4,0z" fill="#4caf50"></path> <text class="st56"><tspan x="19" textLength="36" y="24">端口</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,2099)" id="212" ed:width="77" ed:height="24" ed:parentid="210"><text class="st57"><tspan x="10" textLength="56" y="16">一个端口</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,2132.75)" id="214" ed:width="189" ed:height="24" ed:parentid="212"><text class="st57"><tspan x="10" textLength="168" y="16">同一时刻只能建立一次连接</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,2166.5)" id="216" ed:width="189" ed:height="24" ed:parentid="212"><text class="st57"><tspan x="10" textLength="168" y="16">同一时刻可以监听多个请求</tspan></text></g> <g transform="matrix(1,0,0,1,108.4,2223.5)" id="218" ed:width="128" ed:height="40" ed:parentid="121"><path d="M4,0L124,0C126.7,0,128,1.3,128,4L128,36C128,38.7,126.7,40,124,40L4,40C1.3,40,0,38.7,0,36L0,4C0,1.3,1.3,0,4,0z" fill="#4caf50"></path> <text class="st56"><tspan x="19" textLength="90" y="24">数据缓冲区</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,2273.25)" id="220" ed:width="77" ed:height="24" ed:parentid="218"><text class="st57"><tspan x="10" textLength="56" y="16">数据请求</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,2307)" id="222" ed:width="127.09375" ed:height="24" ed:parentid="220"><text class="st57"><tspan x="10" textLength="106" y="16">缓冲区数据-粘包</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,2340.75)" id="224" ed:width="517" ed:height="44" ed:parentid="222"><text class="st57"><tspan x="10" textLength="489" y="16">多个数据因为网络原因同时进入缓冲区没有发送,而进行了累计, 但是不同请求的</tspan> <tspan x="10" textLength="224" y="36">数据混合后进行发送会导致无法区分</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,2394.5)" id="226" ed:width="77" ed:height="24" ed:parentid="220"><text class="st57"><tspan x="10" textLength="56" y="16">解决粘包</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,2428.25)" id="228" ed:width="105" ed:height="24" ed:parentid="226"><text class="st57"><tspan x="10" textLength="84" y="16">设计数据格式</tspan></text></g> <g transform="matrix(1,0,0,1,324,2462)" id="230" ed:width="298.703125" ed:height="24" ed:parentid="228"><text class="st57"><tspan x="10" textLength="278" y="16">数据长度(4字节) + 数据类型(4字节) + data </tspan></text></g> <g transform="matrix(1,0,0,1,324,2495.75)" id="232" ed:width="161" ed:height="24" ed:parentid="228"><text class="st57"><tspan x="10" textLength="140" y="16">通过上面格式区分数据</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,2529.5)" id="234" ed:width="63" ed:height="24" ed:parentid="218"><text class="st57"><tspan x="10" textLength="42" y="16">数据流</tspan></text></g> <g transform="matrix(1,0,0,1,212.7,2563.25)" id="236" ed:width="91" ed:height="24" ed:parentid="234"><text class="st57"><tspan x="10" textLength="70" y="16">二进制数据</tspan></text></g> <g transform="matrix(1,0,0,1,108.4,2620.25)" id="238" ed:width="177.28125" ed:height="40" ed:parentid="121"><path d="M4,0L173.3,0C176,0,177.3,1.3,177.3,4L177.3,36C177.3,38.7,176,40,173.3,40L4,40C1.3,40,0,38.7,0,36L0,4C0,1.3,1.3,0,4,0z" fill="#4caf50"></path> <text class="st56"><tspan x="19" textLength="139" y="24">套接字调用流程 ?</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,2670)" id="240" ed:width="157.921875" ed:height="24" ed:parentid="238"><text class="st57"><tspan x="10" textLength="137" y="16">socket数据传输流程: </tspan></text></g> <g transform="matrix(1,0,0,1,162.3,2703.75)" id="242" ed:width="85.84375" ed:height="24" ed:parentid="238"><text class="st57"><tspan x="10" textLength="65" y="16">流程解析 :</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,2737.5)" id="244" ed:width="399.78125" ed:height="24" ed:parentid="242"><text class="st57"><tspan x="10" textLength="379" y="16">https://www.jianshu.com/p/066d99da7cbd  部分整理自</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,2771.25)" id="246" ed:width="223.015625" ed:height="24" ed:parentid="242"><text class="st57"><tspan x="10" textLength="202" y="16">1、使用socket()函数创建套接字</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,2805)" id="248" ed:width="284.578125" ed:height="21" ed:parentid="246"><text class="st57"><tspan x="10" textLength="264" y="16">int socket(int af, int type, int protocol);</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,2835.75)" id="250" ed:width="57.84375" ed:height="24" ed:parentid="246"><text class="st57"><tspan x="10" textLength="37" y="16">参数 :</tspan></text></g> <g transform="matrix(1,0,0,1,317.92,2869.5)" id="252" ed:width="250.140625" ed:height="24" ed:parentid="250"><text class="st57"><tspan x="10" textLength="229" y="16">Af :  IP 地址类型 (IPv4 或者 IPv6 等)</tspan></text></g> <g transform="matrix(1,0,0,1,317.92,2903.25)" id="254" ed:width="517" ed:height="44" ed:parentid="250"><text class="st57"><tspan x="10" textLength="429" y="16">type : 为数据传输方式，常用的有 SOCK_STREAM(数据准确传输) 和 </tspan> <tspan x="10" textLength="193" y="36">SOCK_DGRAM (数据可能丢失)</tspan></text></g> <g transform="matrix(1,0,0,1,317.92,2957)" id="256" ed:width="386.84375" ed:height="24" ed:parentid="250"><text class="st57"><tspan x="10" textLength="366" y="16">protocol : 表示传输协议，常用的 有TCP 和 UDP 传输协议</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,2990.75)" id="258" ed:width="157.6875" ed:height="24" ed:parentid="242"><text class="st57"><tspan x="10" textLength="137" y="16">2、bind() 绑定套接字</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,3024.5)" id="260" ed:width="117.875" ed:height="24" ed:parentid="242"><text class="st57"><tspan x="10" textLength="97" y="16">3、使用listen()</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,3058.25)" id="262" ed:width="517" ed:height="44" ed:parentid="260"><text class="st57"><tspan x="10" textLength="495" y="16">于服务器端程序，使用 bind() 绑定套接字后，还需要使用 listen() 函数让套接字</tspan> <tspan x="10" textLength="482" y="36">进入被动监听状态，再调用 accept() 函数，就可以随时响应客户端的请求了。</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,3112)" id="264" ed:width="236.140625" ed:height="21" ed:parentid="260"><text class="st57"><tspan x="10" textLength="215" y="16">int listen(int sock, int backlog); </tspan></text></g> <g transform="matrix(1,0,0,1,324,3142.75)" id="266" ed:width="152.359375" ed:height="24" ed:parentid="264"><text class="st57"><tspan x="10" textLength="131" y="16">sock : 待监听的sock</tspan></text></g> <g transform="matrix(1,0,0,1,324,3176.5)" id="268" ed:width="213.46875" ed:height="24" ed:parentid="264"><text class="st57"><tspan x="10" textLength="192" y="16">backlog : 请求队列的最大长度</tspan></text></g> <g transform="matrix(1,0,0,1,377.9,3210.25)" id="270" ed:width="32" ed:height="16" ed:parentid="268"><text class="st57"></text></g> <g transform="matrix(1,0,0,1,270.1,3236)" id="272" ed:width="75.875" ed:height="21" ed:parentid="260"><text class="st57"><tspan x="10" textLength="55" y="16">listen() :</tspan></text></g> <g transform="matrix(1,0,0,1,324,3266.75)" id="274" ed:width="517" ed:height="44" ed:parentid="272"><text class="st57"><tspan x="10" textLength="487" y="16">是被动监听，当没有客户端请求时，套接字处于“睡眠”状态，只有当接收到客户</tspan> <tspan x="10" textLength="263" y="36">端请求时，套接字才会被“唤醒”来响应请求</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,3320.5)" id="276" ed:width="85.84375" ed:height="24" ed:parentid="260"><text class="st57"><tspan x="10" textLength="65" y="16">请求队列 :</tspan></text></g> <g transform="matrix(1,0,0,1,324,3354.25)" id="278" ed:width="517" ed:height="84" ed:parentid="276"><text class="st57"><tspan x="10" textLength="490" y="16">当套接字正在处理客户端请求时，如果有新的请求进来，套接字是没法处理的，</tspan> <tspan x="10" textLength="490" y="36">只能把它放进缓冲区，待当前请求处理完毕后，再从缓冲区中读取出来处理。如</tspan> <tspan x="10" textLength="490" y="56">果不断有新的请求进来，它们就按照先后顺序在缓冲区中排队，直到缓冲区满。</tspan> <tspan x="10" textLength="313" y="76">这个缓冲区，就称为请求队列（Request Queue）</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,3448)" id="280" ed:width="113.84375" ed:height="24" ed:parentid="260"><text class="st57"><tspan x="10" textLength="93" y="16">缓冲区的长度 :</tspan></text></g> <g transform="matrix(1,0,0,1,324,3481.75)" id="282" ed:width="517" ed:height="64" ed:parentid="280"><text class="st57"><tspan x="10" textLength="495" y="16">能存放多少个客户端请求）可以通过 listen() 函数的 backlog 参数指定，但究竟</tspan> <tspan x="10" textLength="502" y="36">为多少并没有什么标准，可以根据你的需求来定，并发量小的话可以是10或者20 </tspan> <tspan x="10" textLength="107" y="56">, 大一点几百上千</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,3555.5)" id="284" ed:width="133.640625" ed:height="24" ed:parentid="242"><text class="st57"><tspan x="10" textLength="113" y="16">4、 accept() 函数</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,3589.25)" id="286" ed:width="446.796875" ed:height="24" ed:parentid="284"><text class="st57"><tspan x="10" textLength="426" y="16">当套接字处于监听状态时，可以通过 accept() 函数来接收客户端请求</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,3623)" id="288" ed:width="450.6875" ed:height="21" ed:parentid="284"><text class="st57"><tspan x="10" textLength="430" y="16">int accept(int sock, struct sockaddr *addr, socklen_t *addrlen); </tspan></text></g> <g transform="matrix(1,0,0,1,270.1,3653.75)" id="290" ed:width="432.3125" ed:height="24" ed:parentid="284"><text class="st57"><tspan x="10" textLength="411" y="16">accept() 会阻塞函数执行,直到有新的请求到来 (没有新请求就歇着)</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,3687.5)" id="292" ed:width="129.921875" ed:height="24" ed:parentid="242"><text class="st57"><tspan x="10" textLength="109" y="16">5、socket缓冲区</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,3721.25)" id="294" ed:width="465.921875" ed:height="24" ed:parentid="292"><text class="st57"><tspan x="10" textLength="445" y="16">每个 socket 被创建后，都会分配两个缓冲区，输入缓冲区和输出缓冲区</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,3755)" id="296" ed:width="517" ed:height="84" ed:parentid="292"><text class="st57"><tspan x="10" textLength="488" y="16">write()/send() 并不立即向网络中传输数据，而是先将数据写入缓冲区中，再由</tspan> <tspan x="10" textLength="488" y="36">TCP协议将数据从缓冲区发送到目标机器。一旦将数据写入到缓冲区，函数就可</tspan> <tspan x="10" textLength="490" y="56">以成功返回，不管它们有没有到达目标机器，也不管它们何时被发送到网络，这</tspan> <tspan x="10" textLength="166" y="76">些都是TCP协议负责的事情</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,3848.75)" id="298" ed:width="517" ed:height="64" ed:parentid="292"><text class="st57"><tspan x="10" textLength="477" y="16">TCP协议独立于 write()/send() 函数，数据有可能刚被写入缓冲区就发送到网</tspan> <tspan x="10" textLength="490" y="36">络，也可能在缓冲区中不断积压，多次写入的数据被一次性发送到网络，这取决</tspan> <tspan x="10" textLength="420" y="56">于当时的网络情况、当前线程是否空闲等诸多因素，不由程序员控制</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,3922.5)" id="300" ed:width="144.921875" ed:height="24" ed:parentid="242"><text class="st57"><tspan x="10" textLength="124" y="16">6、I/O缓冲区特性 :</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,3956.25)" id="302" ed:width="267.390625" ed:height="24" ed:parentid="300"><text class="st57"><tspan x="10" textLength="246" y="16">输入输出缓冲区的默认大小一般都是 8K</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,3990)" id="304" ed:width="407.84375" ed:height="84" ed:parentid="300"><text class="st57"><tspan x="10" textLength="295" y="16">（1）I/O缓冲区在每个TCP套接字中单独存在；</tspan> <tspan x="10" textLength="269" y="36">（2）I/O缓冲区在创建套接字时自动生成；</tspan> <tspan x="10" textLength="387" y="56">（3）即使关闭套接字也会继续传送输出缓冲区中遗留的数据；</tspan> <tspan x="10" textLength="289" y="76">（4）关闭套接字将丢失输入缓冲区中的数据。</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,4083.75)" id="306" ed:width="139.765625" ed:height="24" ed:parentid="242"><text class="st57"><tspan x="10" textLength="119" y="16">7、write()/send() </tspan></text></g> <g transform="matrix(1,0,0,1,270.1,4117.5)" id="308" ed:width="223.609375" ed:height="24" ed:parentid="306"><text class="st57"><tspan x="10" textLength="203" y="16">对于TCP套接字(默认阻塞模式 ) :</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,4151.25)" id="310" ed:width="517" ed:height="164" ed:parentid="306"><text class="st57"><tspan x="10" textLength="470" y="16">1) 首先会检查缓冲区，如果缓冲区的可用空间长度小于要发送的数据，那么 </tspan> <tspan x="10" textLength="474" y="36">write()/send() 会被阻塞（暂停执行），直到缓冲区中的数据被发送到目标机</tspan> <tspan x="10" textLength="408" y="56">器，腾出足够的空间，才唤醒 write()/send() 函数继续写入数据。</tspan> <tspan x="10" textLength="492" y="76">2) 如果TCP协议正在向网络发送数据，那么输出缓冲区会被锁定，不允许写入，</tspan> <tspan x="10" textLength="486" y="96">write()/send() 也会被阻塞，直到数据发送完毕缓冲区解锁，write()/send() 才</tspan> <tspan x="10" textLength="70" y="116">会被唤醒。</tspan> <tspan x="10" textLength="396" y="136">3) 如果要写入的数据大于缓冲区的最大长度，那么将分批写入。</tspan> <tspan x="10" textLength="356" y="156">4) 直到所有数据被写入缓冲区 write()/send() 才能返回。</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,4325)" id="312" ed:width="131.71875" ed:height="24" ed:parentid="242"><text class="st57"><tspan x="10" textLength="111" y="16">8、read()/recv() </tspan></text></g> <g transform="matrix(1,0,0,1,270.1,4358.75)" id="314" ed:width="223.609375" ed:height="24" ed:parentid="312"><text class="st57"><tspan x="10" textLength="203" y="16">对于TCP套接字(默认阻塞模式 ) :</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,4392.5)" id="316" ed:width="517" ed:height="164" ed:parentid="312"><text class="st57"><tspan x="10" textLength="494" y="16">1) 首先会检查缓冲区，如果输入缓冲区中有数据，那么就读取，否则函数会被阻</tspan> <tspan x="10" textLength="280" y="36">塞(暂停执行,等待)，直到网络上有数据到来。</tspan> <tspan x="10" textLength="494" y="56">2) 如果要读取的数据长度小于缓冲区中的数据长度，那么就不能一次性将缓冲区</tspan> <tspan x="10" textLength="470" y="76">中的所有数据读出，剩余数据将不断积压，直到有 read()/recv() 函数再次读</tspan> <tspan x="10" textLength="28" y="96">取。</tspan> <tspan x="10" textLength="446" y="116">3) 直到读取到数据后 read()/recv() 函数才会返回，否则就一直被阻塞。</tspan> <tspan x="10" textLength="488" y="136">这就是TCP套接字的阻塞模式。所谓阻塞，就是上一步动作没有完成，下一步动</tspan> <tspan x="10" textLength="378" y="156">作将暂停，直到上一步动作完成后才能继续，以保持同步性。</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,4566.25)" id="318" ed:width="110.671875" ed:height="24" ed:parentid="242"><text class="st57"><tspan x="10" textLength="90" y="16">8、connect() </tspan></text></g> <g transform="matrix(1,0,0,1,270.1,4600)" id="320" ed:width="258.265625" ed:height="24" ed:parentid="318"><text class="st57"><tspan x="10" textLength="237" y="16">客户端向服务器建立连接,使用该函数 :</tspan></text></g> <g transform="matrix(1,0,0,1,324,4633.75)" id="322" ed:width="488.28125" ed:height="21" ed:parentid="320"><text class="st57"><tspan x="10" textLength="467" y="16">int connect(int sock, struct sockaddr *serv_addr, socklen_t addrlen); </tspan></text></g> <g transform="matrix(1,0,0,1,324,4664.5)" id="324" ed:width="144.765625" ed:height="24" ed:parentid="320"><text class="st57"><tspan x="10" textLength="124" y="16">对应服务器的IP地址</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,4698.25)" id="326" ed:width="85.84375" ed:height="24" ed:parentid="318"><text class="st57"><tspan x="10" textLength="65" y="16">三次握手 :</tspan></text></g> <g transform="matrix(1,0,0,1,324,4732)" id="328" ed:width="517" ed:height="44" ed:parentid="326"><text class="st57"><tspan x="10" textLength="491" y="16">注意 : 在回应对方收到信息时,都要把对方发过来的随机数据包序号 加一 (5000 </tspan> <tspan x="10" textLength="489" y="36">+ 1) , 设置 ACK 标志位 返回 , 对方根据该值是否加一来判断是否真的接收到了</tspan></text></g> <g transform="matrix(1,0,0,1,324,4785.75)" id="330" ed:width="517" ed:height="344" ed:parentid="326"><text class="st57"><tspan x="10" textLength="205" y="16">客户端发起请求(三次握手过程)：</tspan> <tspan x="10" textLength="484" y="36">　　1) 当客户端调用 connect() 函数后，TCP协议会组建一个数据包，并设置 </tspan> <tspan x="10" textLength="469" y="56">SYN 标志位，表示该数据包是用来建立同步连接的。同时生成一个随机数字 </tspan> <tspan x="10" textLength="491" y="76">1000，填充“序号（Seq）”字段，表示该数据包的序号。完成这些工作，开始向</tspan> <tspan x="10" textLength="351" y="96">服务器端发送数据包，客户端就进入了SYN-SEND状态。</tspan> <tspan x="10" textLength="487" y="116">　　2) 服务器端收到数据包，检测到已经设置了 SYN 标志位，就知道这是客户</tspan> <tspan x="10" textLength="485" y="136">端发来的建立连接的“请求包”。服务器端也会组建一个数据包，并设置 SYN 和 </tspan> <tspan x="10" textLength="489" y="156">ACK 标志位，SYN 表示该数据包用来建立连接，ACK 用来确认收到了刚才客户</tspan> <tspan x="10" textLength="98" y="176">端发送的数据包</tspan> <tspan x="10" textLength="493" y="196">　　服务器生成一个随机数 2000，填充“序号（Seq）”字段。2000 和客户端数</tspan> <tspan x="10" textLength="98" y="216">据包没有关系。</tspan> <tspan x="10" textLength="472" y="236">　　服务器将客户端数据包序号（1000）加1，得到1001，并用这个数字填</tspan> <tspan x="10" textLength="162" y="256">充“确认号（Ack）”字段。</tspan> <tspan x="10" textLength="294" y="276">　　服务器将数据包发出，进入SYN-RECV状态</tspan> <tspan x="10" textLength="497" y="296">　　3) 客户端收到数据包，检测到已经设置了 SYN 和 ACK 标志位，就知道这是</tspan> <tspan x="10" textLength="486" y="316">服务器发来的“确认包”。客户端会检测“确认号（Ack）”字段，看它的值是否为 </tspan> <tspan x="10" textLength="251" y="336">1000+1，如果是就说明连接建立成功。</tspan></text></g> <g transform="matrix(1,0,0,1,324,5139.5)" id="332" ed:width="32" ed:height="16" ed:parentid="326"><text class="st57"></text></g> <g transform="matrix(1,0,0,1,324,5165.25)" id="334" ed:width="517" ed:height="184" ed:parentid="326"><text class="st57"><tspan x="10" textLength="488" y="16">    数据传输 :    接下来，客户端会继续组建数据包，并设置 ACK 标志位，表示</tspan> <tspan x="10" textLength="487" y="36">客户端正确接收了服务器发来的“确认包”。同时，将刚才服务器发来的数据包序</tspan> <tspan x="10" textLength="470" y="56">号（2000）加1，得到 2001，并用这个数字来填充“确认号（Ack）”字段。</tspan> <tspan x="10" textLength="471" y="76">　　客户端将数据包发出，进入ESTABLISED状态，表示连接已经成功建立。</tspan> <tspan x="10" textLength="498" y="96">      服务器端收到数据包，检测到已经设置了 ACK 标志位，就知道这是客户端发</tspan> <tspan x="10" textLength="430" y="116">来的“确认包”。服务器会检测“确认号（Ack）”字段，看它的值是否为 </tspan> <tspan x="10" textLength="442" y="136">2000+1，如果是就说明连接建立成功，服务器进入ESTABLISED状态。</tspan> <tspan x="10" textLength="485" y="156">　　至此，客户端和服务器都进入了ESTABLISED状态，连接建立成功，接下来</tspan> <tspan x="10" textLength="126" y="176">就可以收发数据了。</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,5359)" id="336" ed:width="87.65625" ed:height="24" ed:parentid="242"><text class="st57"><tspan x="10" textLength="67" y="16">9、close()</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,5392.75)" id="338" ed:width="203" ed:height="24" ed:parentid="336"><text class="st57"><tspan x="10" textLength="182" y="16">数据传输结束了需要断开连接</tspan></text></g> <g transform="matrix(1,0,0,1,324,5426.5)" id="340" ed:width="517" ed:height="64" ed:parentid="338"><text class="st57"><tspan x="10" textLength="490" y="16">断开连接同样重要，它让计算机释放不再使用的资源。如果连接不能正常断开，</tspan> <tspan x="10" textLength="490" y="36">不仅会造成数据传输错误，还会导致套接字不能关闭，持续占用资源，如果并发</tspan> <tspan x="10" textLength="154" y="56">量高，服务器压力堪忧。</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,5500.25)" id="342" ed:width="85.84375" ed:height="24" ed:parentid="336"><text class="st57"><tspan x="10" textLength="65" y="16">四次分手 :</tspan></text></g> <g transform="matrix(1,0,0,1,324,5534)" id="344" ed:width="127.84375" ed:height="24" ed:parentid="342"><text class="st57"><tspan x="10" textLength="107" y="16">参考网上一段话 :</tspan></text></g> <g transform="matrix(1,0,0,1,324,5567.75)" id="346" ed:width="374.46875" ed:height="104" ed:parentid="342"><text class="st57"><tspan x="10" textLength="353" y="16">[Shake 1] 套接字A：“任务处理完毕，我希望断开连接。”</tspan> <tspan x="10" textLength="352" y="36">[Shake 2] 套接字B：“哦，是吗？请稍等，我准备一下。”</tspan> <tspan x="10" textLength="98" y="56">等待片刻后……</tspan> <tspan x="10" textLength="338" y="76">[Shake 3] 套接字B：“我准备好了，可以断开连接了。”</tspan> <tspan x="10" textLength="255" y="96">[Shake 4] 套接字A：“好的，谢谢合作。”</tspan></text></g> <g transform="matrix(1,0,0,1,324,5681.5)" id="348" ed:width="32" ed:height="16" ed:parentid="342"><text class="st57"></text></g> <g transform="matrix(1,0,0,1,270.1,5707.25)" id="350" ed:width="127.421875" ed:height="24" ed:parentid="336"><text class="st57"><tspan x="10" textLength="106" y="16">关于 TIME_WAIT</tspan></text></g> <g transform="matrix(1,0,0,1,324,5741)" id="352" ed:width="58.359375" ed:height="21" ed:parentid="350"><text class="st57"><tspan x="10" textLength="37" y="16">MSL ?</tspan></text></g> <g transform="matrix(1,0,0,1,324,5771.75)" id="354" ed:width="517" ed:height="64" ed:parentid="350"><text class="st57"><tspan x="10" textLength="490" y="16">数据包在网络中是有生存时间的，超过这个时间还未到达目标主机就会被丢弃，</tspan> <tspan x="10" textLength="487" y="36">并通知源主机。这称为报文最大生存时间为 MSL（MSL，Maximum Segment </tspan> <tspan x="10" textLength="69" y="56">Lifetime）</tspan></text></g> <g transform="matrix(1,0,0,1,324,5845.5)" id="356" ed:width="517" ed:height="64" ed:parentid="350"><text class="st57"><tspan x="10" textLength="498" y="16">ACK 包到达服务器需要 MSL 时间，服务器重传 FIN 包也需要 MSL 时间，2MSL </tspan> <tspan x="10" textLength="486" y="36">是数据包往返的最大时间 ，如果 2MSL 后还未收到服务器重传的 FIN 包，就说</tspan> <tspan x="10" textLength="177" y="56">明服务器已经收到了 ACK 包</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,5919.25)" id="358" ed:width="71.84375" ed:height="24" ed:parentid="238"><text class="st57"><tspan x="10" textLength="51" y="16">长连接 :</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,5953)" id="360" ed:width="57.84375" ed:height="24" ed:parentid="358"><text class="st57"><tspan x="10" textLength="37" y="16">说明 :</tspan></text></g> <g transform="matrix(1,0,0,1,264.02,5986.75)" id="362" ed:width="32" ed:height="16" ed:parentid="360"><text class="st57"></text></g> <g transform="matrix(1,0,0,1,264.02,6012.5)" id="364" ed:width="435.84375" ed:height="24" ed:parentid="360"><text class="st57"><tspan x="10" textLength="415" y="16">长连接简单解释就是一直保持通信连接状态, 直到一方要求断开为止</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,6046.25)" id="366" ed:width="182.65625" ed:height="24" ed:parentid="358"><text class="st57"><tspan x="10" textLength="162" y="16">Socket 如何 保持长连接 ?</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,6080)" id="368" ed:width="475.828125" ed:height="24" ed:parentid="366"><text class="st57"><tspan x="10" textLength="455" y="16">Socket 是 TCP/UDP 层的封装，通过 socket，我们就能进行 TCP 通信。</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,6113.75)" id="370" ed:width="517" ed:height="44" ed:parentid="366"><text class="st57"><tspan x="10" textLength="484" y="16">而socket封装一个setKeepAlive方法保持长连接, 但是时间间隔是2小时发送一</tspan> <tspan x="10" textLength="135" y="36">次心跳, 但是时间太长</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,6167.5)" id="372" ed:width="391.5" ed:height="24" ed:parentid="366"><text class="st57"><tspan x="10" textLength="371" y="16">所以,需要通过一个短时间间隔来发送心跳保持socket长连接</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,6201.25)" id="374" ed:width="87.328125" ed:height="24" ed:parentid="358"><text class="st57"><tspan x="10" textLength="66" y="16">何为心跳 ?</tspan></text></g> <g transform="matrix(1,0,0,1,270.1,6235)" id="376" ed:width="517" ed:height="44" ed:parentid="374"><text class="st57"><tspan x="10" textLength="491" y="16">心跳就是每隔一段时间就向服务端发送一次请求,以保持socket一直连接, 返回数</tspan> <tspan x="10" textLength="286" y="36">据简单使用0, 1来表示状态, 比如0 下线,1上线</tspan></text></g> <g transform="matrix(1,0,0,1,324,6288.75)" id="378" ed:width="175" ed:height="24" ed:parentid="376"><text class="st57"><tspan x="10" textLength="154" y="16">返回状态要区别正常请求</tspan></text></g> <g transform="matrix(1,0,0,1,162.3,6322.5)" id="380" ed:width="221.578125" ed:height="24" ed:parentid="238"><text class="st57"><tspan x="10" textLength="201" y="16">CocoaAsyncSocket 实现长连接</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,6363.25)" id="386" ed:width="435.515625" ed:height="308" ed:parentid="380"><text class="st57"><tspan x="10" textLength="215" y="16">#import &quot;GCDSocketManager.h&quot;</tspan> <tspan x="10" textLength="186" y="50">#define SocketHost @&quot;地址&quot;</tspan> <tspan x="10" textLength="160" y="70">#define SocketPort 端口</tspan> <tspan x="10" textLength="415" y="107">@interface GCDSocketManager()&lt;GCDAsyncSocketDelegate&gt;</tspan> <tspan x="10" textLength="71" y="141">//握手次数</tspan> <tspan x="10" textLength="352" y="161">@property(nonatomic,assign) NSInteger pushCount;</tspan> <tspan x="10" textLength="113" y="195">//断开重连定时器</tspan> <tspan x="10" textLength="313" y="215">@property(nonatomic,strong) NSTimer *timer;</tspan> <tspan x="10" textLength="71" y="249">//重连次数</tspan> <tspan x="10" textLength="386" y="269">@property(nonatomic,assign) NSInteger reconnectCount;</tspan> <tspan x="10" textLength="37" y="303">@end</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,6695)" id="388" ed:width="517" ed:height="807" ed:parentid="380"><text class="st57"><tspan x="10" textLength="256" y="16">@implementation GCDSocketManager</tspan> <tspan x="10" textLength="85" y="50">//全局访问点</tspan> <tspan x="10" textLength="268" y="70">+ (instancetype)sharedSocketManager {</tspan> <tspan x="10" textLength="308" y="87">    static GCDSocketManager *_instance = nil;</tspan> <tspan x="10" textLength="251" y="104">    static dispatch_once_t onceToken;</tspan> <tspan x="10" textLength="225" y="121">    dispatch_once(&amp;onceToken, ^{</tspan> <tspan x="10" textLength="228" y="138">        _instance = [[self alloc] init];</tspan> <tspan x="10" textLength="31" y="155">    });</tspan> <tspan x="10" textLength="132" y="172">    return _instance;</tspan> <tspan x="10" textLength="5" y="189">}</tspan> <tspan x="10" textLength="197" y="223">//可以在这里做一些初始化操作</tspan> <tspan x="10" textLength="129" y="243">- (instancetype)init</tspan> <tspan x="10" textLength="5" y="260">{</tspan> <tspan x="10" textLength="140" y="277">    self = [super init];</tspan> <tspan x="10" textLength="73" y="294">    if (self) {</tspan> <tspan x="10" textLength="35" y="311"></tspan> <tspan x="10" textLength="22" y="328">    }</tspan> <tspan x="10" textLength="92" y="345">    return self;</tspan> <tspan x="10" textLength="5" y="362">}</tspan> <tspan x="10" textLength="160" y="396">#pragma mark 请求连接</tspan> <tspan x="10" textLength="43" y="416">//连接</tspan> <tspan x="10" textLength="172" y="436">- (void)connectToServer {</tspan> <tspan x="10" textLength="154" y="453">    self.pushCount = 0;</tspan> <tspan x="10" textLength="18" y="470"></tspan> <tspan x="10" textLength="424" y="487">    self.socket = [[GCDAsyncSocket alloc] initWithDelegate:self </tspan> <tspan x="10" textLength="300" y="504">delegateQueue:dispatch_get_main_queue()];</tspan> <tspan x="10" textLength="18" y="521"></tspan> <tspan x="10" textLength="155" y="538">    NSError *error = nil;</tspan> <tspan x="10" textLength="411" y="555">    [self.socket connectToHost:SocketHost onPort:SocketPort </tspan> <tspan x="10" textLength="90" y="572">error:&amp;error];</tspan> <tspan x="10" textLength="18" y="589"></tspan> <tspan x="10" textLength="83" y="606">    if (error) {</tspan> <tspan x="10" textLength="304" y="623">        DLog(@&quot;SocketConnectError:%@&quot;,error);</tspan> <tspan x="10" textLength="22" y="640">    }</tspan> <tspan x="10" textLength="5" y="657">}</tspan> <tspan x="10" textLength="160" y="691">#pragma mark 连接成功</tspan> <tspan x="10" textLength="113" y="711">//连接成功的回调</tspan> <tspan x="10" textLength="467" y="731">- (void)socket:(GCDAsyncSocket *)sock didConnectToHost:(NSString </tspan> <tspan x="10" textLength="181" y="748">*)host port:(uint16_t)port {</tspan> <tspan x="10" textLength="189" y="765">    DLog(@&quot;socket连接成功&quot;);</tspan> <tspan x="10" textLength="183" y="785">    [self sendDataToServer];</tspan> <tspan x="10" textLength="5" y="802">}</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,7518.75)" id="390" ed:width="62.265625" ed:height="24" ed:parentid="380"><text class="st57"><tspan x="10" textLength="41" y="16">部分3:</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,7559.5)" id="392" ed:width="517" ed:height="913" ed:parentid="380"><text class="st57"><tspan x="10" textLength="197" y="16">//连接成功后向服务器发送数据</tspan> <tspan x="10" textLength="182" y="36">- (void)sendDataToServer {</tspan> <tspan x="10" textLength="158" y="53">    //发送数据代码省略...</tspan> <tspan x="10" textLength="18" y="73"></tspan> <tspan x="10" textLength="60" y="90">    //发送</tspan> <tspan x="10" textLength="387" y="110">    [self.socket writeData:jsonData withTimeout:-1 tag:1];</tspan> <tspan x="10" textLength="18" y="127"></tspan> <tspan x="10" textLength="88" y="144">    //读取数据</tspan> <tspan x="10" textLength="334" y="164">    [self.socket readDataWithTimeout:-1 tag:200];</tspan> <tspan x="10" textLength="5" y="181">}</tspan> <tspan x="10" textLength="299" y="215">//连接成功向服务器发送数据后,服务器会有响应</tspan> <tspan x="10" textLength="463" y="235">- (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data </tspan> <tspan x="10" textLength="128" y="252">withTag:(long)tag {</tspan> <tspan x="10" textLength="18" y="269"></tspan> <tspan x="10" textLength="334" y="286">    [self.socket readDataWithTimeout:-1 tag:200];</tspan> <tspan x="10" textLength="18" y="303"></tspan> <tspan x="10" textLength="130" y="320">    //服务器推送次数</tspan> <tspan x="10" textLength="147" y="340">    self.pushCount++;</tspan> <tspan x="10" textLength="18" y="357"></tspan> <tspan x="10" textLength="485" y="374">   //在这里进行校验操作,情况分为成功和失败两种,成功的操作一般都是拉取数</tspan> <tspan x="10" textLength="14" y="394">据</tspan> <tspan x="10" textLength="5" y="414">}</tspan> <tspan x="10" textLength="160" y="448">#pragma mark 连接失败</tspan> <tspan x="10" textLength="113" y="468">//连接失败的回调</tspan> <tspan x="10" textLength="494" y="488">- (void)socketDidDisconnect:(GCDAsyncSocket *)sock withError:(NSError </tspan> <tspan x="10" textLength="39" y="505">*)err {</tspan> <tspan x="10" textLength="189" y="522">    DLog(@&quot;Socket连接失败&quot;);</tspan> <tspan x="10" textLength="18" y="542"></tspan> <tspan x="10" textLength="154" y="559">    self.pushCount = 0;</tspan> <tspan x="10" textLength="18" y="576"></tspan> <tspan x="10" textLength="352" y="593">    NSUserDefaults *userDefaults = [NSUserDefaults </tspan> <tspan x="10" textLength="155" y="610">standardUserDefaults];</tspan> <tspan x="10" textLength="18" y="627"></tspan> <tspan x="10" textLength="436" y="644">    NSString *currentStatu = [userDefaults valueForKey:@&quot;Statu&quot;];</tspan> <tspan x="10" textLength="18" y="661"></tspan> <tspan x="10" textLength="172" y="678">    //程序在前台才进行重连</tspan> <tspan x="10" textLength="355" y="698">    if ([currentStatu isEqualToString:@&quot;foreground&quot;]) {</tspan> <tspan x="10" textLength="35" y="715"></tspan> <tspan x="10" textLength="106" y="732">        //重连次数</tspan> <tspan x="10" textLength="198" y="752">        self.reconnectCount++;</tspan> <tspan x="10" textLength="35" y="769"></tspan> <tspan x="10" textLength="348" y="786">        //如果连接失败 累加1秒重新连接 减少服务器压力</tspan> <tspan x="10" textLength="491" y="806">        NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:1.0 * </tspan> <tspan x="10" textLength="460" y="823">self.reconnectCount target:self selector:@selector(reconnectServer) </tspan> <tspan x="10" textLength="166" y="840">userInfo:nil repeats:NO];</tspan> <tspan x="10" textLength="35" y="857"></tspan> <tspan x="10" textLength="160" y="874">        self.timer = timer;</tspan> <tspan x="10" textLength="22" y="891">    }</tspan> <tspan x="10" textLength="5" y="908">}</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,8489.25)" id="394" ed:width="62.265625" ed:height="24" ed:parentid="380"><text class="st57"><tspan x="10" textLength="41" y="16">部分4:</tspan></text></g> <g transform="matrix(1,0,0,1,216.2,8530)" id="396" ed:width="517" ed:height="546" ed:parentid="380"><text class="st57"><tspan x="10" textLength="196" y="16">//如果连接失败,5秒后重新连接</tspan> <tspan x="10" textLength="168" y="36">- (void)reconnectServer {</tspan> <tspan x="10" textLength="18" y="53"></tspan> <tspan x="10" textLength="154" y="70">    self.pushCount = 0;</tspan> <tspan x="10" textLength="18" y="87"></tspan> <tspan x="10" textLength="187" y="104">    self.reconnectCount = 0;</tspan> <tspan x="10" textLength="18" y="121"></tspan> <tspan x="10" textLength="144" y="138">    //连接失败重新连接</tspan> <tspan x="10" textLength="155" y="158">    NSError *error = nil;</tspan> <tspan x="10" textLength="411" y="175">    [self.socket connectToHost:SocketHost onPort:SocketPort </tspan> <tspan x="10" textLength="90" y="192">error:&amp;error];</tspan> <tspan x="10" textLength="83" y="209">    if (error) {</tspan> <tspan x="10" textLength="304" y="226">        DLog(@&quot;SocektConnectError:%@&quot;,error);</tspan> <tspan x="10" textLength="22" y="243">    }</tspan> <tspan x="10" textLength="5" y="260">}</tspan> <tspan x="10" textLength="160" y="294">#pragma mark 断开连接</tspan> <tspan x="10" textLength="71" y="314">//切断连接</tspan> <tspan x="10" textLength="146" y="334">- (void)cutOffSocket {</tspan> <tspan x="10" textLength="189" y="351">    DLog(@&quot;socket断开连接&quot;);</tspan> <tspan x="10" textLength="18" y="371"></tspan> <tspan x="10" textLength="154" y="388">    self.pushCount = 0;</tspan> <tspan x="10" textLength="18" y="405"></tspan> <tspan x="10" textLength="187" y="422">    self.reconnectCount = 0;</tspan> <tspan x="10" textLength="18" y="439"></tspan> <tspan x="10" textLength="165" y="456">    [self.timer invalidate];</tspan> <tspan x="10" textLength="123" y="473">    self.timer = nil;</tspan> <tspan x="10" textLength="18" y="490"></tspan> <tspan x="10" textLength="182" y="507">    [self.socket disconnect];</tspan> <tspan x="10" textLength="5" y="524">}</tspan> <tspan x="10" textLength="37" y="541">@end</tspan></text></g></svg></div> <div id="copyright">Created With  <a href="https://www.edrawsoft.com/" target="_blank" title="edrawsoft">MindMaster</a></div></div></div></body></html></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/e01d5e/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Delegate</div></a> <a href="/pages/44385c/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">随笔</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/e01d5e/" class="prev">Delegate</a></span> <span class="next"><a href="/pages/44385c/">随笔</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> <!----></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.106733fc.js" defer></script><script src="/assets/js/2.d54d51d6.js" defer></script><script src="/assets/js/37.e817d0de.js" defer></script>
  </body>
</html>
