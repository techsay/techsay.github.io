<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>intel-32基础语法(上) | 知识导图</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/images/hlogo.png">
    <meta name="description" content="复杂的知识体系需要一套精简的知识导图作参考和索引">
    
    <link rel="preload" href="/assets/css/0.styles.3623805a.css" as="style"><link rel="preload" href="/assets/js/app.956f6e98.js" as="script"><link rel="preload" href="/assets/js/2.d54d51d6.js" as="script"><link rel="preload" href="/assets/js/91.27dbd9c9.js" as="script"><link rel="prefetch" href="/assets/js/10.7d5d06ea.js"><link rel="prefetch" href="/assets/js/100.c52b0ea4.js"><link rel="prefetch" href="/assets/js/101.97dc2f7b.js"><link rel="prefetch" href="/assets/js/102.b5b9abc6.js"><link rel="prefetch" href="/assets/js/103.de0678e3.js"><link rel="prefetch" href="/assets/js/104.162a790f.js"><link rel="prefetch" href="/assets/js/105.4b96688c.js"><link rel="prefetch" href="/assets/js/11.73300a98.js"><link rel="prefetch" href="/assets/js/12.1574de4b.js"><link rel="prefetch" href="/assets/js/13.9e1cff29.js"><link rel="prefetch" href="/assets/js/14.9dd4e9b0.js"><link rel="prefetch" href="/assets/js/15.fb4a4e30.js"><link rel="prefetch" href="/assets/js/16.a9978a2f.js"><link rel="prefetch" href="/assets/js/17.d161c4a3.js"><link rel="prefetch" href="/assets/js/18.0a3f80f9.js"><link rel="prefetch" href="/assets/js/19.27c43cea.js"><link rel="prefetch" href="/assets/js/20.76b66c8b.js"><link rel="prefetch" href="/assets/js/21.3d69b68c.js"><link rel="prefetch" href="/assets/js/22.b8fc92f0.js"><link rel="prefetch" href="/assets/js/23.dbf3b98b.js"><link rel="prefetch" href="/assets/js/24.cb857455.js"><link rel="prefetch" href="/assets/js/25.6b10ac06.js"><link rel="prefetch" href="/assets/js/26.cbceffcf.js"><link rel="prefetch" href="/assets/js/27.bddb79bc.js"><link rel="prefetch" href="/assets/js/28.9b9d939d.js"><link rel="prefetch" href="/assets/js/29.127f1213.js"><link rel="prefetch" href="/assets/js/3.e19cb12c.js"><link rel="prefetch" href="/assets/js/30.60bccf99.js"><link rel="prefetch" href="/assets/js/31.34b286a8.js"><link rel="prefetch" href="/assets/js/32.991b2f63.js"><link rel="prefetch" href="/assets/js/33.e6f327b7.js"><link rel="prefetch" href="/assets/js/34.b69bbc21.js"><link rel="prefetch" href="/assets/js/35.bab297ed.js"><link rel="prefetch" href="/assets/js/36.8a119b34.js"><link rel="prefetch" href="/assets/js/37.d029e9f3.js"><link rel="prefetch" href="/assets/js/38.46eb20a4.js"><link rel="prefetch" href="/assets/js/39.d793e68f.js"><link rel="prefetch" href="/assets/js/4.dd3209f8.js"><link rel="prefetch" href="/assets/js/40.b7b51498.js"><link rel="prefetch" href="/assets/js/41.151e380a.js"><link rel="prefetch" href="/assets/js/42.b07e21d1.js"><link rel="prefetch" href="/assets/js/43.3e777f06.js"><link rel="prefetch" href="/assets/js/44.11fa5c7b.js"><link rel="prefetch" href="/assets/js/45.7052c909.js"><link rel="prefetch" href="/assets/js/46.40032702.js"><link rel="prefetch" href="/assets/js/47.5b51cc93.js"><link rel="prefetch" href="/assets/js/48.39927459.js"><link rel="prefetch" href="/assets/js/49.3448b4a9.js"><link rel="prefetch" href="/assets/js/5.54c64e18.js"><link rel="prefetch" href="/assets/js/50.b030173a.js"><link rel="prefetch" href="/assets/js/51.1bbf6ad8.js"><link rel="prefetch" href="/assets/js/52.8558681f.js"><link rel="prefetch" href="/assets/js/53.288a22ed.js"><link rel="prefetch" href="/assets/js/54.ce3b3e40.js"><link rel="prefetch" href="/assets/js/55.1317e68e.js"><link rel="prefetch" href="/assets/js/56.24e8e377.js"><link rel="prefetch" href="/assets/js/57.ab29406a.js"><link rel="prefetch" href="/assets/js/58.a2e3804d.js"><link rel="prefetch" href="/assets/js/59.6a3257e7.js"><link rel="prefetch" href="/assets/js/6.a78acc98.js"><link rel="prefetch" href="/assets/js/60.80e92dda.js"><link rel="prefetch" href="/assets/js/61.7cdefce5.js"><link rel="prefetch" href="/assets/js/62.080e9027.js"><link rel="prefetch" href="/assets/js/63.12fb6ff0.js"><link rel="prefetch" href="/assets/js/64.f472bfdc.js"><link rel="prefetch" href="/assets/js/65.0f2d77db.js"><link rel="prefetch" href="/assets/js/66.cf918f88.js"><link rel="prefetch" href="/assets/js/67.e2a894dc.js"><link rel="prefetch" href="/assets/js/68.d02214b4.js"><link rel="prefetch" href="/assets/js/69.da9c776f.js"><link rel="prefetch" href="/assets/js/7.26888c57.js"><link rel="prefetch" href="/assets/js/70.3accafd4.js"><link rel="prefetch" href="/assets/js/71.cf06ab59.js"><link rel="prefetch" href="/assets/js/72.07426e29.js"><link rel="prefetch" href="/assets/js/73.2ca0934c.js"><link rel="prefetch" href="/assets/js/74.6ccd29d1.js"><link rel="prefetch" href="/assets/js/75.8180abcb.js"><link rel="prefetch" href="/assets/js/76.6b08ec10.js"><link rel="prefetch" href="/assets/js/77.d4b5ae3e.js"><link rel="prefetch" href="/assets/js/78.b26c414a.js"><link rel="prefetch" href="/assets/js/79.2734e666.js"><link rel="prefetch" href="/assets/js/8.9ae79d10.js"><link rel="prefetch" href="/assets/js/80.5cf7acc5.js"><link rel="prefetch" href="/assets/js/81.74f2c69e.js"><link rel="prefetch" href="/assets/js/82.9fb21468.js"><link rel="prefetch" href="/assets/js/83.464889d9.js"><link rel="prefetch" href="/assets/js/84.26038405.js"><link rel="prefetch" href="/assets/js/85.92d110c1.js"><link rel="prefetch" href="/assets/js/86.f8b3b40c.js"><link rel="prefetch" href="/assets/js/87.68c7849a.js"><link rel="prefetch" href="/assets/js/88.be47d7d8.js"><link rel="prefetch" href="/assets/js/89.33c7ca04.js"><link rel="prefetch" href="/assets/js/9.c437635c.js"><link rel="prefetch" href="/assets/js/90.43c46931.js"><link rel="prefetch" href="/assets/js/92.8830c207.js"><link rel="prefetch" href="/assets/js/93.1d548ae4.js"><link rel="prefetch" href="/assets/js/94.ceac6b41.js"><link rel="prefetch" href="/assets/js/95.4f604719.js"><link rel="prefetch" href="/assets/js/96.090aa727.js"><link rel="prefetch" href="/assets/js/97.962db54a.js"><link rel="prefetch" href="/assets/js/98.6a0b73a3.js"><link rel="prefetch" href="/assets/js/99.9b257d4a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3623805a.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/logo2.png" alt="知识导图" class="logo"> <span class="site-name can-hide">知识导图</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/2f79a9/" class="nav-link">iOS知识</a></div><div class="nav-item"><a href="/pages/603316/" class="nav-link">计算机软件</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友情链接" class="dropdown-title"><!----> <span class="title" style="display:;">友情链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.52im.net/index.php" target="_blank" rel="noopener noreferrer" class="nav-link external">
  即时通讯网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://zhuanlan.zhihu.com/p/409277420" target="_blank" rel="noopener noreferrer" class="nav-link external">
  开发常用网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/2f79a9/" class="nav-link">iOS知识</a></div><div class="nav-item"><a href="/pages/603316/" class="nav-link">计算机软件</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友情链接" class="dropdown-title"><!----> <span class="title" style="display:;">友情链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.52im.net/index.php" target="_blank" rel="noopener noreferrer" class="nav-link external">
  即时通讯网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://zhuanlan.zhihu.com/p/409277420" target="_blank" rel="noopener noreferrer" class="nav-link external">
  开发常用网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MD</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>C语法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>C++语法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>汇编语言</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/3f6221/" class="sidebar-link">Day1-前言</a></li><li><a href="/pages/3420aa/" class="sidebar-link">Day2-语言发展</a></li><li><a href="/pages/712a44/" aria-current="page" class="active sidebar-link">intel-32基础语法(上)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/712a44/#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header level2"><a href="/pages/712a44/#基本结构" class="sidebar-link">基本结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/712a44/#hello-world" class="sidebar-link">Hello World</a></li><li class="sidebar-sub-header level3"><a href="/pages/712a44/#语法结构" class="sidebar-link">语法结构</a></li><li class="sidebar-sub-header level3"><a href="/pages/712a44/#intel32程序三个段结构" class="sidebar-link">intel32程序三个段结构</a></li><li class="sidebar-sub-header level3"><a href="/pages/712a44/#_1、data段" class="sidebar-link">1、data段</a></li><li class="sidebar-sub-header level3"><a href="/pages/712a44/#_2、bss-段" class="sidebar-link">2、bss 段</a></li><li class="sidebar-sub-header level3"><a href="/pages/712a44/#_3、text段" class="sidebar-link">3、text段</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/712a44/#寄存器" class="sidebar-link">寄存器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/712a44/#常见寄存器" class="sidebar-link">常见寄存器</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/712a44/#汇编命令" class="sidebar-link">汇编命令</a></li><li class="sidebar-sub-header level2"><a href="/pages/712a44/#变量" class="sidebar-link">变量</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/712a44/#define-变量内存分配、创建-alloc" class="sidebar-link">define：变量内存分配、创建（alloc）</a></li><li class="sidebar-sub-header level3"><a href="/pages/712a44/#示例-输出字符串-xyz" class="sidebar-link">示例：输出字符串 xyz</a></li><li class="sidebar-sub-header level3"><a href="/pages/712a44/#reserve-变量内存释放-release" class="sidebar-link">reserve：变量内存释放（release）</a></li><li class="sidebar-sub-header level3"><a href="/pages/712a44/#示例-申请空间并打印" class="sidebar-link">示例：申请空间并打印</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/712a44/#常量" class="sidebar-link">常量</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/712a44/#常量定义" class="sidebar-link">常量定义</a></li><li class="sidebar-sub-header level3"><a href="/pages/712a44/#示例" class="sidebar-link">示例</a></li><li class="sidebar-sub-header level3"><a href="/pages/712a44/#汇编equ示例" class="sidebar-link">汇编EQU示例</a></li><li class="sidebar-sub-header level3"><a href="/pages/712a44/#汇编宏示例" class="sidebar-link">汇编宏示例</a></li></ul></li></ul></li><li><a href="/pages/e62c69/" class="sidebar-link">intel-32基础语法(中)</a></li><li><a href="/pages/e593e1/" class="sidebar-link">intel-32基础语法(下)</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>软件编程及算法</span></li><li data-v-06225672><span data-v-06225672>汇编语言</span></li></ul> <div class="info" data-v-06225672><!----> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-08-16</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">intel-32基础语法(上)<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>汇编语言多种多样，不同于其他语言，汇编指令对接的是硬件，所以不同厂家，甚至相同的厂家的不同芯片都有不同的汇编指令集。</p> <p>因此花时间学完所有的汇编指令显得不必要，只要对主流的汇编语法学习然后融会贯通即可。</p> <p>常见学习的汇编：</p> <p>1、8086汇编，intel-16，早期较为基础的汇编指令，也是入门常用的汇编学习版本，大学教材《王爽汇编xx》</p> <p>2、intel-32位 ，intel的32位芯片</p> <p>3、intel-64，现在主流的intel芯片版本</p> <p>4、ARM-64，ARM当前主流的版本</p> <p>⚠️ 注意：</p> <p>本篇以C++语法对比介绍intel-32汇编指令集（无特殊说明的，下面介绍的汇编指令均为 intel-32 指令集）</p> <h2 id="基本结构"><a href="#基本结构" class="header-anchor">#</a> 基本结构</h2> <h3 id="hello-world"><a href="#hello-world" class="header-anchor">#</a> Hello World</h3> <p>Hello World 示例对比</p> <p>1、C++ 显示字符串“ Hello World”</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span> <span class="token comment">// 引入支持输入输出的库</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span> <span class="token comment">// 命名空间</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 程序开始执行入口函数</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">;</span> <span class="token comment">// cout 输出</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
</code></pre></div><p><a href="https://c.runoob.com/compile/12/" target="_blank" rel="noopener noreferrer">C++在线编译（菜鸟工具）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>2、intel32汇编语言显示字符串“ Hello World”</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token keyword">section .text</span>
   <span class="token keyword">global _start   </span>

<span class="token label function">_start:</span>          
   mov  <span class="token register variable">edx</span>,len   
   mov  <span class="token register variable">ecx</span>,msg    
   mov  <span class="token register variable">ebx</span>,<span class="token number">1</span>      
   mov  <span class="token register variable">eax</span>,<span class="token number">4</span>       
   int  <span class="token number">0x80</span>       

   mov  <span class="token register variable">eax</span>,<span class="token number">1</span>      
   int  <span class="token number">0x80</span>     

<span class="token keyword">section .data</span>
msg db <span class="token string">'Hello, world!'</span>, <span class="token number">0xa</span>  
len equ <span class="token operator">$</span> <span class="token operator">-</span> msg    
</code></pre></div><p><a href="https://www.jc2182.com/runcode.html?filename=helloword&amp;type=21&amp;module=jiaocheng" target="_blank" rel="noopener noreferrer">链接：intel32汇编在线编译<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>上面结果都是打印一个  'Hello, world!' 但是，</p> <p>显然汇编语法较为复杂，下面将先从结构上介绍他们的区别。</p> <p>（具体 ax、bx、cx、dx、int 等指令后面再介绍）</p> <h3 id="语法结构"><a href="#语法结构" class="header-anchor">#</a> 语法结构</h3> <p>改造C++  Hello World示例语法：</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span> <span class="token comment">// 引入支持输入输出的库</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span> <span class="token comment">// 命名空间</span>

<span class="token comment">// 1、data段: 被定义不可修改的数据常量</span>
<span class="token keyword">const</span> string msg <span class="token operator">=</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 2、text段：程序代码</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 3、程序入口函数</span>
	
    cout <span class="token operator">&lt;&lt;</span> msg<span class="token punctuation">;</span> <span class="token comment">// cout 输出</span>
		<span class="token comment">// 4、程序返回</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// ret</span>
<span class="token punctuation">}</span> 
</code></pre></div><p>汇编代码： Hello World</p> <div class="language-assembly extra-class"><pre class="language-text"><code>; 1、data段: 被定义不可修改的数据常量
section	.data
msg db 'Hello, world!', 0xa  ;要打印的字符串
len equ $ - msg     ;字符串的长度，尾地址（$）- 起始地址（msg[0]）= 字符串长度 

; 2、text段：程序代码
section	.text
   global _start     ;必须为链接器(ld)声明

_start:	            ; 3、程序入口函数：告诉链接器入口点
   mov	edx,len     ;消息长度
   mov	ecx,msg     ;写消息
   mov	ebx,1       ;文件描述符 (stdout)
   mov	eax,4       ;系统调用号 (sys_write)
   int	0x80        ;调用内核

   mov	eax,1       ;系统调用号 (sys_exit)
   ; 4、程序中断 
   int	0x80        ;调用内核
</code></pre></div><p>对比两段代码（大概类比，方便记忆）：</p> <p><strong>1、data段:</strong></p> <p>被定义不可修改的数据常量，其中数据 **msg db ***** 等同于C++ 常量  <strong>const string msg</strong></p> <p><strong>2、text段：声明</strong></p> <p>程序代码，比如入口函数声明 <strong>global _start</strong> 等同于C++ main函数声明 <strong>int main();</strong></p> <p><strong>3、text段：程序实现</strong></p> <p>程序入口函数</p> <p>代码实现  <strong>_start:</strong> 等同于 C++ main函数 实现  <strong>int main(){ *** }</strong></p> <p><strong>4、text段：执行中断或退出</strong></p> <p>一个程序的函数通常会在使用完后中断退出</p> <p>mov	eax,1   ;系统调用sys_exit，相当main函数的退出，也即是进程退出</p> <p>返回：</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>mov	eax<span class="token punctuation">,</span><span class="token number">4</span>
<span class="token keyword">int</span>	<span class="token number">0x80</span> <span class="token punctuation">;</span>调用内核中断

上面两句相当于函数（过程）的返回吧，
<span class="token keyword">return</span> ：C<span class="token operator">++</span>中当前函数执行完毕
</code></pre></div><p><strong>5、屏幕输出</strong></p> <p>cout ： c++屏幕输出</p> <p>mov	ebx,1       ;文件描述符 (stdout)</p> <p><strong>6、注释</strong></p> <p>intel32汇编语言 <strong>行</strong>注释以分号（;）开头</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token comment">; 注释信息</span>
</code></pre></div><p>C++中<strong>行</strong>注释</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// 注释信息</span>
</code></pre></div><p>(还有其他多种注释方法)</p> <h3 id="intel32程序三个段结构"><a href="#intel32程序三个段结构" class="header-anchor">#</a> intel32程序三个段结构</h3> <h3 id="_1、data段"><a href="#_1、data段" class="header-anchor">#</a> 1、data段</h3> <p><strong>数据（data）段</strong>被用于声明初始化的数据或常数。此数据在运行时不会更改。您可以在段中声明各种常量值，文件名或缓冲区大小等。</p> <p>声明数据段的语法是-</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token keyword">section.data</span>
</code></pre></div><h3 id="_2、bss-段"><a href="#_2、bss-段" class="header-anchor">#</a> 2、bss 段</h3> <p>在<strong>bss段</strong>用于声明变量。声明bss段的语法是-</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token keyword">section .bss</span>           <span class="token comment">;未初始化的数据</span>
   num resb <span class="token number">8</span>
</code></pre></div><h3 id="_3、text段"><a href="#_3、text段" class="header-anchor">#</a> 3、text段</h3> <p><strong>代码段</strong>被用于保持实际的代码。该段必须以全局声明**_start**开头，该声明告诉内核程序从何处开始执行。</p> <p>声明代码段的语法是-</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token keyword">section.text</span>
   <span class="token keyword">global _start</span>
<span class="token label function">_start:</span>
</code></pre></div><h2 id="寄存器"><a href="#寄存器" class="header-anchor">#</a> 寄存器</h2> <h3 id="常见寄存器"><a href="#常见寄存器" class="header-anchor">#</a> 常见寄存器</h3> <table><thead><tr><th>寄存器</th> <th>16位</th> <th>32位</th> <th>64位</th></tr></thead> <tbody><tr><td>累加寄存器 <code>accumulator</code></td> <td>AX</td> <td><strong>E</strong>AX</td> <td><strong>R</strong>AX</td></tr> <tr><td>基址寄存器 <code>base</code></td> <td>BX</td> <td><strong>E</strong>BX</td> <td><strong>R</strong>BX</td></tr> <tr><td>计数寄存器 <code>count</code></td> <td>CX</td> <td><strong>E</strong>CX</td> <td><strong>R</strong>CX</td></tr> <tr><td>数据寄存器 <code>data</code></td> <td>DX</td> <td><strong>E</strong>DX</td> <td><strong>R</strong>DX</td></tr> <tr><td>堆栈基指针 <code>Base Pointer</code></td> <td>BP</td> <td><strong>E</strong>BP</td> <td><strong>R</strong>BP</td></tr> <tr><td>变址寄存器 <code>Source Index</code></td> <td>SI</td> <td><strong>E</strong>SI</td> <td><strong>R</strong>SI</td></tr> <tr><td>堆栈顶指针 <code>Stack Pointer</code></td> <td>SP</td> <td><strong>E</strong>SP</td> <td><strong>R</strong>SP</td></tr> <tr><td>指令寄存器 <code>Instruction Pointer</code></td> <td>IP</td> <td><strong>E</strong>IP</td> <td><strong>R</strong>IP</td></tr></tbody></table> <div class="language- extra-class"><pre class="language-text"><code>AH&amp;AL＝AX(accumulator)：累加寄存器 
BH&amp;BL＝BX(base)：基址寄存器 
CH&amp;CL＝CX(count)：计数寄存器 
DH&amp;DL＝DX(data)：数据寄存器 
SP（Stack Pointer）：堆栈指针寄存器 
BP（Base Pointer）：基址指针寄存器 
SI（Source Index）：源变址寄存器 
DI（Destination Index）：目的变址寄存器 
IP（Instruction Pointer）：指令指针寄存器 
CS（Code Segment）代码段寄存器 
DS（Data Segment）：数据段寄存器 
SS（Stack Segment）：堆栈段寄存器 
ES（Extra Segment）：附加段寄存器 
</code></pre></div><p>⚠️</p> <p>1、你会发现寄存器指令名称基本是在16位基础上衍生而来，比如32位 EAX是在16 位AX前加E，64 位 RAX是在16 位AX前加R</p> <p>2、H是高位缩写，L是低位缩写。比如 AX 由AH 高位和AL低位组合，这是为兼容8位寄存器而来</p> <p>3、篇头demo中下面代码什么意思？</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token label function">_start:</span>	            <span class="token comment">; 3、程序入口函数：告诉链接器入口点</span>
   mov	<span class="token register variable">edx</span>,len     <span class="token comment">;消息长度</span>
   mov	<span class="token register variable">ecx</span>,msg     <span class="token comment">;写消息</span>
   mov	<span class="token register variable">ebx</span>,<span class="token number">1</span>       <span class="token comment">;文件描述符 (stdout)</span>
   mov	<span class="token register variable">eax</span>,<span class="token number">4</span>       <span class="token comment">;系统调用号 (sys_write)</span>
   int	<span class="token number">0x80</span>        <span class="token comment">;调用内核</span>
</code></pre></div><p>拆分解释一下：</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token comment">; 程序入口函数：告诉链接器入口点，加这个好理解，就是main函数</span>
<span class="token label function">_start:</span>	            
   
   <span class="token comment">;比如C语法中 int a = 1; 就默认处理好了变量a的数据长度，通常是4字节，代码底层帮你申请了对应大小的空间，通常使用 alloc 分配。</span>
   <span class="token comment">;而在汇编中可以通过 dx 告诉编译器当前对象的需要分配的内存大小，</span>
   mov	<span class="token register variable">edx</span>,len     <span class="token comment">;消息长度</span>
   
   <span class="token comment">; int a = 1 中，赋值1给变量a的过程在汇编中可以使用 cx 这个指令</span>
   <span class="token comment">; mov 赋值，msg 数据， cx 指向真实的物理地址，将内容写入的地方</span>
   mov	<span class="token register variable">ecx</span>,msg     <span class="token comment">;写消息</span>
   
   <span class="token comment">;这个就是打印指令，也即是输出指令，cout、print、等等类似</span>
   <span class="token comment">;在bx寄存器中写入1就是输出信息</span>
   mov	<span class="token register variable">ebx</span>,<span class="token number">1</span>       <span class="token comment">;文件描述符 (stdout)</span>
   
   <span class="token comment">;ax中写入100（4）即是相当于函数的返回指令，告诉CPU下面函数过程要做的动作是执行后返回</span>
   mov	<span class="token register variable">eax</span>,<span class="token number">4</span>       <span class="token comment">;系统调用号 (sys_write)</span>
   
   <span class="token comment">;int 不是c中的int，而是 Interrupt，中断的意思，而0x80是intel-32中调用linux中系统命令，可以理解为system_call，也就是系统函数调用</span>
   int	<span class="token number">0x80</span>        <span class="token comment">;调用内核</span>
</code></pre></div><h2 id="汇编命令"><a href="#汇编命令" class="header-anchor">#</a> 汇编命令</h2> <p>列举几个汇编命令：</p> <table><thead><tr><th>指令</th> <th>作用</th> <th></th></tr></thead> <tbody><tr><td>ORG</td> <td>在程序执行的时候，会告诉编译器将这些指令转载到内存的哪个位置</td> <td></td></tr> <tr><td>JMP （jump）</td> <td>跳转。类似于C中的 go to</td> <td></td></tr> <tr><td>entry（）</td> <td>JMP 指令的跳转目的地</td> <td></td></tr> <tr><td>DB（data byte）</td> <td>向文件中直接写入一个字节的指令</td> <td></td></tr> <tr><td>DW（data word）</td> <td>写入一个字，两个字节</td> <td></td></tr> <tr><td>DD（data double-word）</td> <td>写入两个字，4个字节</td> <td></td></tr> <tr><td>RESB（reserve byte）</td> <td>与 DB相反，指定的地址清空，保留备用</td> <td></td></tr> <tr><td>RESW（reserve data double-word）</td> <td>与 DW相反</td> <td></td></tr> <tr><td>MOV（move）</td> <td>移动、赋值，等等动作</td> <td></td></tr> <tr><td>ADD（add）</td> <td>加法指令</td> <td></td></tr> <tr><td>CMP（compare）</td> <td>比较指令。</td> <td></td></tr> <tr><td>INT（Interrupt）</td> <td>中断指令，用来调用BIOS中函数的指令</td> <td></td></tr> <tr><td>HLT（halt）</td> <td>停止。让CPU进入待机状态，只要外部发生变化，CPU就会醒过来。</td> <td></td></tr> <tr><td>JC（jump if carry）</td> <td>标志，INF调用函数后，没有错，进位标志为0，有错，进位标志为1</td> <td></td></tr> <tr><td>JNC（jump if not carry）</td> <td>判断指令：进位为0就跳转</td> <td></td></tr> <tr><td>JAE（jump if above or equal）</td> <td>判断指令：大于等于时跳转</td> <td></td></tr> <tr><td>JBE（jump if below or equal）</td> <td>判断指令：小于等于则跳转</td> <td></td></tr> <tr><td>RET（return）</td> <td>返回</td> <td></td></tr> <tr><td>XCHG （exchange）</td> <td>交换指令</td> <td></td></tr> <tr><td>push</td> <td>栈：进栈，或叫压栈指令</td> <td></td></tr> <tr><td>pop</td> <td>栈：出栈指令</td> <td></td></tr> <tr><td>sub、sbb、dec、neg、cmp</td> <td>减法指令</td> <td></td></tr> <tr><td>mul、imul</td> <td>乘法指令</td> <td></td></tr> <tr><td>div、idiv</td> <td>除法指令</td> <td></td></tr> <tr><td>not、and、or、xor、test</td> <td>逻辑运算指令</td> <td></td></tr> <tr><td>ROL、ROR、RCL、RCR</td> <td>循环移位指令</td> <td></td></tr> <tr><td>LOOP、LOOPE/LOOPZ、LOOPNE/LOOPNZ、JCXZ</td> <td>循环指令</td> <td></td></tr> <tr><td>其他详见汇编指令梳理篇章</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td></td></tr></tbody></table> <h2 id="变量"><a href="#变量" class="header-anchor">#</a> 变量</h2> <h3 id="define-变量内存分配、创建-alloc"><a href="#define-变量内存分配、创建-alloc" class="header-anchor">#</a> define：变量内存分配、创建（alloc）</h3> <p>NASM提供了各种定义指令来为变量保留存储空间。</p> <p>define assembler指令用于分配存储空间。</p> <p>在C++中：</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>  
<span class="token keyword">double</span> b <span class="token operator">=</span> <span class="token number">1.345</span><span class="token punctuation">;</span>
byte z <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span>  
<span class="token keyword">char</span> x <span class="token operator">=</span> <span class="token char">'x'</span><span class="token punctuation">;</span> 
</code></pre></div><p>而汇编中，变量示例：</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>str          DB      <span class="token string">'xyz'</span>
num          DW      <span class="token number">354534</span>
neg_num      DW      <span class="token operator">-</span><span class="token number">323</span>
big_num      DQ      <span class="token number">119287337644</span>
real_num     DD      <span class="token number">1.23456</span>
real_num2    DQ      <span class="token number">123.456</span>
</code></pre></div><p>其中内存分配的define指令:</p> <table><thead><tr><th style="text-align:left;">指令</th> <th style="text-align:left;">目的</th> <th style="text-align:left;">储存空间</th></tr></thead> <tbody><tr><td style="text-align:left;"><strong>DB</strong></td> <td style="text-align:left;">定义字节</td> <td style="text-align:left;">分配1个字节</td></tr> <tr><td style="text-align:left;"><strong>DW</strong></td> <td style="text-align:left;">定义字</td> <td style="text-align:left;">分配2个字节</td></tr> <tr><td style="text-align:left;"><strong>DD</strong></td> <td style="text-align:left;">定义双字</td> <td style="text-align:left;">分配4个字节</td></tr> <tr><td style="text-align:left;"><strong>DQ</strong></td> <td style="text-align:left;">定义四字</td> <td style="text-align:left;">分配8个字节</td></tr> <tr><td style="text-align:left;"><strong>DT</strong></td> <td style="text-align:left;">定义十个字节</td> <td style="text-align:left;">分配10个字节</td></tr></tbody></table> <h3 id="示例-输出字符串-xyz"><a href="#示例-输出字符串-xyz" class="header-anchor">#</a> 示例：输出字符串 xyz</h3> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token keyword">section .text</span>
   <span class="token keyword">global _start          </span><span class="token comment">;链接器入口声明</span>
        
<span class="token label function">_start:</span>                   <span class="token comment">;链接器执行入口</span>
   mov  <span class="token register variable">edx</span>,<span class="token number">3</span>             <span class="token comment">;定义长度</span>
   mov  <span class="token register variable">ecx</span>,str1          <span class="token comment">;写入数据</span>
   mov  <span class="token register variable">ebx</span>,<span class="token number">1</span>             <span class="token comment">;基地址(base)寄存器, 在内存寻址时存放基地址</span>
   mov  <span class="token register variable">eax</span>,<span class="token number">4</span>             <span class="token comment">;输出信息</span>
   int  <span class="token number">0x80</span>              <span class="token comment">;中断</span>

   mov  <span class="token register variable">eax</span>,<span class="token number">1</span>             <span class="token comment">;退出exit</span>
   int  <span class="token number">0x80</span>              <span class="token comment">;中断</span>

<span class="token keyword">section .data</span>
str1 DB <span class="token string">'xyz'</span>
</code></pre></div><p>结果:</p> <div class="language-t4 extra-class"><pre class="language-t4"><code>xyz
</code></pre></div><blockquote><p>1、字符的每个字节以十六进制形式存储为其ASCII值</p> <p>2、数据类型转换为其等效的16位二进制数，并以十六进制数形式存储</p> <p>3、使用小尾存储顺序（高字节存放内存高位，低字节在低位）</p> <p>4、负数以补码形式表示</p></blockquote> <h3 id="reserve-变量内存释放-release"><a href="#reserve-变量内存释放-release" class="header-anchor">#</a> reserve：变量内存释放（release）</h3> <p>相应的，上面define给对应内存分配空间，而reserve相反，是给对应内存地址清理空间，可以理解为 release</p> <p>reserve指令用于为未初始化的数据保留空间。reserve指令采用单个操作数，该操作数指定要保留的空间单位数。每个define指令都有一个相关的reserve指令。</p> <p>保留指令有五种基本形式-</p> <table><thead><tr><th style="text-align:left;">指令</th> <th style="text-align:left;">目的</th></tr></thead> <tbody><tr><td style="text-align:left;"><strong>RESB</strong></td> <td style="text-align:left;">保留一个字节</td></tr> <tr><td style="text-align:left;"><strong>RESW</strong></td> <td style="text-align:left;">保留字</td></tr> <tr><td style="text-align:left;"><strong>RESD</strong></td> <td style="text-align:left;">保留双字</td></tr> <tr><td style="text-align:left;"><strong>RESQ</strong></td> <td style="text-align:left;">保留四字</td></tr> <tr><td style="text-align:left;"><strong>REST</strong></td> <td style="text-align:left;">保留十个字节</td></tr></tbody></table> <h3 id="示例-申请空间并打印"><a href="#示例-申请空间并打印" class="header-anchor">#</a> 示例：申请空间并打印</h3> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token keyword">section	.text</span>
   <span class="token keyword">global _start     </span><span class="token comment">;必须为链接器(ld)声明</span>
   
<span class="token label function">_start:</span>	            <span class="token comment">;告诉链接器入口点</span>
	  
	  <span class="token comment">;1、打印固定字符串 “我的年龄：”</span>
    mov	<span class="token register variable">edx</span>,len     <span class="token comment">;设置数据长度</span>
    mov	<span class="token register variable">ecx</span>,msg     <span class="token comment">;赋值数据</span>
    mov	<span class="token register variable">ebx</span>,<span class="token number">1</span>       <span class="token comment">;打印信息</span>
    mov	<span class="token register variable">eax</span>,<span class="token number">4</span>       <span class="token comment">;执行函数标记4</span>
    int	<span class="token number">0x80</span>        <span class="token comment">;调用内核call函数执行</span>

	  <span class="token comment">;2、打印存储后的数据 “9”</span>
    mov  <span class="token register variable">eax</span>,<span class="token string">'9'</span>
    mov  <span class="token operator">[</span>sum<span class="token operator">]</span>, <span class="token register variable">eax</span> <span class="token comment">;将数据9存储到申请的内存中</span>
    
    mov	<span class="token register variable">edx</span>,<span class="token number">1</span>     
    mov	<span class="token register variable">ecx</span>,sum  <span class="token comment">;从 sum中取数据存入</span>
    mov	<span class="token register variable">ebx</span>,<span class="token number">1</span>       
    mov	<span class="token register variable">eax</span>,<span class="token number">4</span>      
    int	<span class="token number">0x80</span>        
		
		<span class="token comment">;3、退出</span>
    mov	<span class="token register variable">eax</span>,<span class="token number">1</span>       <span class="token comment">;退出进程sys_exit</span>
    int	<span class="token number">0x80</span>        <span class="token comment">;调用内核call函数执行退出</span>

<span class="token keyword">section	.data</span>
msg db <span class="token string">'我的年龄：'</span>,<span class="token number">0xA</span>,<span class="token number">0xD</span>   <span class="token comment">;换行 0xA,0xD 。要打印的字符串</span>
len equ <span class="token operator">$</span> <span class="token operator">-</span> msg     <span class="token comment">;字符串的长度</span>

segment .bss
sum resb <span class="token number">1</span>  <span class="token comment">;申请1字节空间</span>
</code></pre></div><p>结果</p> <div class="language- extra-class"><pre class="language-text"><code>我的年龄：
9
</code></pre></div><h2 id="常量"><a href="#常量" class="header-anchor">#</a> 常量</h2> <p>在C++中我们使用过 const、#define 等 定义一个常量，汇编中类似</p> <h3 id="常量定义"><a href="#常量定义" class="header-anchor">#</a> 常量定义</h3> <table><thead><tr><th>intel 32汇编指令</th> <th>C++</th> <th>含义</th></tr></thead> <tbody><tr><td>EQU （equ）</td> <td>const （比如：const int a = 1;）</td> <td>不可变常量赋值</td></tr> <tr><td>%assign</td> <td>static</td> <td>静态变量，可修改</td></tr> <tr><td>%define</td> <td>#define</td> <td>单行宏，代码替换</td></tr> <tr><td>%macro - %endmacro</td> <td></td> <td>多行宏，代码替换</td></tr></tbody></table> <p>多行宏:</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token operator">%</span>macro  宏名称 参数数量                      
        push    <span class="token register variable">ebp</span>                
        mov     <span class="token register variable">ebp</span>,<span class="token register variable">esp</span>                
        sub     <span class="token register variable">esp</span>,<span class="token operator">%</span><span class="token number">1</span>               
<span class="token operator">%</span>endmacro
</code></pre></div><p>指令区分大小写</p> <h3 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h3> <p>1、C++示例：</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token comment">// 常量</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> i_x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment">// 宏</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">s_y</span> <span class="token string">&quot;hello&quot;</span></span>
<span class="token comment">// 静态变量</span>
<span class="token keyword">static</span> <span class="token keyword">double</span> d_z <span class="token operator">=</span> <span class="token number">1.20</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;不可修改 i_x = &quot;</span> <span class="token operator">&lt;&lt;</span> i_x <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;不可修改 s_y = &quot;</span> <span class="token operator">&lt;&lt;</span> s_y <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
  
    d_z <span class="token operator">=</span> d_z <span class="token operator">+</span> <span class="token number">3.14</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;可修改 d_z = &quot;</span> <span class="token operator">&lt;&lt;</span> d_z <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>结果</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>不可修改 i_x <span class="token operator">=</span> <span class="token number">3</span>
不可修改 s_y <span class="token operator">=</span> hello
可修改 d_z <span class="token operator">=</span> <span class="token number">4.34</span>
</code></pre></div><h3 id="汇编equ示例"><a href="#汇编equ示例" class="header-anchor">#</a> 汇编EQU示例</h3> <p>将通用指令固定数据定义为常量，方便使用</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code>sys_exit  	equ <span class="token number">1</span> <span class="token comment">;退出</span>
sys_write 	equ <span class="token number">4</span> <span class="token comment">;函数过程写</span>
sdt_in      equ <span class="token number">0</span> <span class="token comment">;输入</span>
sdt_out    	equ <span class="token number">1</span> <span class="token comment">;输出</span>
sys_call    equ <span class="token number">0x80</span> <span class="token comment">;调用</span>

<span class="token keyword">section  .text</span>
   <span class="token keyword">global _start    </span>
        
<span class="token label function">_start:</span>            
   mov <span class="token register variable">eax</span>, sys_write         
   mov <span class="token register variable">ebx</span>, sdt_out         
   mov <span class="token register variable">ecx</span>, msg1         
   mov <span class="token register variable">edx</span>, len1 
   int sys_call                
          
   mov <span class="token register variable">eax</span>,sys_exit   
   int sys_call     

<span class="token keyword">section  .data</span>
msg1 db <span class="token string">'我是第一行信息!'</span>,<span class="token number">0xA</span>,<span class="token number">0xD</span>   <span class="token comment">;换行 0xA,0xD</span>
len1 equ <span class="token operator">$</span> <span class="token operator">-</span> msg1                        
</code></pre></div><h3 id="汇编宏示例"><a href="#汇编宏示例" class="header-anchor">#</a> 汇编宏示例</h3> <p>将上面示例使用<strong>宏</strong>修改：</p> <div class="language-nasm extra-class"><pre class="language-nasm"><code><span class="token comment">;使用字符串变量</span>
<span class="token operator">%</span>macro  set_string <span class="token number">1</span>                      
        mov <span class="token register variable">ecx</span>, <span class="token operator">%</span><span class="token number">1</span>          
        mov <span class="token register variable">edx</span>, len1                 
<span class="token operator">%</span>endmacro

<span class="token comment">;调用并输出</span>
<span class="token operator">%</span>macro  run_out <span class="token number">0</span>                      
        mov <span class="token register variable">eax</span>, <span class="token number">4</span>         
         mov <span class="token register variable">ebx</span>, <span class="token number">1</span> 
         int <span class="token number">0x80</span>               
<span class="token operator">%</span>endmacro

<span class="token comment">;退出</span>
<span class="token operator">%</span>macro  return <span class="token number">0</span>                      
        mov <span class="token register variable">eax</span>,<span class="token number">1</span>   
         int <span class="token number">0x80</span>              
<span class="token operator">%</span>endmacro

<span class="token keyword">section  .text</span>
   <span class="token keyword">global _start    </span>
        
<span class="token label function">_start:</span>      

   set_string msg1 
   run_out
                  
          
   return     

<span class="token keyword">section  .data</span>
msg1 db <span class="token string">'使用宏修改!'</span>
len1 equ <span class="token operator">$</span> <span class="token operator">-</span> msg1 
</code></pre></div><p>退出的汇编代码直接使用 return 替换，这样更容易记忆。</p></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/3420aa/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Day2-语言发展</div></a> <a href="/pages/e62c69/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">intel-32基础语法(中)</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/3420aa/" class="prev">Day2-语言发展</a></span> <span class="next"><a href="/pages/e62c69/">intel-32基础语法(中)</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> <!----></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.956f6e98.js" defer></script><script src="/assets/js/2.d54d51d6.js" defer></script><script src="/assets/js/91.27dbd9c9.js" defer></script>
  </body>
</html>
