(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{340:function(t,e,r){"use strict";r.r(e);var a=r(4),n=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("html",[e("head",[e("meta",{attrs:{charset:"utf-8"}}),t._v(" "),e("meta",{attrs:{content:"IE=edge","http-equiv":"X-UA-Compatible"}}),t._v(" "),e("title",[t._v("iOS开发-上篇-2022")]),t._v(" "),e("style",[t._v("\n        body{\n            margin: 0;\n        }\n        #content-info{\n            width: auto;\n            margin: 0 auto;\n            text-align: center;\n        }\n        #author-info{\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            overflow: hidden;\n        }\n        #title{\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            overflow: hidden;\n            padding-top: 10px;\n            margin-bottom: 2px;\n            font-size: 34px;\n            color: #505050;\n        }\n        .text{\n            white-space:nowrap;\n            text-overflow: ellipsis;\n            display: inline-block;\n            margin-right: 20px;\n            margin-bottom: 2px;\n            font-size: 20px;\n            color: #8c8c8c;\n        }\n        #navBar{\n            width: auto;\n            height: auto;\n            position: fixed;\n            right:0;\n            bottom: 0;\n            background-color: #f0f3f4;\n            overflow-y: auto;\n            text-align: center;\n        }\n        #svg-container{\n            width: 100%;\n            overflow-x: scroll;\n            min-width: 0px;\n            margin: 0 10px;\n            overflow: visible;\n            position: relative;\n        }\n        #nav-thumbs{\n            overflow-y: scroll;\n            padding: 0 5px;\n        }\n        .nav-thumb{\n            position: relative;\n            margin: 10px auto;\n        }\n        .nav-thumb >p{\n            text-align: center;\n            font-size: 12px;\n            margin: 4px 0 0 0;\n        }\n        .nav-thumb >div{\n            position: relative;\n            display: inline-block;\n            border: 1px solid #c6cfd5;\n        }\n        .nav-thumb img{\n            display: block;\n        }\n        #main-content{\n            bottom: 0;\n            left: 0;\n            right: 0;\n            background-color: #ffffff;\n            display: flex;\n            height: auto;\n            flex-flow: row wrap;\n            text-align:center;\n        }\n        #svg-container >svg{\n            overflow: visible;\n            display: block;\n            margin:5px auto;\n            margin-bottom: 5px;\n        }\n        #copyright{\n            bottom: 0;\n            left: 50%;\n            margin: 5px auto;\n            font-size: 16px;\n            color: #515151;\n        }\n        #copyright >a{\n            text-decoration: none;\n            color: #77C;\n        }\n        .number{\n            position: absolute;\n            top:0;\n            left:0;\n            border-top:22px solid #08a1ef;\n            border-right: 22px solid transparent;\n        }\n        .pagenum{\n            font-size: 12px;\n            color: #fff;\n            position: absolute;\n            top: -23px;\n            left: 2px;\n        }\n            #navBar::-webkit-scrollbar{\n            width: 8px;\n            background-color: #f5f5f5;\n        }\n            #navBar::-webkit-scrollbar-track{\n            -webkit-box-shadow: inset 0 0 4px rgba(0,0,0,.3);\n            border-radius: 8px;\n            background-color: #fff;\n        }\n            #navBar::-webkit-scrollbar-thumb{\n            border-radius: 8px;\n            -webkit-box-shadow: inset 0 0 4px rgba(0,0,0,.3);\n            background-color: #6b6b70;\n        }\n        #navBar::-webkit-scrollbar-thumb:hover{\n            background-color: #4a4a4f;\n        }\n")])]),t._v(" "),e("body",[e("div",{attrs:{id:"main-area"}},[e("div",{attrs:{id:"main-content"}},[e("div",{attrs:{id:"svg-container"}},[e("svg",{attrs:{preserveAspectRadio:"xMinYMin meet","xmlns:xlink":"http://www.w3.org/1999/xlink","ed:name":"iOS锁","ed:vSpacing":"30",viewBox:"0 0 810 3746","xmlns:ev":"http://www.w3.org/2001/xml-events",xmlns:"http://www.w3.org/2000/svg",height:"3814","xmlns:ed":"https://www.edrawsoft.cn/xml/2017/SVGExtensions/","ed:hSpacing":"30",width:"810",id:"page11"}},[e("style",{attrs:{type:"text/css"}},[t._v("<![CDATA[\ng[ed\\:togtopicid],g[ed\\:hyperlink],g[ed\\:comment],g[ed\\:note] {cursor:pointer;}\ng[id] {-moz-user-select: none;-ms-user-select: none;user-select: none;}\nsvg text::selection,svg tspan::selection{background-color: #4285f4;color: #ffffff;fill: #ffffff;}\n.st23 {fill:#141414;font-family:微软雅黑;font-size:10.5pt}\n.st21 {fill:#4caf50;font-family:微软雅黑;font-size:12pt;font-weight:bold}\n.st22 {fill:#ffffff;font-family:微软雅黑;font-size:13.5pt}\n]]>")]),t._v(" "),e("defs"),t._v(" "),e("rect",{attrs:{x:"0",y:"0",fill:"#ffffff",height:"3814",width:"810"}}),t._v(" "),e("path",{attrs:{d:"M8,0L261.1,0C266.5,0,269.1,2.6,269.1,8L269.1,269C269.1,274.4,266.5,277,261.1,277L8,277C2.6,277,0,274.4,0,269L0,8C0,2.6,2.6,0,8,0z",stroke:"#4caf50","stroke-dasharray":"5,2","ed:idlist":"139","stroke-width":"2",transform:"matrix(1,0,0,1,209.2,795)","ed:type":"boundary","ed:parentid":"139","stroke-linejoin":"round","fill-opacity":"0.2",fill:"#4caf50",id:"138"}}),t._v(" "),e("path",{attrs:{d:"M8,0L416.1,0C421.5,0,424.1,2.6,424.1,8L424.1,282C424.1,287.4,421.5,290,416.1,290L8,290C2.6,290,0,287.4,0,282L0,8C0,2.6,2.6,0,8,0z",stroke:"#4caf50","stroke-dasharray":"5,2","ed:idlist":"185","stroke-width":"2",transform:"matrix(1,0,0,1,209.2,2047.5)","ed:type":"boundary","ed:parentid":"185","stroke-linejoin":"round","fill-opacity":"0.2",fill:"#4caf50",id:"184"}}),t._v(" "),e("path",{attrs:{d:"M8,0L326.7,0C332.1,0,334.7,2.6,334.7,8L334.7,61C334.7,66.4,332.1,69,326.7,69L8,69C2.6,69,0,66.4,0,61L0,8C0,2.6,2.6,0,8,0z",stroke:"#4caf50","stroke-dasharray":"5,2","ed:idlist":"210","stroke-width":"2",transform:"matrix(1,0,0,1,209.2,2790.5)","ed:type":"boundary","ed:parentid":"210","stroke-linejoin":"round","fill-opacity":"0.2",fill:"#4caf50",id:"209"}}),t._v(" "),e("path",{attrs:{d:"M8,0L411.3,0C416.7,0,419.3,2.6,419.3,8L419.3,180C419.3,185.4,416.7,188,411.3,188L8,188C2.6,188,0,185.4,0,180L0,8C0,2.6,2.6,0,8,0z",stroke:"#4caf50","stroke-dasharray":"5,2","ed:idlist":"156","stroke-width":"2",transform:"matrix(1,0,0,1,252.6,1355)","ed:type":"boundary","ed:parentid":"156","stroke-linejoin":"round","fill-opacity":"0.2",fill:"#4caf50",id:"155"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-25.2,-26.5L-25.2,20.5C-25.2,23.8,-22.5,26.5,-19.2,26.5L25.2,26.5","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,83.2,158.5)","ed:parentid":"112","stroke-linejoin":"round",fill:"none","ed:tosuperid":"113",id:"114"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-25.2,-69.5L-25.2,63.5C-25.2,66.8,-22.5,69.5,-19.2,69.5L25.2,69.5","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,83.2,201.5)","ed:parentid":"112","stroke-linejoin":"round",fill:"none","ed:tosuperid":"115",id:"116"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-25.2,-119L-25.2,113C-25.2,116.3,-22.5,119,-19.2,119L25.2,119","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,83.2,251)","ed:parentid":"112","stroke-linejoin":"round",fill:"none","ed:tosuperid":"117",id:"118"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-25.2,-162L-25.2,156C-25.2,159.3,-22.5,162,-19.2,162L25.2,162","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,83.2,294)","ed:parentid":"112","stroke-linejoin":"round",fill:"none","ed:tosuperid":"119",id:"120"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-11.1L-9.5,5.1C-9.5,8.4,-6.8,11.1,-3.5,11.1L9.5,11.1","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,152.85,487.13)","ed:parentid":"119","stroke-linejoin":"round",fill:"none","ed:tosuperid":"121",id:"122"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-25.2,-215.9L-25.2,209.9C-25.2,213.2,-22.5,215.9,-19.2,215.9L25.2,215.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,83.2,347.88)","ed:parentid":"112","stroke-linejoin":"round",fill:"none","ed:tosuperid":"123",id:"124"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,152.85,594.63)","ed:parentid":"123","stroke-linejoin":"round",fill:"none","ed:tosuperid":"126",id:"127"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-28L-9.5,22C-9.5,25.3,-6.8,28,-3.5,28L9.5,28","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,152.85,611.75)","ed:parentid":"123","stroke-linejoin":"round",fill:"none","ed:tosuperid":"128",id:"129"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,203.75,663.13)","ed:parentid":"128","stroke-linejoin":"round",fill:"none","ed:tosuperid":"130",id:"131"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-62.3L-9.5,56.3C-9.5,59.6,-6.8,62.3,-3.5,62.3L9.5,62.3","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,152.85,646)","ed:parentid":"123","stroke-linejoin":"round",fill:"none","ed:tosuperid":"132",id:"133"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,731.63)","ed:parentid":"132","stroke-linejoin":"round",fill:"none","ed:tosuperid":"134",id:"135"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-95.5L-9.5,89.5C-9.5,92.8,-6.8,95.5,-3.5,95.5L9.5,95.5","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,152.85,679.25)","ed:parentid":"123","stroke-linejoin":"round",fill:"none","ed:tosuperid":"136",id:"137"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-74.1L-9.5,68.1C-9.5,71.4,-6.8,74.1,-3.5,74.1L9.5,74.1","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,859.38)","ed:parentid":"136","stroke-linejoin":"round",fill:"none","ed:tosuperid":"139",id:"140"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-154.3L-9.5,148.3C-9.5,151.6,-6.8,154.3,-3.5,154.3L9.5,154.3","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,939.5)","ed:parentid":"136","stroke-linejoin":"round",fill:"none","ed:tosuperid":"141",id:"142"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-271.1L-9.5,265.1C-9.5,268.4,-6.8,271.1,-3.5,271.1L9.5,271.1","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,152.85,854.88)","ed:parentid":"123","stroke-linejoin":"round",fill:"none","ed:tosuperid":"143",id:"144"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-15.9L-9.5,9.9C-9.5,13.2,-6.8,15.9,-3.5,15.9L9.5,15.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,1152.38)","ed:parentid":"143","stroke-linejoin":"round",fill:"none","ed:tosuperid":"145",id:"146"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-37.8L-9.5,31.8C-9.5,35.1,-6.8,37.8,-3.5,37.8L9.5,37.8","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,1174.25)","ed:parentid":"143","stroke-linejoin":"round",fill:"none","ed:tosuperid":"147",id:"148"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-59.6L-9.5,53.6C-9.5,56.9,-6.8,59.6,-3.5,59.6L9.5,59.6","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,1196.13)","ed:parentid":"143","stroke-linejoin":"round",fill:"none","ed:tosuperid":"149",id:"150"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-81.5L-9.5,75.5C-9.5,78.8,-6.8,81.5,-3.5,81.5L9.5,81.5","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,1218)","ed:parentid":"143","stroke-linejoin":"round",fill:"none","ed:tosuperid":"151",id:"152"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-98.4L-9.5,92.4C-9.5,95.7,-6.8,98.4,-3.5,98.4L9.5,98.4","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,1234.88)","ed:parentid":"143","stroke-linejoin":"round",fill:"none","ed:tosuperid":"153",id:"154"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-51.9L-9.5,45.9C-9.5,49.2,-6.8,51.9,-3.5,51.9L9.5,51.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,250.15,1397.13)","ed:parentid":"153","stroke-linejoin":"round",fill:"none","ed:tosuperid":"156",id:"157"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-109.8L-9.5,103.8C-9.5,107.1,-6.8,109.8,-3.5,109.8L9.5,109.8","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,250.15,1455)","ed:parentid":"153","stroke-linejoin":"round",fill:"none","ed:tosuperid":"158",id:"159"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-126.6L-9.5,120.6C-9.5,123.9,-6.8,126.6,-3.5,126.6L9.5,126.6","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,250.15,1471.88)","ed:parentid":"153","stroke-linejoin":"round",fill:"none","ed:tosuperid":"160",id:"161"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-148.5L-9.5,142.5C-9.5,145.8,-6.8,148.5,-3.5,148.5L9.5,148.5","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,250.15,1493.75)","ed:parentid":"153","stroke-linejoin":"round",fill:"none","ed:tosuperid":"162",id:"163"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-279.8L-9.5,273.8C-9.5,277.1,-6.8,279.8,-3.5,279.8L9.5,279.8","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,1416.25)","ed:parentid":"143","stroke-linejoin":"round",fill:"none","ed:tosuperid":"164",id:"165"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-16.1L-9.5,10.1C-9.5,13.4,-6.8,16.1,-3.5,16.1L9.5,16.1","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,260.65,1734.13)","ed:parentid":"164","stroke-linejoin":"round",fill:"none","ed:tosuperid":"166",id:"167"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-38.5L-9.5,32.5C-9.5,35.8,-6.8,38.5,-3.5,38.5L9.5,38.5","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,260.65,1756.5)","ed:parentid":"164","stroke-linejoin":"round",fill:"none","ed:tosuperid":"168",id:"169"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-622L-9.5,616C-9.5,619.3,-6.8,622,-3.5,622L9.5,622","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,152.85,1205.75)","ed:parentid":"123","stroke-linejoin":"round",fill:"none","ed:tosuperid":"170",id:"171"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,1849.13)","ed:parentid":"170","stroke-linejoin":"round",fill:"none","ed:tosuperid":"172",id:"173"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-27.8L-9.5,21.8C-9.5,25.1,-6.8,27.8,-3.5,27.8L9.5,27.8","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,1866)","ed:parentid":"170","stroke-linejoin":"round",fill:"none","ed:tosuperid":"174",id:"175"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,260.65,1916.63)","ed:parentid":"174","stroke-linejoin":"round",fill:"none","ed:tosuperid":"176",id:"177"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-27.8L-9.5,21.8C-9.5,25.1,-6.8,27.8,-3.5,27.8L9.5,27.8","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,260.65,1933.5)","ed:parentid":"174","stroke-linejoin":"round",fill:"none","ed:tosuperid":"178",id:"179"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-78.4L-9.5,72.4C-9.5,75.7,-6.8,78.4,-3.5,78.4L9.5,78.4","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,1916.63)","ed:parentid":"170","stroke-linejoin":"round",fill:"none","ed:tosuperid":"180",id:"181"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-721.8L-9.5,715.8C-9.5,719.1,-6.8,721.8,-3.5,721.8L9.5,721.8","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,152.85,1305.5)","ed:parentid":"123","stroke-linejoin":"round",fill:"none","ed:tosuperid":"182",id:"183"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-77.4L-9.5,71.4C-9.5,74.7,-6.8,77.4,-3.5,77.4L9.5,77.4","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,2115.13)","ed:parentid":"182","stroke-linejoin":"round",fill:"none","ed:tosuperid":"185",id:"186"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-160.8L-9.5,154.8C-9.5,158.1,-6.8,160.8,-3.5,160.8L9.5,160.8","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,2198.5)","ed:parentid":"182","stroke-linejoin":"round",fill:"none","ed:tosuperid":"187",id:"188"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-177.6L-9.5,171.6C-9.5,174.9,-6.8,177.6,-3.5,177.6L9.5,177.6","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,2215.38)","ed:parentid":"182","stroke-linejoin":"round",fill:"none","ed:tosuperid":"189",id:"190"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-15.9L-9.5,9.9C-9.5,13.2,-6.8,15.9,-3.5,15.9L9.5,15.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,250.15,2420.88)","ed:parentid":"189","stroke-linejoin":"round",fill:"none","ed:tosuperid":"191",id:"192"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-48L-9.5,42C-9.5,45.3,-6.8,48,-3.5,48L9.5,48","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,250.15,2453)","ed:parentid":"189","stroke-linejoin":"round",fill:"none","ed:tosuperid":"193",id:"194"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-985L-9.5,979C-9.5,982.3,-6.8,985,-3.5,985L9.5,985","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,152.85,1568.75)","ed:parentid":"123","stroke-linejoin":"round",fill:"none","ed:tosuperid":"195",id:"196"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,2575.13)","ed:parentid":"195","stroke-linejoin":"round",fill:"none","ed:tosuperid":"197",id:"198"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-27.8L-9.5,21.8C-9.5,25.1,-6.8,27.8,-3.5,27.8L9.5,27.8","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,2592)","ed:parentid":"195","stroke-linejoin":"round",fill:"none","ed:tosuperid":"199",id:"200"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-1034.1L-9.5,1028.1C-9.5,1031.4,-6.8,1034.1,-3.5,1034.1L9.5,1034.1","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,152.85,1617.88)","ed:parentid":"123","stroke-linejoin":"round",fill:"none","ed:tosuperid":"201",id:"202"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,2673.38)","ed:parentid":"201","stroke-linejoin":"round",fill:"none","ed:tosuperid":"203",id:"204"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-32.8L-9.5,26.8C-9.5,30.1,-6.8,32.8,-3.5,32.8L9.5,32.8","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,2695.25)","ed:parentid":"201","stroke-linejoin":"round",fill:"none","ed:tosuperid":"205",id:"206"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-1093.3L-9.5,1087.3C-9.5,1090.6,-6.8,1093.3,-3.5,1093.3L9.5,1093.3","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,152.85,1677)","ed:parentid":"123","stroke-linejoin":"round",fill:"none","ed:tosuperid":"207",id:"208"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-22.1L-9.5,16.1C-9.5,19.4,-6.8,22.1,-3.5,22.1L9.5,22.1","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,2802.88)","ed:parentid":"207","stroke-linejoin":"round",fill:"none","ed:tosuperid":"210",id:"211"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-50.3L-9.5,44.3C-9.5,47.6,-6.8,50.3,-3.5,50.3L9.5,50.3","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,2831)","ed:parentid":"207","stroke-linejoin":"round",fill:"none","ed:tosuperid":"212",id:"213"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-67.1L-9.5,61.1C-9.5,64.4,-6.8,67.1,-3.5,67.1L9.5,67.1","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,2847.88)","ed:parentid":"207","stroke-linejoin":"round",fill:"none","ed:tosuperid":"214",id:"215"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-1181.8L-9.5,1175.8C-9.5,1179.1,-6.8,1181.8,-3.5,1181.8L9.5,1181.8","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,152.85,1765.5)","ed:parentid":"123","stroke-linejoin":"round",fill:"none","ed:tosuperid":"216",id:"217"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-15.9L-9.5,9.9C-9.5,13.2,-6.8,15.9,-3.5,15.9L9.5,15.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,2973.63)","ed:parentid":"216","stroke-linejoin":"round",fill:"none","ed:tosuperid":"218",id:"219"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-25.2,-1466.3L-25.2,1460.3C-25.2,1463.6,-22.5,1466.3,-19.2,1466.3L25.2,1466.3","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,83.2,1598.25)","ed:parentid":"112","stroke-linejoin":"round",fill:"none","ed:tosuperid":"220",id:"221"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,152.85,3095.38)","ed:parentid":"220","stroke-linejoin":"round",fill:"none","ed:tosuperid":"223",id:"224"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-27.8L-9.5,21.8C-9.5,25.1,-6.8,27.8,-3.5,27.8L9.5,27.8","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,152.85,3112.25)","ed:parentid":"220","stroke-linejoin":"round",fill:"none","ed:tosuperid":"225",id:"226"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-44.6L-9.5,38.6C-9.5,41.9,-6.8,44.6,-3.5,44.6L9.5,44.6","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,152.85,3129.13)","ed:parentid":"220","stroke-linejoin":"round",fill:"none","ed:tosuperid":"227",id:"228"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-60.8L-9.5,54.8C-9.5,58.1,-6.8,60.8,-3.5,60.8L9.5,60.8","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,152.85,3145.25)","ed:parentid":"220","stroke-linejoin":"round",fill:"none","ed:tosuperid":"229",id:"230"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,3227.38)","ed:parentid":"229","stroke-linejoin":"round",fill:"none","ed:tosuperid":"231",id:"232"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-32.8L-9.5,26.8C-9.5,30.1,-6.8,32.8,-3.5,32.8L9.5,32.8","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,3249.25)","ed:parentid":"229","stroke-linejoin":"round",fill:"none","ed:tosuperid":"233",id:"234"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-119.9L-9.5,113.9C-9.5,117.2,-6.8,119.9,-3.5,119.9L9.5,119.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,152.85,3204.38)","ed:parentid":"220","stroke-linejoin":"round",fill:"none","ed:tosuperid":"235",id:"236"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,3345.63)","ed:parentid":"235","stroke-linejoin":"round",fill:"none","ed:tosuperid":"237",id:"238"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-27.8L-9.5,21.8C-9.5,25.1,-6.8,27.8,-3.5,27.8L9.5,27.8","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,3362.5)","ed:parentid":"235","stroke-linejoin":"round",fill:"none","ed:tosuperid":"239",id:"240"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-44.9L-9.5,38.9C-9.5,42.2,-6.8,44.9,-3.5,44.9L9.5,44.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,3379.63)","ed:parentid":"235","stroke-linejoin":"round",fill:"none","ed:tosuperid":"241",id:"242"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-187.1L-9.5,181.1C-9.5,184.4,-6.8,187.1,-3.5,187.1L9.5,187.1","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,152.85,3271.63)","ed:parentid":"220","stroke-linejoin":"round",fill:"none","ed:tosuperid":"243",id:"244"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-10.9L-9.5,4.9C-9.5,8.2,-6.8,10.9,-3.5,10.9L9.5,10.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,3481.63)","ed:parentid":"243","stroke-linejoin":"round",fill:"none","ed:tosuperid":"245",id:"246"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-27.8L-9.5,21.8C-9.5,25.1,-6.8,27.8,-3.5,27.8L9.5,27.8","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,3498.5)","ed:parentid":"243","stroke-linejoin":"round",fill:"none","ed:tosuperid":"247",id:"248"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-44.6L-9.5,38.6C-9.5,41.9,-6.8,44.6,-3.5,44.6L9.5,44.6","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,3515.38)","ed:parentid":"243","stroke-linejoin":"round",fill:"none","ed:tosuperid":"249",id:"250"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-15.9L-9.5,9.9C-9.5,13.2,-6.8,15.9,-3.5,15.9L9.5,15.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,250.15,3587.88)","ed:parentid":"249","stroke-linejoin":"round",fill:"none","ed:tosuperid":"251",id:"252"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-88.4L-9.5,82.4C-9.5,85.7,-6.8,88.4,-3.5,88.4L9.5,88.4","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,3559.13)","ed:parentid":"243","stroke-linejoin":"round",fill:"none","ed:tosuperid":"253",id:"254"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-15.9L-9.5,9.9C-9.5,13.2,-6.8,15.9,-3.5,15.9L9.5,15.9","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,250.15,3675.38)","ed:parentid":"253","stroke-linejoin":"round",fill:"none","ed:tosuperid":"255",id:"256"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-37.8L-9.5,31.8C-9.5,35.1,-6.8,37.8,-3.5,37.8L9.5,37.8","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,250.15,3697.25)","ed:parentid":"253","stroke-linejoin":"round",fill:"none","ed:tosuperid":"257",id:"258"}}),t._v(" "),e("path",{attrs:{stroke:"#4caf50",d:"M-9.5,-149L-9.5,143C-9.5,146.3,-6.8,149,-3.5,149L9.5,149","stroke-linecap":"round","stroke-width":"3",transform:"matrix(1,0,0,1,206.75,3619.75)","ed:parentid":"243","stroke-linejoin":"round",fill:"none","ed:tosuperid":"259",id:"260"}}),t._v(" "),e("g",{attrs:{"ed:height":"53","ed:layout":"righttree",transform:"matrix(1,0,0,1,23,79)",id:"112","ed:topictype":"mainidea","ed:width":"87.515625"}},[e("path",{attrs:{stroke:"#4caf50",d:"M4,0L83.5,0C86.2,0,87.5,1.3,87.5,4L87.5,49C87.5,51.7,86.2,53,83.5,53L4,53C1.3,53,0,51.7,0,49L0,4C0,1.3,1.3,0,4,0z","stroke-width":"3","stroke-linejoin":"round",fill:"none"}}),t._v(" "),e("text",{staticClass:"st21"},[e("tspan",{attrs:{x:"22",y:"30",textLength:"44"}},[t._v("iOS锁")])])]),t._v(" "),e("g",{attrs:{"ed:height":"40",transform:"matrix(1,0,0,1,108.4,165)","ed:parentid":"112",id:"113","ed:width":"434"}},[e("path",{attrs:{d:"M4,0L430,0C432.7,0,434,1.3,434,4L434,36C434,38.7,432.7,40,430,40L4,40C1.3,40,0,38.7,0,36L0,4C0,1.3,1.3,0,4,0z",fill:"#4caf50"}}),t._v(" "),e("text",{staticClass:"st22"},[e("tspan",{attrs:{x:"19",y:"24",textLength:"396"}},[t._v("多线程下写操作可能导致的问题，锁住资源，等待")])])]),t._v(" "),e("g",{attrs:{"ed:height":"66",transform:"matrix(1,0,0,1,108.4,238)","ed:parentid":"112",id:"115","ed:width":"282.859375"}},[e("path",{attrs:{d:"M4,0L278.9,0C281.5,0,282.9,1.3,282.9,4L282.9,62C282.9,64.7,281.5,66,278.9,66L4,66C1.3,66,0,64.7,0,62L0,4C0,1.3,1.3,0,4,0z",fill:"#4caf50"}}),t._v(" "),e("text",{staticClass:"st22"},[e("tspan",{attrs:{x:"19",y:"24",textLength:"245"}},[t._v("在iOS中锁的基本种类只有两种")]),t._v(" "),e("tspan",{attrs:{x:"19",y:"50",textLength:"188"}},[t._v("：`互斥锁`、`自旋锁`")])])]),t._v(" "),e("g",{attrs:{"ed:height":"66",transform:"matrix(1,0,0,1,108.4,337)","ed:parentid":"112",id:"117","ed:width":"534"}},[e("path",{attrs:{d:"M4,0L530,0C532.7,0,534,1.3,534,4L534,62C534,64.7,532.7,66,530,66L4,66C1.3,66,0,64.7,0,62L0,4C0,1.3,1.3,0,4,0z",fill:"#4caf50"}}),t._v(" "),e("text",{staticClass:"st22"},[e("tspan",{attrs:{x:"19",y:"24",textLength:"497"}},[t._v("变相的，你可以通过 串行队列，栅栏函数 等实现类似加锁能力")])])]),t._v(" "),e("g",{attrs:{"ed:height":"40",transform:"matrix(1,0,0,1,108.4,436)","ed:parentid":"112",id:"119","ed:width":"164"}},[e("path",{attrs:{d:"M4,0L160,0C162.7,0,164,1.3,164,4L164,36C164,38.7,162.7,40,160,40L4,40C1.3,40,0,38.7,0,36L0,4C0,1.3,1.3,0,4,0z",fill:"#4caf50"}}),t._v(" "),e("text",{staticClass:"st22"},[e("tspan",{attrs:{x:"19",y:"24",textLength:"126"}},[t._v("加锁性能排行：")])])]),t._v(" "),e("g",{attrs:{"ed:height":"25",transform:"matrix(1,0,0,1,162.3,485.75)","ed:parentid":"119",id:"121","ed:width":"496.125"}},[e("path",{attrs:{d:"M4,0L492.1,0C494.8,0,496.1,1.3,496.1,4L496.1,21C496.1,23.7,494.8,25,492.1,25L4,25C1.3,25,0,23.7,0,21L0,4C0,1.3,1.3,0,4,0z",stroke:"#4caf50","stroke-width":"2","stroke-linejoin":"round",fill:"#ff9595"}}),t._v(" "),e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16.5",textLength:"474"}},[t._v("信号量 >  互斥锁pthread_mutex >  NSLock > 条件锁 >  @synchronized")])])]),t._v(" "),e("g",{attrs:{"ed:height":"40",transform:"matrix(1,0,0,1,108.4,543.75)","ed:parentid":"112",id:"123","ed:width":"115"}},[e("path",{attrs:{d:"M4,0L111,0C113.7,0,115,1.3,115,4L115,36C115,38.7,113.7,40,111,40L4,40C1.3,40,0,38.7,0,36L0,4C0,1.3,1.3,0,4,0z",fill:"#ff9f00"}}),t._v(" "),e("g",{attrs:{transform:"translate(18,10.1)"}},[e("use",{attrs:{transform:"translate(0,0)","xlink:href":"#imgpriority1"}})]),t._v(" "),e("text",{staticClass:"st22"},[e("tspan",{attrs:{x:"43",y:"24",textLength:"54"}},[t._v("互斥锁")])])]),t._v(" "),e("symbol",{attrs:{id:"imgpriority1"}},[e("image",{attrs:{"xlink:href":"data:image/png;base64,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",height:"16",width:"16"}})]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,162.3,593.5)","ed:parentid":"123",id:"126","ed:width":"441"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"420"}},[t._v("发现资源被其它线程锁住后，线程会进入睡眠，等待锁释放时被唤醒")])])]),t._v(" "),e("g",{attrs:{"ed:height":"25",transform:"matrix(1,0,0,1,162.3,627.25)","ed:parentid":"123",id:"128","ed:width":"64"}},[e("path",{attrs:{stroke:"#ff6f00",d:"M4,0L60,0C62.7,0,64,1.3,64,4L64,21C64,23.7,62.7,25,60,25L4,25C1.3,25,0,23.7,0,21L0,4C0,1.3,1.3,0,4,0z","stroke-width":"2","stroke-linejoin":"round",fill:"none"}}),t._v(" "),e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16.5",textLength:"42"}},[t._v("递归锁")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,213.2,662)","ed:parentid":"128",id:"130","ed:width":"427"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"406"}},[t._v("可重入锁，同一个线程在锁释放前可再次获取锁，即可以递归调用")])])]),t._v(" "),e("g",{attrs:{"ed:height":"25",transform:"matrix(1,0,0,1,162.3,695.75)","ed:parentid":"123",id:"132","ed:width":"78"}},[e("path",{attrs:{stroke:"#ff9f00",d:"M4,0L74,0C76.7,0,78,1.3,78,4L78,21C78,23.7,76.7,25,74,25L4,25C1.3,25,0,23.7,0,21L0,4C0,1.3,1.3,0,4,0z","stroke-width":"2","stroke-linejoin":"round",fill:"none"}}),t._v(" "),e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16.5",textLength:"56"}},[t._v("非递归锁")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,730.5)","ed:parentid":"132",id:"134","ed:width":"287"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"266"}},[t._v("不可重入，必须等锁释放后才能再次获取锁")])])]),t._v(" "),e("g",{attrs:{"ed:height":"21",transform:"matrix(1,0,0,1,162.3,764.25)","ed:parentid":"123",id:"136","ed:width":"137.375"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"116"}},[t._v("1.pthread_mutex")])])]),t._v(" "),e("g",{attrs:{"ed:height":"263",transform:"matrix(1,0,0,1,216.2,802)","ed:parentid":"136",id:"139","ed:width":"255.125"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"89"}},[t._v("// 导入头文件")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"36",textLength:"147"}},[t._v("#import <pthread.h>")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"53",textLength:"117"}},[t._v("// 全局声明互斥锁")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"73",textLength:"159"}},[t._v("pthread_mutex_t _lock;")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"90",textLength:"103"}},[t._v("// 初始化互斥锁")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"110",textLength:"234"}},[t._v("pthread_mutex_init(&_lock, NULL);")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"127",textLength:"47"}},[t._v("// 加锁")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"147",textLength:"196"}},[t._v("pthread_mutex_lock(&_lock);")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"164",textLength:"173"}},[t._v("// 这里做需要线程安全操作")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"184",textLength:"32"}},[t._v("// ...")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"201",textLength:"52"}},[t._v("// 解锁 ")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"221",textLength:"214"}},[t._v("pthread_mutex_unlock(&_lock);")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"238",textLength:"61"}},[t._v("// 释放锁")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"258",textLength:"219"}},[t._v("pthread_mutex_destroy(&_lock);")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,1081.75)","ed:parentid":"136",id:"141","ed:width":"389.1875"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"368"}},[t._v("YYKit的YYMemoryCach， 使用到`pthread_mutex` 封装")])])]),t._v(" "),e("g",{attrs:{"ed:height":"21",transform:"matrix(1,0,0,1,162.3,1115.5)","ed:parentid":"123",id:"143","ed:width":"136.90625"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"116"}},[t._v("2.@synchronized")])])]),t._v(" "),e("g",{attrs:{"ed:height":"44",transform:"matrix(1,0,0,1,216.2,1146.25)","ed:parentid":"143",id:"145","ed:width":"517"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"459"}},[t._v("通过**汇编**能发现`@synchronized`就是实现了`objc_sync_enter`和 ")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"36",textLength:"172"}},[t._v("`objc_sync_exit`两个方法")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,1200)","ed:parentid":"143",id:"147","ed:width":"175"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"154"}},[t._v("性能较差，使用比较方便")])])]),t._v(" "),e("g",{attrs:{"ed:height":"44",transform:"matrix(1,0,0,1,216.2,1233.75)","ed:parentid":"143",id:"149","ed:width":"517"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"494"}},[t._v("是递归锁， 可以在释放锁之前，继续获取锁权限，但是最好不要嵌套太深，影响")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"36",textLength:"28"}},[t._v("性能")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,1287.5)","ed:parentid":"143",id:"151","ed:width":"489.921875"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"469"}},[t._v("不能使用`非OC对象`作为加锁条件——底层`id2data`中接收参数为id类型")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,1321.25)","ed:parentid":"143",id:"153","ed:width":"49"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"28"}},[t._v("案例")])])]),t._v(" "),e("g",{attrs:{"ed:height":"174",transform:"matrix(1,0,0,1,259.6,1362)","ed:parentid":"153",id:"156","ed:width":"405.34375"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"85"}},[t._v("- (void)test {")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"33",textLength:"267"}},[t._v("    _testArray = [NSMutableArray array];")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"50",textLength:"236"}},[t._v("    for (int i = 0; i < 200000; i++) {")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"67",textLength:"384"}},[t._v("        dispatch_async(dispatch_get_global_queue(0, 0), ^{")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"84",textLength:"268"}},[t._v("            @synchronized (self.testArray) {")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"101",textLength:"341"}},[t._v("                self.testArray = [NSMutableArray array];")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"118",textLength:"58"}},[t._v("            }")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"135",textLength:"49"}},[t._v("        });")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"152",textLength:"22"}},[t._v("    }")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"169",textLength:"5"}},[t._v("}")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,259.6,1552.75)","ed:parentid":"153",id:"158","ed:width":"390.890625"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"370"}},[t._v("上述代码会crash，因为在某一瞬间`testArray`释放了为nil")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,259.6,1586.5)","ed:parentid":"153",id:"160","ed:width":"377.21875"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"356"}},[t._v("可以对self加锁，但是又太重了，锁self也存在异常到时候")])])]),t._v(" "),e("g",{attrs:{"ed:height":"44",transform:"matrix(1,0,0,1,259.6,1620.25)","ed:parentid":"153",id:"162","ed:width":"517"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"486"}},[t._v("可以创建一个静态变量 static ，一个synchronized使用一个对这个静态变量加")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"36",textLength:"210"}},[t._v("锁，其它线程也能访问到这个变量")])])]),t._v(" "),e("g",{attrs:{"ed:height":"44",transform:"matrix(1,0,0,1,216.2,1674)","ed:parentid":"143",id:"164","ed:width":"517"}},[e("path",{attrs:{d:"M4,0L513,0C515.7,0,517,1.3,517,4L517,40C517,42.7,515.7,44,513,44L4,44C1.3,44,0,42.7,0,40L0,4C0,1.3,1.3,0,4,0z",fill:"#fdd834"}}),t._v(" "),e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"496"}},[t._v("加锁原理类似 weak 哈希表，把对象映射到一张hash表上，记录被锁的次数，这")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"36",textLength:"126"}},[t._v("样可以适用递归场景")])])]),t._v(" "),e("g",{attrs:{"ed:height":"45",transform:"matrix(1,0,0,1,270.1,1727.75)","ed:parentid":"164",id:"166","ed:width":"518"}},[e("path",{attrs:{stroke:"#4caf50",d:"M4,0L514,0C516.7,0,518,1.3,518,4L518,41C518,43.7,516.7,45,514,45L4,45C1.3,45,0,43.7,0,41L0,4C0,1.3,1.3,0,4,0z","stroke-width":"2","stroke-linejoin":"round",fill:"none"}}),t._v(" "),e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16.5",textLength:"493"}},[t._v("空对象在准备加锁前会判断，这样保证不会对nil加锁，但是加锁以后对象被释放")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"36.5",textLength:"56"}},[t._v("是不行的")])])]),t._v(" "),e("g",{attrs:{"ed:height":"25",transform:"matrix(1,0,0,1,270.1,1782.5)","ed:parentid":"164",id:"168","ed:width":"246"}},[e("path",{attrs:{stroke:"#4caf50",d:"M4,0L242,0C244.7,0,246,1.3,246,4L246,21C246,23.7,244.7,25,242,25L4,25C1.3,25,0,23.7,0,21L0,4C0,1.3,1.3,0,4,0z","stroke-width":"2","stroke-linejoin":"round",fill:"none"}}),t._v(" "),e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16.5",textLength:"224"}},[t._v("缓存（表映射）取对象不会导致死锁")])])]),t._v(" "),e("g",{attrs:{"ed:height":"21",transform:"matrix(1,0,0,1,162.3,1817.25)","ed:parentid":"123",id:"170","ed:width":"83.5"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"63"}},[t._v("3.NSLock")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,1848)","ed:parentid":"170",id:"172","ed:width":"282.53125"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"262"}},[t._v("本质就是对pthread_mutex 互斥锁的封装")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,1881.75)","ed:parentid":"170",id:"174","ed:width":"273"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"252"}},[t._v("非递归锁，不适应递归场景，会堵塞线程")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,270.1,1915.5)","ed:parentid":"174",id:"176","ed:width":"482.953125"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"462"}},[t._v("使用互斥锁`NSLock`异步并发调用block块，block块内部递归调用自己，")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,270.1,1949.25)","ed:parentid":"174",id:"178","ed:width":"133"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"112"}},[t._v("那么就会线程堵塞")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,1983)","ed:parentid":"170",id:"180","ed:width":"417.609375"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"397"}},[t._v("**解决方案：** 使用递归锁`NSRecursiveLock`替换`NSLock`")])])]),t._v(" "),e("g",{attrs:{"ed:height":"21",transform:"matrix(1,0,0,1,162.3,2016.75)","ed:parentid":"123",id:"182","ed:width":"147.90625"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"127"}},[t._v("4.NSRecursiveLock")])])]),t._v(" "),e("g",{attrs:{"ed:height":"276",transform:"matrix(1,0,0,1,216.2,2054.5)","ed:parentid":"182",id:"185","ed:width":"410.09375"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"85"}},[t._v("- (void)test {")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"33",textLength:"389"}},[t._v("    NSRecursiveLock *lock = [[NSRecursiveLock alloc] init];")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"50",textLength:"367"}},[t._v("    dispatch_async(dispatch_get_global_queue(0, 0), ^{")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"67",textLength:"196"}},[t._v("        static void (^block)(int);")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"84",textLength:"35"}}),t._v(" "),e("tspan",{attrs:{x:"10",y:"101",textLength:"177"}},[t._v("        block = ^(int value) {")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"118",textLength:"127"}},[t._v("            [lock lock];")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"135",textLength:"149"}},[t._v("            if (value > 0) {")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"152",textLength:"275"}},[t._v('                NSLog(@"value——%d", value);')]),t._v(" "),e("tspan",{attrs:{x:"10",y:"169",textLength:"182"}},[t._v("                block(value - 1);")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"186",textLength:"58"}},[t._v("            }")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"203",textLength:"144"}},[t._v("            [lock unlock];")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"220",textLength:"44"}},[t._v("        };")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"237",textLength:"103"}},[t._v("        block(10);")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"254",textLength:"31"}},[t._v("    });")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"271",textLength:"5"}},[t._v("}")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,2347.25)","ed:parentid":"182",id:"187","ed:width":"444.453125"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"423"}},[t._v("NSRecursiveLock`在[YYKit中YYWebImageOperation.m]中有用到")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,2381)","ed:parentid":"182",id:"189","ed:width":"49"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"28"}},[t._v("死锁")])])]),t._v(" "),e("g",{attrs:{"ed:height":"44",transform:"matrix(1,0,0,1,259.6,2414.75)","ed:parentid":"189",id:"191","ed:width":"517"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"487"}},[t._v("for循环在block内部对同一个对象进行了多次锁操作，直到这个资源身上挂着N")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"36",textLength:"350"}},[t._v("把锁，最后大家都无法一次性解锁——找不到解锁的出口")])])]),t._v(" "),e("g",{attrs:{"ed:height":"65",transform:"matrix(1,0,0,1,259.6,2468.5)","ed:parentid":"189",id:"193","ed:width":"518"}},[e("path",{attrs:{stroke:"#4caf50",d:"M4,0L514,0C516.7,0,518,1.3,518,4L518,61C518,63.7,516.7,65,514,65L4,65C1.3,65,0,63.7,0,61L0,4C0,1.3,1.3,0,4,0z","stroke-width":"2","stroke-linejoin":"round",fill:"none"}}),t._v(" "),e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16.5",textLength:"473"}},[t._v("**解决：** 可以采用使用缓存的`@synchronized`，因为它对对象进行锁操")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"36.5",textLength:"485"}},[t._v("作，会先从缓存查找是否有锁`syncData`存在。如果有，直接返回而不加锁，")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"56.5",textLength:"98"}},[t._v("保证锁的唯一性")])])]),t._v(" "),e("g",{attrs:{"ed:height":"21",transform:"matrix(1,0,0,1,162.3,2543.25)","ed:parentid":"123",id:"195","ed:width":"174.125"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"153"}},[t._v("5.dispatch_semaphore")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,2574)","ed:parentid":"195",id:"197","ed:width":"93.265625"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"72"}},[t._v("GCD信号量")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,2607.75)","ed:parentid":"195",id:"199","ed:width":"105"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"84"}},[t._v("通过控制数值")])])]),t._v(" "),e("g",{attrs:{"ed:height":"21",transform:"matrix(1,0,0,1,162.3,2641.5)","ed:parentid":"123",id:"201","ed:width":"118.484375"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"97"}},[t._v("6.NSCondition")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,2672.25)","ed:parentid":"201",id:"203","ed:width":"105"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"84"}},[t._v("是一个条件锁")])])]),t._v(" "),e("g",{attrs:{"ed:height":"44",transform:"matrix(1,0,0,1,216.2,2706)","ed:parentid":"201",id:"205","ed:width":"517"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"494"}},[t._v("与信号量相似：线程1需要等到条件1满足才会往下走，否则就会堵塞等待，直至")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"36",textLength:"56"}},[t._v("条件满足")])])]),t._v(" "),e("g",{attrs:{"ed:height":"21",transform:"matrix(1,0,0,1,162.3,2759.75)","ed:parentid":"123",id:"207","ed:width":"149.859375"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"129"}},[t._v("7.NSConditionLock")])])]),t._v(" "),e("g",{attrs:{"ed:height":"55",transform:"matrix(1,0,0,1,216.2,2797.5)","ed:parentid":"207",id:"210","ed:width":"320.71875"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"118"}},[t._v("open func lock() {")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"33",textLength:"300"}},[t._v("        let _ = lock(before: Date.distantFuture)")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"50",textLength:"22"}},[t._v("    }")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,2869.25)","ed:parentid":"207",id:"212","ed:width":"367.1875"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"346"}},[t._v("`NSConditionLock`是`NSCondition`加线程数的封装")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,2903)","ed:parentid":"207",id:"214","ed:width":"507.1875"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"486"}},[t._v("`NSConditionLock`可以设置锁条件，而`NSCondition`只是无脑的通知信号")])])]),t._v(" "),e("g",{attrs:{"ed:height":"21",transform:"matrix(1,0,0,1,162.3,2936.75)","ed:parentid":"123",id:"216","ed:width":"131.953125"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"111"}},[t._v("8.os_unfair_lock")])])]),t._v(" "),e("g",{attrs:{"ed:height":"44",transform:"matrix(1,0,0,1,216.2,2967.5)","ed:parentid":"216",id:"218","ed:width":"517"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"489"}},[t._v("由于`OSSpinLock`自旋锁的bug，替代方案是内部封装了`os_unfair_lock`，")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"36",textLength:"451"}},[t._v("而`os_unfair_lock`在加锁时会处于休眠状态，而不是自旋锁的忙等状态")])])]),t._v(" "),e("g",{attrs:{"ed:height":"40",transform:"matrix(1,0,0,1,108.4,3044.5)","ed:parentid":"112",id:"220","ed:width":"115"}},[e("path",{attrs:{d:"M4,0L111,0C113.7,0,115,1.3,115,4L115,36C115,38.7,113.7,40,111,40L4,40C1.3,40,0,38.7,0,36L0,4C0,1.3,1.3,0,4,0z",fill:"#ff9595"}}),t._v(" "),e("g",{attrs:{transform:"translate(18,10.1)"}},[e("use",{attrs:{transform:"translate(0,0)","xlink:href":"#imgpriority2"}})]),t._v(" "),e("text",{staticClass:"st22"},[e("tspan",{attrs:{x:"43",y:"24",textLength:"54"}},[t._v("自旋锁")])])]),t._v(" "),e("symbol",{attrs:{id:"imgpriority2"}},[e("image",{attrs:{"xlink:href":"data:image/png;base64,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",height:"16",width:"16"}})]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,162.3,3094.25)","ed:parentid":"220",id:"223","ed:width":"318.1875"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"297"}},[t._v("线程反复检查锁变量是否可⽤，⼀种`忙等待`。")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,162.3,3128)","ed:parentid":"220",id:"225","ed:width":"384.09375"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"363"}},[t._v("消耗CPU，因此对于线程只会阻塞很短时间的场合是有效的")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,162.3,3161.75)","ed:parentid":"220",id:"227","ed:width":"203"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"182"}},[t._v("避免了进程上下⽂的调度开销")])])]),t._v(" "),e("g",{attrs:{"ed:height":"21",transform:"matrix(1,0,0,1,162.3,3195.5)","ed:parentid":"220",id:"229","ed:width":"113.109375"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"92"}},[t._v("1.OSSpinLock")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,3226.25)","ed:parentid":"229",id:"231","ed:width":"203"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"182"}},[t._v("出现了安全问题之后就废弃了")])])]),t._v(" "),e("g",{attrs:{"ed:height":"44",transform:"matrix(1,0,0,1,216.2,3260)","ed:parentid":"229",id:"233","ed:width":"517"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"488"}},[t._v("`OSSpinLock`忙等的机制就可能造成高优先级一直`running等待`，占用CPU")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"36",textLength:"476"}},[t._v("时间片；而低优先级任务无法抢占时间片，变成迟迟完不成，不释放锁的情况")])])]),t._v(" "),e("g",{attrs:{"ed:height":"21",transform:"matrix(1,0,0,1,162.3,3313.75)","ed:parentid":"220",id:"235","ed:width":"80.078125"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"59"}},[t._v("2.atomic")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,3344.5)","ed:parentid":"235",id:"237","ed:width":"454.046875"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"433"}},[t._v("内部使用`os_unfair_lock`替代了`OSSpinLock`（iOS10之后替换）")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,3378.25)","ed:parentid":"235",id:"239","ed:width":"272.90625"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"252"}},[t._v("只是锁set，get方法，并完全非线程安全")])])]),t._v(" "),e("g",{attrs:{"ed:height":"25",transform:"matrix(1,0,0,1,216.2,3412)","ed:parentid":"235",id:"241","ed:width":"379.1875"}},[e("path",{attrs:{d:"M4,0L375.2,0C377.9,0,379.2,1.3,379.2,4L379.2,21C379.2,23.7,377.9,25,375.2,25L4,25C1.3,25,0,23.7,0,21L0,4C0,1.3,1.3,0,4,0z",stroke:"#ffabd5","stroke-width":"2","stroke-linejoin":"round",fill:"#ffabd5"}}),t._v(" "),e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16.5",textLength:"357"}},[t._v("所以现在atomic是 基于 互斥锁 os_unfair_lock 实现的了")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,162.3,3446.75)","ed:parentid":"220",id:"243","ed:width":"80.6875"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"60"}},[t._v("3. 读写锁")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,3480.5)","ed:parentid":"243",id:"245","ed:width":"430.1875"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"409"}},[t._v("一种特殊的`自旋锁`，它把对共享资源的访问者划分成读者和写者")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,3514.25)","ed:parentid":"243",id:"247","ed:width":"427"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"406"}},[t._v("读者只对共享资源进行读访问，写者则需要对共享资源进行写操作")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,3548)","ed:parentid":"243",id:"249","ed:width":"49"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"28"}},[t._v("写：")])])]),t._v(" "),e("g",{attrs:{"ed:height":"44",transform:"matrix(1,0,0,1,259.6,3581.75)","ed:parentid":"249",id:"251","ed:width":"329"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"210"}},[t._v("获取写能力前，不能有任何读写：")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"36",textLength:"308"}},[t._v("如果已经有读操作，那么等待，直到没有读或者写")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,3635.5)","ed:parentid":"243",id:"253","ed:width":"49"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"28"}},[t._v("读：")])])]),t._v(" "),e("g",{attrs:{"ed:height":"44",transform:"matrix(1,0,0,1,259.6,3669.25)","ed:parentid":"253",id:"255","ed:width":"259"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"70"}},[t._v("可以多读：")]),t._v(" "),e("tspan",{attrs:{x:"10",y:"36",textLength:"238"}},[t._v("当前资源只有读操作，那么可以访问。")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,259.6,3723)","ed:parentid":"253",id:"257","ed:width":"343"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"322"}},[t._v("当前已经有写操作，那么必须等待，直到没有写操作")])])]),t._v(" "),e("g",{attrs:{"ed:height":"24",transform:"matrix(1,0,0,1,216.2,3756.75)","ed:parentid":"243",id:"259","ed:width":"254.09375"}},[e("text",{staticClass:"st23"},[e("tspan",{attrs:{x:"10",y:"16",textLength:"233"}},[t._v("可以使用[栅栏函数]完成读写锁的需求")])])])])]),t._v(" "),e("div",{attrs:{id:"copyright"}},[t._v("Created With  "),e("a",{attrs:{href:"https://www.edrawsoft.com/",target:"_blank",title:"edrawsoft"}},[t._v("MindMaster")])])])])])])])}),[],!1,null,null,null);e.default=n.exports}}]);